var Ce=Object.defineProperty;var Re=(t,e,r)=>e in t?Ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var me=(t,e,r)=>(Re(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function makeMap(t,e){const r=Object.create(null),s=t.split(",");for(let n=0;n<s.length;n++)r[s[n]]=!0;return e?n=>!!r[n.toLowerCase()]:n=>!!r[n]}function normalizeStyle(t){if(isArray$2(t)){const e={};for(let r=0;r<t.length;r++){const s=t[r],n=isString$1(s)?parseStringStyle(s):normalizeStyle(s);if(n)for(const i in n)e[i]=n[i]}return e}else{if(isString$1(t))return t;if(isObject$5(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const s=r.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$1(t))e=t;else if(isArray$2(t))for(let r=0;r<t.length;r++){const s=normalizeClass(t[r]);s&&(e+=s+" ")}else if(isObject$5(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$5=Object.assign,remove$1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},hasOwnProperty$4=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$4.call(t,e),isArray$2=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction$2=t=>typeof t=="function",isString$1=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject$5=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$5(t)&&isFunction$2(t.then)&&isFunction$2(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$1=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$1(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},camelizeRE$1=/-(\w)/g,camelize$1=cacheStringFunction(t=>t.replace(camelizeRE$1,(e,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},def=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const r=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let r,s;for(r=0,s=this.effects.length;r<s;r++)this.effects[r].stop();for(r=0,s=this.cleanups.length;r<s;r++)this.cleanups[r]();if(this.scopes)for(r=0,s=this.scopes.length;r<s;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let r=0;for(let s=0;s<e.length;s++){const n=e[s];wasTracked(n)&&!newTracked(n)?n.delete(t):e[r++]=n,n.w&=~trackOpBit,n.n&=~trackOpBit}e.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,r=null,s){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,s)}run(){if(!this.active)return this.fn();let e=activeEffect,r=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,r){if(shouldTrack&&activeEffect){let s=targetMap.get(t);s||targetMap.set(t,s=new Map);let n=s.get(r);n||s.set(r,n=createDep()),trackEffects(n)}}function trackEffects(t,e){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,r=!wasTracked(t)):r=!t.has(activeEffect),r&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger$1(t,e,r,s,n,i){const o=targetMap.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(r==="length"&&isArray$2(t)){const l=toNumber(s);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(r!==void 0&&a.push(o.get(r)),e){case"add":isArray$2(t)?isIntegerKey(r)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(t)||(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&a.push(o.get(ITERATE_KEY));break}if(a.length===1)a[0]&&triggerEffects(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);triggerEffects(createDep(l))}}function triggerEffects(t,e){const r=isArray$2(t)?t:[...t];for(const s of r)s.computed&&triggerEffect(s);for(const s of r)s.computed||triggerEffect(s)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const s=toRaw(this);for(let i=0,o=this.length;i<o;i++)track(s,"get",i+"");const n=s[e](...r);return n===-1||n===!1?s[e](...r.map(toRaw)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){pauseTracking();const s=toRaw(this)[e].apply(this,r);return resetTracking(),s}}),t}function createGetter(t=!1,e=!1){return function(s,n,i){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&i===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(s))return s;const o=isArray$2(s);if(!t&&o&&hasOwn(arrayInstrumentations,n))return Reflect.get(arrayInstrumentations,n,i);const a=Reflect.get(s,n,i);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(t||track(s,"get",n),e)?a:isRef(a)?o&&isIntegerKey(n)?a:a.value:isObject$5(a)?t?readonly(a):reactive(a):a}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(r,s,n,i){let o=r[s];if(isReadonly(o)&&isRef(o)&&!isRef(n))return!1;if(!t&&(!isShallow(n)&&!isReadonly(n)&&(o=toRaw(o),n=toRaw(n)),!isArray$2(r)&&isRef(o)&&!isRef(n)))return o.value=n,!0;const a=isArray$2(r)&&isIntegerKey(s)?Number(s)<r.length:hasOwn(r,s),l=Reflect.set(r,s,n,i);return r===toRaw(i)&&(a?hasChanged(n,o)&&trigger$1(r,"set",s,n):trigger$1(r,"add",s,n)),l}}function deleteProperty(t,e){const r=hasOwn(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&r&&trigger$1(t,"delete",e,void 0),s}function has(t,e){const r=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),r}function ownKeys(t){return track(t,"iterate",isArray$2(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend$5({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1$1(t,e,r=!1,s=!1){t=t.__v_raw;const n=toRaw(t),i=toRaw(e);r||(e!==i&&track(n,"get",e),track(n,"get",i));const{has:o}=getProto(n),a=s?toShallow:r?toReadonly:toReactive;if(o.call(n,e))return a(t.get(e));if(o.call(n,i))return a(t.get(i));t!==n&&t.get(e)}function has$1(t,e=!1){const r=this.__v_raw,s=toRaw(r),n=toRaw(t);return e||(t!==n&&track(s,"has",t),track(s,"has",n)),t===n?r.has(t):r.has(t)||r.has(n)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger$1(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const r=toRaw(this),{has:s,get:n}=getProto(r);let i=s.call(r,t);i||(t=toRaw(t),i=s.call(r,t));const o=n.call(r,t);return r.set(t,e),i?hasChanged(e,o)&&trigger$1(r,"set",t,e):trigger$1(r,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:r,get:s}=getProto(e);let n=r.call(e,t);n||(t=toRaw(t),n=r.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return n&&trigger$1(e,"delete",t,void 0),i}function clear(){const t=toRaw(this),e=t.size!==0,r=t.clear();return e&&trigger$1(t,"clear",void 0,void 0),r}function createForEach(t,e){return function(s,n){const i=this,o=i.__v_raw,a=toRaw(o),l=e?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",ITERATE_KEY),o.forEach((c,u)=>s.call(n,l(c),l(u),i))}}function createIterableMethod(t,e,r){return function(...s){const n=this.__v_raw,i=toRaw(n),o=isMap(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...s),u=r?toShallow:e?toReadonly:toReactive;return!e&&track(i,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(i){return get$1$1(this,i)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(i){return get$1$1(this,i,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(i){return get$1$1(this,i,!0)},get size(){return size(this,!0)},has(i){return has$1.call(this,i,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},s={get(i){return get$1$1(this,i,!0,!0)},get size(){return size(this,!0)},has(i){return has$1.call(this,i,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=createIterableMethod(i,!1,!1),r[i]=createIterableMethod(i,!0,!1),e[i]=createIterableMethod(i,!1,!0),s[i]=createIterableMethod(i,!0,!0)}),[t,r,e,s]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const r=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(s,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?s:Reflect.get(hasOwn(r,n)&&n in s?r:s,n,i)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,r,s,n){if(!isObject$5(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=n.get(t);if(i)return i;const o=getTargetType(t);if(o===0)return t;const a=new Proxy(t,o===2?s:r);return n.set(t,a),a}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$5(t)?reactive(t):t,toReadonly=t=>isObject$5(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:toRaw(e),this._value=r?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const r=this.__v_isShallow||isShallow(e)||isReadonly(e);e=r?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,r)=>unref(Reflect.get(t,e,r)),set:(t,e,r,s)=>{const n=t[e];return isRef(n)&&!isRef(r)?(n.value=r,!0):Reflect.set(t,e,r,s)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(e,r,s,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(t,e,r=!1){let s,n;const i=isFunction$2(t);return i?(s=t,n=NOOP):(s=t.get,n=t.set),new ComputedRefImpl(s,n,i||!n,r)}function warn(t,...e){}function callWithErrorHandling(t,e,r,s){let n;try{n=s?t(...s):t()}catch(i){handleError(i,e,r)}return n}function callWithAsyncErrorHandling(t,e,r,s){if(isFunction$2(t)){const i=callWithErrorHandling(t,e,r,s);return i&&isPromise(i)&&i.catch(o=>{handleError(o,e,r)}),i}const n=[];for(let i=0;i<t.length;i++)n.push(callWithAsyncErrorHandling(t[i],e,r,s));return n}function handleError(t,e,r,s=!0){const n=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=r;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[t,o,a]);return}}logError(t,r,n,s)}function logError(t,e,r,s=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$1(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,r=queue.length;for(;e<r;){const s=e+r>>>1;getId(queue[s])<t?e=s+1:r=s}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray$2(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const r=queue[e];r&&r.pre&&(queue.splice(e,1),e--,r())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((r,s)=>getId(r)-getId(s)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const r=getId(t)-getId(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...r){if(t.isUnmounted)return;const s=t.vnode.props||EMPTY_OBJ;let n=r;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=s[u]||EMPTY_OBJ;f&&(n=r.map(m=>isString$1(m)?m.trim():m)),d&&(n=r.map(toNumber))}let a,l=s[a=toHandlerKey(e)]||s[a=toHandlerKey(camelize$1(e))];!l&&i&&(l=s[a=toHandlerKey(hyphenate(e))]),l&&callWithAsyncErrorHandling(l,t,6,n);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,callWithAsyncErrorHandling(c,t,6,n)}}function normalizeEmitsOptions(t,e,r=!1){const s=e.emitsCache,n=s.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!isFunction$2(t)){const l=c=>{const u=normalizeEmitsOptions(c,e,!0);u&&(a=!0,extend$5(o,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(isObject$5(t)&&s.set(t,null),null):(isArray$2(i)?i.forEach(l=>o[l]=null):extend$5(o,i),isObject$5(t)&&s.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,r){if(!e||t._n)return t;const s=(...n)=>{s._d&&setBlockTracking(-1);const i=setCurrentRenderingInstance(e);let o;try{o=t(...n)}finally{setCurrentRenderingInstance(i),s._d&&setBlockTracking(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:r,proxy:s,withProxy:n,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:m,ctx:g,inheritAttrs:y}=t;let b,x;const _=setCurrentRenderingInstance(t);try{if(r.shapeFlag&4){const v=n||s;b=normalizeVNode(u.call(v,v,d,i,m,f,g)),x=l}else{const v=e;b=normalizeVNode(v.length>1?v(i,{attrs:l,slots:a,emit:c}):v(i,null)),x=e.props?l:getFunctionalFallthrough(l)}}catch(v){blockStack.length=0,handleError(v,t,1),b=createVNode(Comment)}let w=b;if(x&&y!==!1){const v=Object.keys(x),{shapeFlag:S}=w;v.length&&S&7&&(o&&v.some(isModelListener)&&(x=filterModelListeners(x,o)),w=cloneVNode(w,x))}return r.dirs&&(w=cloneVNode(w),w.dirs=w.dirs?w.dirs.concat(r.dirs):r.dirs),r.transition&&(w.transition=r.transition),b=w,setCurrentRenderingInstance(_),b}const getFunctionalFallthrough=t=>{let e;for(const r in t)(r==="class"||r==="style"||isOn(r))&&((e||(e={}))[r]=t[r]);return e},filterModelListeners=(t,e)=>{const r={};for(const s in t)(!isModelListener(s)||!(s.slice(9)in e))&&(r[s]=t[s]);return r};function shouldUpdateComponent(t,e,r){const{props:s,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return s?hasPropsChanged(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==s[f]&&!isEmitListener(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?hasPropsChanged(s,o,c):!0:!!o;return!1}function hasPropsChanged(t,e,r){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let n=0;n<s.length;n++){const i=s[n];if(e[i]!==t[i]&&!isEmitListener(r,i))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$2(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let r=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===r&&(r=currentInstance.provides=Object.create(s)),r[t]=e}}function inject(t,e,r=!1){const s=currentInstance||currentRenderingInstance;if(s){const n=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(n&&t in n)return n[t];if(arguments.length>1)return r&&isFunction$2(e)?e.call(s.proxy):e}}function watchEffect(t,e){return doWatch(t,null,e)}const INITIAL_WATCHER_VALUE={};function watch(t,e,r){return doWatch(t,e,r)}function doWatch(t,e,{immediate:r,deep:s,flush:n,onTrack:i,onTrigger:o}=EMPTY_OBJ){const a=currentInstance;let l,c=!1,u=!1;if(isRef(t)?(l=()=>t.value,c=isShallow(t)):isReactive(t)?(l=()=>t,s=!0):isArray$2(t)?(u=!0,c=t.some(w=>isReactive(w)||isShallow(w)),l=()=>t.map(w=>{if(isRef(w))return w.value;if(isReactive(w))return traverse(w);if(isFunction$2(w))return callWithErrorHandling(w,a,2)})):isFunction$2(t)?e?l=()=>callWithErrorHandling(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),callWithAsyncErrorHandling(t,a,3,[f])}:l=NOOP,e&&s){const w=l;l=()=>traverse(w())}let d,f=w=>{d=x.onStop=()=>{callWithErrorHandling(w,a,4)}},m;if(isInSSRComponentSetup)if(f=NOOP,e?r&&callWithAsyncErrorHandling(e,a,3,[l(),u?[]:void 0,f]):l(),n==="sync"){const w=useSSRContext();m=w.__watcherHandles||(w.__watcherHandles=[])}else return NOOP;let g=u?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const y=()=>{if(!!x.active)if(e){const w=x.run();(s||c||(u?w.some((v,S)=>hasChanged(v,g[S])):hasChanged(w,g)))&&(d&&d(),callWithAsyncErrorHandling(e,a,3,[w,g===INITIAL_WATCHER_VALUE?void 0:u&&g[0]===INITIAL_WATCHER_VALUE?[]:g,f]),g=w)}else x.run()};y.allowRecurse=!!e;let b;n==="sync"?b=y:n==="post"?b=()=>queuePostRenderEffect(y,a&&a.suspense):(y.pre=!0,a&&(y.id=a.uid),b=()=>queueJob(y));const x=new ReactiveEffect(l,b);e?r?y():g=x.run():n==="post"?queuePostRenderEffect(x.run.bind(x),a&&a.suspense):x.run();const _=()=>{x.stop(),a&&a.scope&&remove$1(a.scope.effects,x)};return m&&m.push(_),_}function instanceWatch(t,e,r){const s=this.proxy,n=isString$1(t)?t.includes(".")?createPathGetter(s,t):()=>s[t]:t.bind(s,s);let i;isFunction$2(e)?i=e:(i=e.handler,r=e);const o=currentInstance;setCurrentInstance(this);const a=doWatch(n,i.bind(s),r);return o?setCurrentInstance(o):unsetCurrentInstance(),a}function createPathGetter(t,e){const r=e.split(".");return()=>{let s=t;for(let n=0;n<r.length&&s;n++)s=s[r[n]];return s}}function traverse(t,e){if(!isObject$5(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray$2(t))for(let r=0;r<t.length;r++)traverse(t[r],e);else if(isSet(t)||isMap(t))t.forEach(r=>{traverse(r,e)});else if(isPlainObject$1(t))for(const r in t)traverse(t[r],e);return t}function defineComponent(t){return isFunction$2(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,r=currentInstance){const s=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(injectHook(e,s,r),r){let n=r.parent;for(;n&&n.parent;)isKeepAlive(n.parent.vnode)&&injectToKeepAliveRoot(s,e,r,n),n=n.parent}}function injectToKeepAliveRoot(t,e,r,s){const n=injectHook(e,t,s,!0);onUnmounted(()=>{remove$1(s[e],n)},r)}function injectHook(t,e,r=currentInstance,s=!1){if(r){const n=r[t]||(r[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const a=callWithAsyncErrorHandling(e,r,t,o);return unsetCurrentInstance(),resetTracking(),a});return s?n.unshift(i):n.push(i),i}}const createHook=t=>(e,r=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...s)=>e(...s),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function invokeDirectiveHook(t,e,r,s){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(pauseTracking(),callWithAsyncErrorHandling(l,r,8,[t.el,a,t,e]),resetTracking())}}const COMPONENTS="components";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(t,e,r=!0,s=!1){const n=currentRenderingInstance||currentInstance;if(n){const i=n.type;if(t===COMPONENTS){const a=getComponentName(i,!1);if(a&&(a===e||a===camelize$1(e)||a===capitalize(camelize$1(e))))return i}const o=resolve$2(n[t]||i[t],e)||resolve$2(n.appContext[t],e);return!o&&s?i:o}}function resolve$2(t,e){return t&&(t[e]||t[camelize$1(e)]||t[capitalize(camelize$1(e))])}function renderList(t,e,r,s){let n;const i=r&&r[s];if(isArray$2(t)||isString$1(t)){n=new Array(t.length);for(let o=0,a=t.length;o<a;o++)n[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){n=new Array(t);for(let o=0;o<t;o++)n[o]=e(o+1,o,void 0,i&&i[o])}else if(isObject$5(t))if(t[Symbol.iterator])n=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];n[a]=e(t[c],c,a,i&&i[a])}}else n=[];return r&&(r[s]=n),n}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick$1.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:r,setupState:s,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return n[e];case 4:return r[e];case 3:return i[e]}else{if(hasSetupBinding(s,e))return o[e]=1,s[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=2,n[e];if((c=t.propsOptions[0])&&hasOwn(c,e))return o[e]=3,i[e];if(r!==EMPTY_OBJ&&hasOwn(r,e))return o[e]=4,r[e];shouldCacheAccess&&(o[e]=0)}}const u=publicPropertiesMap[e];let d,f;if(u)return e==="$attrs"&&track(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(r!==EMPTY_OBJ&&hasOwn(r,e))return o[e]=4,r[e];if(f=l.config.globalProperties,hasOwn(f,e))return f[e]},set({_:t},e,r){const{data:s,setupState:n,ctx:i}=t;return hasSetupBinding(n,e)?(n[e]=r,!0):s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=r,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:s,appContext:n,propsOptions:i}},o){let a;return!!r[o]||t!==EMPTY_OBJ&&hasOwn(t,o)||hasSetupBinding(e,o)||(a=i[0])&&hasOwn(a,o)||hasOwn(s,o)||hasOwn(publicPropertiesMap,o)||hasOwn(n.config.globalProperties,o)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:hasOwn(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),r=t.proxy,s=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:m,updated:g,activated:y,deactivated:b,beforeDestroy:x,beforeUnmount:_,destroyed:w,unmounted:v,render:S,renderTracked:M,renderTriggered:C,errorCaptured:A,serverPrefetch:X,expose:F,inheritAttrs:O,components:U,directives:k,filters:B}=e;if(c&&resolveInjections(c,s,null,t.appContext.config.unwrapInjectedRef),o)for(const N in o){const Q=o[N];isFunction$2(Q)&&(s[N]=Q.bind(r))}if(n){const N=n.call(r,r);isObject$5(N)&&(t.data=reactive(N))}if(shouldCacheAccess=!0,i)for(const N in i){const Q=i[N],ce=isFunction$2(Q)?Q.bind(r,r):isFunction$2(Q.get)?Q.get.bind(r,r):NOOP,L=!isFunction$2(Q)&&isFunction$2(Q.set)?Q.set.bind(r):NOOP,Z=computed({get:ce,set:L});Object.defineProperty(s,N,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ne=>Z.value=ne})}if(a)for(const N in a)createWatcher(a[N],s,r,N);if(l){const N=isFunction$2(l)?l.call(r):l;Reflect.ownKeys(N).forEach(Q=>{provide(Q,N[Q])})}u&&callHook(u,t,"c");function te(N,Q){isArray$2(Q)?Q.forEach(ce=>N(ce.bind(r))):Q&&N(Q.bind(r))}if(te(onBeforeMount,d),te(onMounted,f),te(onBeforeUpdate,m),te(onUpdated,g),te(onActivated,y),te(onDeactivated,b),te(onErrorCaptured,A),te(onRenderTracked,M),te(onRenderTriggered,C),te(onBeforeUnmount,_),te(onUnmounted,v),te(onServerPrefetch,X),isArray$2(F))if(F.length){const N=t.exposed||(t.exposed={});F.forEach(Q=>{Object.defineProperty(N,Q,{get:()=>r[Q],set:ce=>r[Q]=ce})})}else t.exposed||(t.exposed={});S&&t.render===NOOP&&(t.render=S),O!=null&&(t.inheritAttrs=O),U&&(t.components=U),k&&(t.directives=k)}function resolveInjections(t,e,r=NOOP,s=!1){isArray$2(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let o;isObject$5(i)?"default"in i?o=inject(i.from||n,i.default,!0):o=inject(i.from||n):o=inject(i),isRef(o)&&s?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[n]=o}}function callHook(t,e,r){callWithAsyncErrorHandling(isArray$2(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,r)}function createWatcher(t,e,r,s){const n=s.includes(".")?createPathGetter(r,s):()=>r[s];if(isString$1(t)){const i=e[t];isFunction$2(i)&&watch(n,i)}else if(isFunction$2(t))watch(n,t.bind(r));else if(isObject$5(t))if(isArray$2(t))t.forEach(i=>createWatcher(i,e,r,s));else{const i=isFunction$2(t.handler)?t.handler.bind(r):e[t.handler];isFunction$2(i)&&watch(n,i,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:r,extends:s}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!r&&!s?l=e:(l={},n.length&&n.forEach(c=>mergeOptions$2(l,c,o,!0)),mergeOptions$2(l,e,o)),isObject$5(e)&&i.set(e,l),l}function mergeOptions$2(t,e,r,s=!1){const{mixins:n,extends:i}=e;i&&mergeOptions$2(t,i,r,!0),n&&n.forEach(o=>mergeOptions$2(t,o,r,!0));for(const o in e)if(!(s&&o==="expose")){const a=internalOptionMergeStrats[o]||r&&r[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend$5(isFunction$2(t)?t.call(this,this):t,isFunction$2(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$2(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend$5(extend$5(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const r=extend$5(Object.create(null),t);for(const s in e)r[s]=mergeAsArray(t[s],e[s]);return r}function initProps(t,e,r,s=!1){const n={},i={};def(i,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);r?t.props=s?n:shallowReactive(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function updateProps(t,e,r,s){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=toRaw(n),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(isEmitListener(t.emitsOptions,f))continue;const m=e[f];if(l)if(hasOwn(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const g=camelize$1(f);n[g]=resolvePropValue(l,a,g,m,t,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{setFullProps(t,e,n,i)&&(c=!0);let u;for(const d in a)(!e||!hasOwn(e,d)&&((u=hyphenate(d))===d||!hasOwn(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(n[d]=resolvePropValue(l,a,d,void 0,t,!0)):delete n[d]);if(i!==a)for(const d in i)(!e||!hasOwn(e,d)&&!0)&&(delete i[d],c=!0)}c&&trigger$1(t,"set","$attrs")}function setFullProps(t,e,r,s){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(isReservedProp(l))continue;const c=e[l];let u;n&&hasOwn(n,u=camelize$1(l))?!i||!i.includes(u)?r[u]=c:(a||(a={}))[u]=c:isEmitListener(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=toRaw(r),c=a||EMPTY_OBJ;for(let u=0;u<i.length;u++){const d=i[u];r[d]=resolvePropValue(n,l,d,c[d],t,!hasOwn(c,d))}}return o}function resolvePropValue(t,e,r,s,n,i){const o=t[r];if(o!=null){const a=hasOwn(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&isFunction$2(l)){const{propsDefaults:c}=n;r in c?s=c[r]:(setCurrentInstance(n),s=c[r]=l.call(null,e),unsetCurrentInstance())}else s=l}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===hyphenate(r))&&(s=!0))}return s}function normalizePropsOptions(t,e,r=!1){const s=e.propsCache,n=s.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!isFunction$2(t)){const u=d=>{l=!0;const[f,m]=normalizePropsOptions(d,e,!0);extend$5(o,f),m&&a.push(...m)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return isObject$5(t)&&s.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$2(i))for(let u=0;u<i.length;u++){const d=camelize$1(i[u]);validatePropName(d)&&(o[d]=EMPTY_OBJ)}else if(i)for(const u in i){const d=camelize$1(u);if(validatePropName(d)){const f=i[u],m=o[d]=isArray$2(f)||isFunction$2(f)?{type:f}:Object.assign({},f);if(m){const g=getTypeIndex(Boolean,m.type),y=getTypeIndex(String,m.type);m[0]=g>-1,m[1]=y<0||g<y,(g>-1||hasOwn(m,"default"))&&a.push(d)}}}const c=[o,a];return isObject$5(t)&&s.set(t,c),c}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$2(e)?e.findIndex(r=>isSameType(r,t)):isFunction$2(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$2(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,r)=>{if(e._n)return e;const s=withCtx((...n)=>normalizeSlotValue(e(...n)),r);return s._c=!1,s},normalizeObjectSlots=(t,e,r)=>{const s=t._ctx;for(const n in t){if(isInternalKey(n))continue;const i=t[n];if(isFunction$2(i))e[n]=normalizeSlot$1(n,i,s);else if(i!=null){const o=normalizeSlotValue(i);e[n]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const r=normalizeSlotValue(e);t.slots.default=()=>r},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=toRaw(e),def(e,"_",r)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,r)=>{const{vnode:s,slots:n}=t;let i=!0,o=EMPTY_OBJ;if(s.shapeFlag&32){const a=e._;a?r&&a===1?i=!1:(extend$5(n,e),!r&&a===1&&delete n._):(i=!e.$stable,normalizeObjectSlots(e,n)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(i)for(const a in n)!isInternalKey(a)&&!(a in o)&&delete n[a]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(s,n=null){isFunction$2(s)||(s=Object.assign({},s)),n!=null&&!isObject$5(n)&&(n=null);const i=createAppContext(),o=new Set;let a=!1;const l=i.app={_uid:uid$1++,_component:s,_props:n,_container:null,_context:i,_instance:null,version,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&isFunction$2(c.install)?(o.add(c),c.install(l,...u)):isFunction$2(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,d){if(!a){const f=createVNode(s,n);return f.appContext=i,u&&e?e(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,getExposeProxy(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l}};return l}}function setRef(t,e,r,s,n=!1){if(isArray$2(t)){t.forEach((f,m)=>setRef(f,e&&(isArray$2(e)?e[m]:e),r,s,n));return}if(isAsyncWrapper(s)&&!n)return;const i=s.shapeFlag&4?getExposeProxy(s.component)||s.component.proxy:s.el,o=n?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===EMPTY_OBJ?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(isString$1(c)?(u[c]=null,hasOwn(d,c)&&(d[c]=null)):isRef(c)&&(c.value=null)),isFunction$2(l))callWithErrorHandling(l,a,12,[o,u]);else{const f=isString$1(l),m=isRef(l);if(f||m){const g=()=>{if(t.f){const y=f?hasOwn(d,l)?d[l]:u[l]:l.value;n?isArray$2(y)&&remove$1(y,i):isArray$2(y)?y.includes(i)||y.push(i):f?(u[l]=[i],hasOwn(d,l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,hasOwn(d,l)&&(d[l]=o)):m&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,queuePostRenderEffect(g,r)):g()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const r=getGlobalThis();r.__VUE__=!0;const{insert:s,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:m=NOOP,insertStaticContent:g}=t,y=(E,T,P,R=null,D=null,W=null,K=!1,H=null,Y=!!T.dynamicChildren)=>{if(E===T)return;E&&!isSameVNodeType(E,T)&&(R=j(E),ne(E,D,W,!0),E=null),T.patchFlag===-2&&(Y=!1,T.dynamicChildren=null);const{type:G,ref:re,shapeFlag:ee}=T;switch(G){case Text$1:b(E,T,P,R);break;case Comment:x(E,T,P,R);break;case Static:E==null&&_(T,P,R,K);break;case Fragment:U(E,T,P,R,D,W,K,H,Y);break;default:ee&1?S(E,T,P,R,D,W,K,H,Y):ee&6?k(E,T,P,R,D,W,K,H,Y):(ee&64||ee&128)&&G.process(E,T,P,R,D,W,K,H,Y,oe)}re!=null&&D&&setRef(re,E&&E.ref,W,T||E,!T)},b=(E,T,P,R)=>{if(E==null)s(T.el=a(T.children),P,R);else{const D=T.el=E.el;T.children!==E.children&&c(D,T.children)}},x=(E,T,P,R)=>{E==null?s(T.el=l(T.children||""),P,R):T.el=E.el},_=(E,T,P,R)=>{[E.el,E.anchor]=g(E.children,T,P,R,E.el,E.anchor)},w=({el:E,anchor:T},P,R)=>{let D;for(;E&&E!==T;)D=f(E),s(E,P,R),E=D;s(T,P,R)},v=({el:E,anchor:T})=>{let P;for(;E&&E!==T;)P=f(E),n(E),E=P;n(T)},S=(E,T,P,R,D,W,K,H,Y)=>{K=K||T.type==="svg",E==null?M(T,P,R,D,W,K,H,Y):X(E,T,D,W,K,H,Y)},M=(E,T,P,R,D,W,K,H)=>{let Y,G;const{type:re,props:ee,shapeFlag:se,transition:ae,dirs:he}=E;if(Y=E.el=o(E.type,W,ee&&ee.is,ee),se&8?u(Y,E.children):se&16&&A(E.children,Y,null,R,D,W&&re!=="foreignObject",K,H),he&&invokeDirectiveHook(E,null,R,"created"),ee){for(const fe in ee)fe!=="value"&&!isReservedProp(fe)&&i(Y,fe,null,ee[fe],W,E.children,R,D,z);"value"in ee&&i(Y,"value",null,ee.value),(G=ee.onVnodeBeforeMount)&&invokeVNodeHook(G,R,E)}C(Y,E,E.scopeId,K,R),he&&invokeDirectiveHook(E,null,R,"beforeMount");const pe=(!D||D&&!D.pendingBranch)&&ae&&!ae.persisted;pe&&ae.beforeEnter(Y),s(Y,T,P),((G=ee&&ee.onVnodeMounted)||pe||he)&&queuePostRenderEffect(()=>{G&&invokeVNodeHook(G,R,E),pe&&ae.enter(Y),he&&invokeDirectiveHook(E,null,R,"mounted")},D)},C=(E,T,P,R,D)=>{if(P&&m(E,P),R)for(let W=0;W<R.length;W++)m(E,R[W]);if(D){let W=D.subTree;if(T===W){const K=D.vnode;C(E,K,K.scopeId,K.slotScopeIds,D.parent)}}},A=(E,T,P,R,D,W,K,H,Y=0)=>{for(let G=Y;G<E.length;G++){const re=E[G]=H?cloneIfMounted(E[G]):normalizeVNode(E[G]);y(null,re,T,P,R,D,W,K,H)}},X=(E,T,P,R,D,W,K)=>{const H=T.el=E.el;let{patchFlag:Y,dynamicChildren:G,dirs:re}=T;Y|=E.patchFlag&16;const ee=E.props||EMPTY_OBJ,se=T.props||EMPTY_OBJ;let ae;P&&toggleRecurse(P,!1),(ae=se.onVnodeBeforeUpdate)&&invokeVNodeHook(ae,P,T,E),re&&invokeDirectiveHook(T,E,P,"beforeUpdate"),P&&toggleRecurse(P,!0);const he=D&&T.type!=="foreignObject";if(G?F(E.dynamicChildren,G,H,P,R,he,W):K||Q(E,T,H,null,P,R,he,W,!1),Y>0){if(Y&16)O(H,T,ee,se,P,R,D);else if(Y&2&&ee.class!==se.class&&i(H,"class",null,se.class,D),Y&4&&i(H,"style",ee.style,se.style,D),Y&8){const pe=T.dynamicProps;for(let fe=0;fe<pe.length;fe++){const ge=pe[fe],be=ee[ge],xe=se[ge];(xe!==be||ge==="value")&&i(H,ge,be,xe,D,E.children,P,R,z)}}Y&1&&E.children!==T.children&&u(H,T.children)}else!K&&G==null&&O(H,T,ee,se,P,R,D);((ae=se.onVnodeUpdated)||re)&&queuePostRenderEffect(()=>{ae&&invokeVNodeHook(ae,P,T,E),re&&invokeDirectiveHook(T,E,P,"updated")},R)},F=(E,T,P,R,D,W,K)=>{for(let H=0;H<T.length;H++){const Y=E[H],G=T[H],re=Y.el&&(Y.type===Fragment||!isSameVNodeType(Y,G)||Y.shapeFlag&70)?d(Y.el):P;y(Y,G,re,null,R,D,W,K,!0)}},O=(E,T,P,R,D,W,K)=>{if(P!==R){if(P!==EMPTY_OBJ)for(const H in P)!isReservedProp(H)&&!(H in R)&&i(E,H,P[H],null,K,T.children,D,W,z);for(const H in R){if(isReservedProp(H))continue;const Y=R[H],G=P[H];Y!==G&&H!=="value"&&i(E,H,G,Y,K,T.children,D,W,z)}"value"in R&&i(E,"value",P.value,R.value)}},U=(E,T,P,R,D,W,K,H,Y)=>{const G=T.el=E?E.el:a(""),re=T.anchor=E?E.anchor:a("");let{patchFlag:ee,dynamicChildren:se,slotScopeIds:ae}=T;ae&&(H=H?H.concat(ae):ae),E==null?(s(G,P,R),s(re,P,R),A(T.children,P,re,D,W,K,H,Y)):ee>0&&ee&64&&se&&E.dynamicChildren?(F(E.dynamicChildren,se,P,D,W,K,H),(T.key!=null||D&&T===D.subTree)&&traverseStaticChildren(E,T,!0)):Q(E,T,P,re,D,W,K,H,Y)},k=(E,T,P,R,D,W,K,H,Y)=>{T.slotScopeIds=H,E==null?T.shapeFlag&512?D.ctx.activate(T,P,R,K,Y):B(T,P,R,D,W,K,Y):ie(E,T,Y)},B=(E,T,P,R,D,W,K)=>{const H=E.component=createComponentInstance(E,R,D);if(isKeepAlive(E)&&(H.ctx.renderer=oe),setupComponent(H),H.asyncDep){if(D&&D.registerDep(H,te),!E.el){const Y=H.subTree=createVNode(Comment);x(null,Y,T,P)}return}te(H,E,T,P,D,W,K)},ie=(E,T,P)=>{const R=T.component=E.component;if(shouldUpdateComponent(E,T,P))if(R.asyncDep&&!R.asyncResolved){N(R,T,P);return}else R.next=T,invalidateJob(R.update),R.update();else T.el=E.el,R.vnode=T},te=(E,T,P,R,D,W,K)=>{const H=()=>{if(E.isMounted){let{next:re,bu:ee,u:se,parent:ae,vnode:he}=E,pe=re,fe;toggleRecurse(E,!1),re?(re.el=he.el,N(E,re,K)):re=he,ee&&invokeArrayFns(ee),(fe=re.props&&re.props.onVnodeBeforeUpdate)&&invokeVNodeHook(fe,ae,re,he),toggleRecurse(E,!0);const ge=renderComponentRoot(E),be=E.subTree;E.subTree=ge,y(be,ge,d(be.el),j(be),E,D,W),re.el=ge.el,pe===null&&updateHOCHostEl(E,ge.el),se&&queuePostRenderEffect(se,D),(fe=re.props&&re.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(fe,ae,re,he),D)}else{let re;const{el:ee,props:se}=T,{bm:ae,m:he,parent:pe}=E,fe=isAsyncWrapper(T);if(toggleRecurse(E,!1),ae&&invokeArrayFns(ae),!fe&&(re=se&&se.onVnodeBeforeMount)&&invokeVNodeHook(re,pe,T),toggleRecurse(E,!0),ee&&J){const ge=()=>{E.subTree=renderComponentRoot(E),J(ee,E.subTree,E,D,null)};fe?T.type.__asyncLoader().then(()=>!E.isUnmounted&&ge()):ge()}else{const ge=E.subTree=renderComponentRoot(E);y(null,ge,P,R,E,D,W),T.el=ge.el}if(he&&queuePostRenderEffect(he,D),!fe&&(re=se&&se.onVnodeMounted)){const ge=T;queuePostRenderEffect(()=>invokeVNodeHook(re,pe,ge),D)}(T.shapeFlag&256||pe&&isAsyncWrapper(pe.vnode)&&pe.vnode.shapeFlag&256)&&E.a&&queuePostRenderEffect(E.a,D),E.isMounted=!0,T=P=R=null}},Y=E.effect=new ReactiveEffect(H,()=>queueJob(G),E.scope),G=E.update=()=>Y.run();G.id=E.uid,toggleRecurse(E,!0),G()},N=(E,T,P)=>{T.component=E;const R=E.vnode.props;E.vnode=T,E.next=null,updateProps(E,T.props,R,P),updateSlots(E,T.children,P),pauseTracking(),flushPreFlushCbs(),resetTracking()},Q=(E,T,P,R,D,W,K,H,Y=!1)=>{const G=E&&E.children,re=E?E.shapeFlag:0,ee=T.children,{patchFlag:se,shapeFlag:ae}=T;if(se>0){if(se&128){L(G,ee,P,R,D,W,K,H,Y);return}else if(se&256){ce(G,ee,P,R,D,W,K,H,Y);return}}ae&8?(re&16&&z(G,D,W),ee!==G&&u(P,ee)):re&16?ae&16?L(G,ee,P,R,D,W,K,H,Y):z(G,D,W,!0):(re&8&&u(P,""),ae&16&&A(ee,P,R,D,W,K,H,Y))},ce=(E,T,P,R,D,W,K,H,Y)=>{E=E||EMPTY_ARR,T=T||EMPTY_ARR;const G=E.length,re=T.length,ee=Math.min(G,re);let se;for(se=0;se<ee;se++){const ae=T[se]=Y?cloneIfMounted(T[se]):normalizeVNode(T[se]);y(E[se],ae,P,null,D,W,K,H,Y)}G>re?z(E,D,W,!0,!1,ee):A(T,P,R,D,W,K,H,Y,ee)},L=(E,T,P,R,D,W,K,H,Y)=>{let G=0;const re=T.length;let ee=E.length-1,se=re-1;for(;G<=ee&&G<=se;){const ae=E[G],he=T[G]=Y?cloneIfMounted(T[G]):normalizeVNode(T[G]);if(isSameVNodeType(ae,he))y(ae,he,P,null,D,W,K,H,Y);else break;G++}for(;G<=ee&&G<=se;){const ae=E[ee],he=T[se]=Y?cloneIfMounted(T[se]):normalizeVNode(T[se]);if(isSameVNodeType(ae,he))y(ae,he,P,null,D,W,K,H,Y);else break;ee--,se--}if(G>ee){if(G<=se){const ae=se+1,he=ae<re?T[ae].el:R;for(;G<=se;)y(null,T[G]=Y?cloneIfMounted(T[G]):normalizeVNode(T[G]),P,he,D,W,K,H,Y),G++}}else if(G>se)for(;G<=ee;)ne(E[G],D,W,!0),G++;else{const ae=G,he=G,pe=new Map;for(G=he;G<=se;G++){const ye=T[G]=Y?cloneIfMounted(T[G]):normalizeVNode(T[G]);ye.key!=null&&pe.set(ye.key,G)}let fe,ge=0;const be=se-he+1;let xe=!1,_e=0;const Ee=new Array(be);for(G=0;G<be;G++)Ee[G]=0;for(G=ae;G<=ee;G++){const ye=E[G];if(ge>=be){ne(ye,D,W,!0);continue}let we;if(ye.key!=null)we=pe.get(ye.key);else for(fe=he;fe<=se;fe++)if(Ee[fe-he]===0&&isSameVNodeType(ye,T[fe])){we=fe;break}we===void 0?ne(ye,D,W,!0):(Ee[we-he]=G+1,we>=_e?_e=we:xe=!0,y(ye,T[we],P,null,D,W,K,H,Y),ge++)}const ve=xe?getSequence(Ee):EMPTY_ARR;for(fe=ve.length-1,G=be-1;G>=0;G--){const ye=he+G,we=T[ye],Te=ye+1<re?T[ye+1].el:R;Ee[G]===0?y(null,we,P,Te,D,W,K,H,Y):xe&&(fe<0||G!==ve[fe]?Z(we,P,Te,2):fe--)}}},Z=(E,T,P,R,D=null)=>{const{el:W,type:K,transition:H,children:Y,shapeFlag:G}=E;if(G&6){Z(E.component.subTree,T,P,R);return}if(G&128){E.suspense.move(T,P,R);return}if(G&64){K.move(E,T,P,oe);return}if(K===Fragment){s(W,T,P);for(let ee=0;ee<Y.length;ee++)Z(Y[ee],T,P,R);s(E.anchor,T,P);return}if(K===Static){w(E,T,P);return}if(R!==2&&G&1&&H)if(R===0)H.beforeEnter(W),s(W,T,P),queuePostRenderEffect(()=>H.enter(W),D);else{const{leave:ee,delayLeave:se,afterLeave:ae}=H,he=()=>s(W,T,P),pe=()=>{ee(W,()=>{he(),ae&&ae()})};se?se(W,he,pe):pe()}else s(W,T,P)},ne=(E,T,P,R=!1,D=!1)=>{const{type:W,props:K,ref:H,children:Y,dynamicChildren:G,shapeFlag:re,patchFlag:ee,dirs:se}=E;if(H!=null&&setRef(H,null,P,E,!0),re&256){T.ctx.deactivate(E);return}const ae=re&1&&se,he=!isAsyncWrapper(E);let pe;if(he&&(pe=K&&K.onVnodeBeforeUnmount)&&invokeVNodeHook(pe,T,E),re&6)I(E.component,P,R);else{if(re&128){E.suspense.unmount(P,R);return}ae&&invokeDirectiveHook(E,null,T,"beforeUnmount"),re&64?E.type.remove(E,T,P,D,oe,R):G&&(W!==Fragment||ee>0&&ee&64)?z(G,T,P,!1,!0):(W===Fragment&&ee&384||!D&&re&16)&&z(Y,T,P),R&&ue(E)}(he&&(pe=K&&K.onVnodeUnmounted)||ae)&&queuePostRenderEffect(()=>{pe&&invokeVNodeHook(pe,T,E),ae&&invokeDirectiveHook(E,null,T,"unmounted")},P)},ue=E=>{const{type:T,el:P,anchor:R,transition:D}=E;if(T===Fragment){de(P,R);return}if(T===Static){v(E);return}const W=()=>{n(P),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(E.shapeFlag&1&&D&&!D.persisted){const{leave:K,delayLeave:H}=D,Y=()=>K(P,W);H?H(E.el,W,Y):Y()}else W()},de=(E,T)=>{let P;for(;E!==T;)P=f(E),n(E),E=P;n(T)},I=(E,T,P)=>{const{bum:R,scope:D,update:W,subTree:K,um:H}=E;R&&invokeArrayFns(R),D.stop(),W&&(W.active=!1,ne(K,E,T,P)),H&&queuePostRenderEffect(H,T),queuePostRenderEffect(()=>{E.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},z=(E,T,P,R=!1,D=!1,W=0)=>{for(let K=W;K<E.length;K++)ne(E[K],T,P,R,D)},j=E=>E.shapeFlag&6?j(E.component.subTree):E.shapeFlag&128?E.suspense.next():f(E.anchor||E.el),q=(E,T,P)=>{E==null?T._vnode&&ne(T._vnode,null,null,!0):y(T._vnode||null,E,T,null,null,null,P),flushPreFlushCbs(),flushPostFlushCbs(),T._vnode=E},oe={p:y,um:ne,m:Z,r:ue,mt:B,mc:A,pc:Q,pbc:F,n:j,o:t};let le,J;return e&&([le,J]=e(oe)),{render:q,hydrate:le,createApp:createAppAPI(q,le)}}function toggleRecurse({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function traverseStaticChildren(t,e,r=!1){const s=t.children,n=e.children;if(isArray$2(s)&&isArray$2(n))for(let i=0;i<s.length;i++){const o=s[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=cloneIfMounted(n[i]),a.el=o.el),r||traverseStaticChildren(o,a)),a.type===Text$1&&(a.el=o.el)}}function getSequence(t){const e=t.slice(),r=[0];let s,n,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(n=r[r.length-1],t[n]<c){e[s]=n,r.push(s);continue}for(i=0,o=r.length-1;i<o;)a=i+o>>1,t[r[a]]<c?i=a+1:o=a;c<t[r[i]]&&(i>0&&(e[s]=r[i-1]),r[i]=s)}}for(i=r.length,o=r[i-1];i-- >0;)r[i]=o,o=e[o];return r}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,r,s,n,i){return setupBlock(createBaseVNode(t,e,r,s,n,i,!0))}function createBlock$1(t,e,r,s,n){return setupBlock(createVNode(t,e,r,s,n,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t!=null?t:null,normalizeRef=({ref:t,ref_key:e,ref_for:r})=>t!=null?isString$1(t)||isRef(t)||isFunction$2(t)?{i:currentRenderingInstance,r:t,k:e,f:!!r}:t:null;function createBaseVNode(t,e=null,r=null,s=0,n=null,i=t===Fragment?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(l,r),i&128&&t.normalize(l)):r&&(l.shapeFlag|=isString$1(r)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(t,e=null,r=null,s=0,n=null,i=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const a=cloneVNode(t,e,!0);return r&&normalizeChildren(a,r),isBlockTreeEnabled>0&&!i&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=a:currentBlock.push(a)),a.patchFlag|=-2,a}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:l}=e;a&&!isString$1(a)&&(e.class=normalizeClass(a)),isObject$5(l)&&(isProxy(l)&&!isArray$2(l)&&(l=extend$5({},l)),e.style=normalizeStyle(l))}const o=isString$1(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$5(t)?4:isFunction$2(t)?2:0;return createBaseVNode(t,e,r,s,n,o,i,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$5({},t):t:null}function cloneVNode(t,e,r=!1){const{props:s,ref:n,patchFlag:i,children:o}=t,a=e?mergeProps(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&normalizeKey(a),ref:e&&e.ref?r&&n?isArray$2(n)?n.concat(normalizeRef(e)):[n,normalizeRef(e)]:normalizeRef(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",e=0){return createVNode(Text$1,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock$1(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$2(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text$1,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let r=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(isArray$2(e))r=16;else if(typeof e=="object")if(s&65){const n=e.default;n&&(n._c&&(n._d=!1),normalizeChildren(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:n===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$2(e)?(e={default:e,_ctx:currentRenderingInstance},r=32):(e=String(e),s&64?(r=16,e=[createTextVNode(e)]):r=8);t.children=e,t.shapeFlag|=r}function mergeProps(...t){const e={};for(let r=0;r<t.length;r++){const s=t[r];for(const n in s)if(n==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(n==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(n)){const i=e[n],o=s[n];o&&i!==o&&!(isArray$2(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=s[n])}return e}function invokeVNodeHook(t,e,r,s=null){callWithAsyncErrorHandling(t,e,7,[r,s])}const emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(t,e,r){const s=t.type,n=(e?e.appContext:t.appContext)||emptyAppContext,i={uid:uid$1$1++,vnode:t,type:s,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,n),emitsOptions:normalizeEmitsOptions(s,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=emit$1.bind(null,i),t.ce&&t.ce(i),i}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:r,children:s}=t.vnode,n=isStatefulComponent(t);initProps(t,r,n,e),initSlots(t,s);const i=n?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,i}function setupStatefulComponent(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:s}=r;if(s){const n=t.setupContext=s.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const i=callWithErrorHandling(s,t,0,[t.props,n]);if(resetTracking(),unsetCurrentInstance(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),e)return i.then(o=>{handleSetupResult(t,o,e)}).catch(o=>{handleError(o,t,0)});t.asyncDep=i}else handleSetupResult(t,i,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,r){isFunction$2(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject$5(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,r)}let compile;function finishComponentSetup(t,e,r){const s=t.type;if(!t.render){if(!e&&compile&&!s.render){const n=s.template||resolveMergedOptions(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=extend$5(extend$5({isCustomElement:i,delimiters:a},o),l);s.render=compile(n,c)}}t.render=s.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,r){return track(t,"get","$attrs"),e[r]}})}function createSetupContext(t){const e=s=>{t.exposed=s||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](t)},has(e,r){return r in e||r in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction$2(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction$2(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,r){const s=arguments.length;return s===2?isObject$5(e)&&!isArray$2(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(s>3?r=Array.prototype.slice.call(arguments,2):s===3&&isVNode(r)&&(r=[r]),createVNode(t,e,r))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,s)=>{const n=e?doc.createElementNS(svgNS,t):doc.createElement(t,r?{is:r}:void 0);return t==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,s,n,i){const o=r?r.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===i||!(n=n.nextSibling)););else{templateContainer.innerHTML=s?`<svg>${t}</svg>`:t;const a=templateContainer.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function patchClass(t,e,r){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,r){const s=t.style,n=isString$1(r);if(r&&!n){for(const i in r)setStyle(s,i,r[i]);if(e&&!isString$1(e))for(const i in e)r[i]==null&&setStyle(s,i,"")}else{const i=s.display;n?e!==r&&(s.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const importantRE=/\s*!important$/;function setStyle(t,e,r){if(isArray$2(r))r.forEach(s=>setStyle(t,e,s));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const s=autoPrefix(t,e);importantRE.test(r)?t.setProperty(hyphenate(s),r.replace(importantRE,""),"important"):t[s]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const r=prefixCache[e];if(r)return r;let s=camelize$1(e);if(s!=="filter"&&s in t)return prefixCache[e]=s;s=capitalize(s);for(let n=0;n<prefixes.length;n++){const i=prefixes[n]+s;if(i in t)return prefixCache[e]=i}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,r,s,n){if(s&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,r);else{const i=isSpecialBooleanAttr(e);r==null||i&&!includeBooleanAttr(r)?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}function patchDOMProp(t,e,r,s,n,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,n,i),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const l=r==null?"":r;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),r==null&&t.removeAttribute(e);return}let a=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=includeBooleanAttr(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{t[e]=r}catch{}a&&t.removeAttribute(e)}function addEventListener(t,e,r,s){t.addEventListener(e,r,s)}function removeEventListener(t,e,r,s){t.removeEventListener(e,r,s)}function patchEvent(t,e,r,s,n=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=parseName(e);if(s){const c=i[e]=createInvoker(s,n);addEventListener(t,a,c,l)}else o&&(removeEventListener(t,a,o,l),i[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let s;for(;s=t.match(optionsModifierRE);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const r=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,r.value),e,5,[s])};return r.value=t,r.attached=getNow(),r}function patchStopImmediatePropagation(t,e){if(isArray$2(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(s=>n=>!n._stopped&&s&&s(n))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,r,s,n=!1,i,o,a,l)=>{e==="class"?patchClass(t,s,n):e==="style"?patchStyle(t,r,s):isOn(e)?isModelListener(e)||patchEvent(t,e,r,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,s,n))?patchDOMProp(t,e,s,i,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),patchAttr(t,e,s,n))};function shouldSetAsProp(t,e,r,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction$2(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString$1(r)?!1:e in t}const rendererOptions=extend$5({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:r}=e;return e.mount=s=>{const n=normalizeContainer(s);if(!n)return;const i=e._component;!isFunction$2(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function normalizeContainer(t){return isString$1(t)?document.querySelector(t):t}const _export_sfc=(t,e)=>{const r=t.__vccOpts||t;for(const[s,n]of e)r[s]=n;return r},_sfc_main$4={};function _sfc_render(t,e){const r=resolveComponent("router-view");return openBlock(),createBlock$1(r)}const App=_export_sfc(_sfc_main$4,[["render",_sfc_render]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(t,e){const r={};for(const s in e){const n=e[s];r[s]=isArray$1(n)?n.map(t):t(n)}return r}const noop$2=()=>{},isArray$1=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,r="/"){let s,n={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),n=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=resolveRelativePath(s!=null?s:e,r),{fullPath:s+(i&&"?")+i+o,path:s,query:n,hash:o}}function stringifyURL(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,r){const s=e.matched.length-1,n=r.matched.length-1;return s>-1&&s===n&&isSameRouteRecord(e.matched[s],r.matched[n])&&isSameRouteLocationParams(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!isSameRouteLocationParamsValue(t[r],e[r]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray$1(t)?isEquivalentArray(t,e):isArray$1(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray$1(e)?t.length===e.length&&t.every((r,s)=>r===e[s]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),s=t.split("/");let n=r.length-1,i,o;for(i=0;i<s.length;i++)if(o=s[i],o!==".")if(o==="..")n>1&&n--;else break;return r.slice(0,n).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const r=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-r.left-(e.left||0),top:s.top-r.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let e;if("el"in t){const r=t.el,s=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?s?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;e=getElementPosition(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:r,search:s,hash:n}=e,i=t.indexOf("#");if(i>-1){let a=n.includes(t.slice(i))?t.slice(i).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(r,t)+s+n}function useHistoryListeners(t,e,r,s){let n=[],i=[],o=null;const a=({state:f})=>{const m=createCurrentLocation(t,location),g=r.value,y=e.value;let b=0;if(f){if(r.value=m,e.value=f,o&&o===g){o=null;return}b=y?f.position-y.position:0}else s(m);n.forEach(x=>{x(r.value,g,{delta:b,type:NavigationType.pop,direction:b?b>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){o=r.value}function c(f){n.push(f);const m=()=>{const g=n.indexOf(f);g>-1&&n.splice(g,1)};return i.push(m),m}function u(){const{history:f}=window;!f.state||f.replaceState(assign$1({},f.state,{scroll:computeScrollPosition()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:d}}function buildState(t,e,r,s=!1,n=!1){return{back:t,current:e,forward:r,replaced:s,position:window.history.length,scroll:n?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:r}=window,s={value:createCurrentLocation(t,r)},n={value:e.state};n.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:createBaseLocation()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),n.value=c}catch(m){console.error(m),r[u?"replace":"assign"](f)}}function o(l,c){const u=assign$1({},e.state,buildState(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=assign$1({},n.value,e.state,{forward:l,scroll:computeScrollPosition()});i(u.current,u,!0);const d=assign$1({},buildState(s.value,l,null),{position:u.position+1},c);i(l,d,!1),s.value=l}return{location:s,state:n,push:a,replace:o}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),r=useHistoryListeners(t,e.state,e.location,e.replace);function s(i,o=!0){o||r.pauseListeners(),history.go(i)}const n=assign$1({location:"",base:t,go:s,createHref:createHref.bind(null,t)},e,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign$1(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const r=assign$1({},BASE_PATH_PARSER_OPTIONS,e),s=[];let n=r.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const f=c[d];let m=40+(r.sensitive?.25:0);if(f.type===0)d||(n+="/"),n+=f.value.replace(REGEX_CHARS_RE,"\\$&"),m+=40;else if(f.type===1){const{value:g,repeatable:y,optional:b,regexp:x}=f;i.push({name:g,repeatable:y,optional:b});const _=x||BASE_PARAM_PATTERN;if(_!==BASE_PARAM_PATTERN){m+=10;try{new RegExp(`(${_})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+v.message)}}let w=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=b&&c.length<2?`(?:/${w})`:"/"+w),b&&(w+="?"),n+=w,m+=20,b&&(m+=-8),y&&(m+=-20),_===".*"&&(m+=-50)}u.push(m)}s.push(u)}if(r.strict&&r.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}r.strict||(n+="/?"),r.end?n+="$":r.strict&&(n+="(?:/|$)");const o=new RegExp(n,r.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",g=i[f-1];d[g.name]=m&&g.repeatable?m.split("/"):m}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:g,repeatable:y,optional:b}=m,x=g in c?c[g]:"";if(isArray$1(x)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=isArray$1(x)?x.join("/"):x;if(!_)if(b)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=_}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function compareScoreArray(t,e){let r=0;for(;r<t.length&&r<e.length;){const s=e[r]-t[r];if(s)return s;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(t,e){let r=0;const s=t.score,n=e.score;for(;r<s.length&&r<n.length;){const i=compareScoreArray(s[r],n[r]);if(i)return i;r++}if(Math.abs(n.length-s.length)===1){if(isLastScoreNegative(s))return 1;if(isLastScoreNegative(n))return-1}return n.length-s.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${r})/"${c}": ${m}`)}let r=0,s=r;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,c="",u="";function d(){!c||(r===0?i.push({type:0,value:c}):r===1||r===2||r===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&r!==2){s=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),r=1):f();break;case 4:f(),r=s;break;case 1:l==="("?r=2:VALID_PARAM_RE.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}function createRouteRecordMatcher(t,e,r){const s=tokensToParser(tokenizePath(t.path),r),n=assign$1(s,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function createRouterMatcher(t,e){const r=[],s=new Map;e=mergeOptions$1({strict:!1,end:!0,sensitive:!1},e);function n(u){return s.get(u)}function i(u,d,f){const m=!f,g=normalizeRouteRecord(u);g.aliasOf=f&&f.record;const y=mergeOptions$1(e,u),b=[g];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const v of w)b.push(assign$1({},g,{components:f?f.record.components:g.components,path:v,aliasOf:f?f.record:g}))}let x,_;for(const w of b){const{path:v}=w;if(d&&v[0]!=="/"){const S=d.record.path,M=S[S.length-1]==="/"?"":"/";w.path=d.record.path+(v&&M+v)}if(x=createRouteRecordMatcher(w,d,y),f?f.alias.push(x):(_=_||x,_!==x&&_.alias.push(x),m&&u.name&&!isAliasRecord(x)&&o(u.name)),g.children){const S=g.children;for(let M=0;M<S.length;M++)i(S[M],x,f&&f.children[M])}f=f||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&l(x)}return _?()=>{o(_)}:noop$2}function o(u){if(isRouteName(u)){const d=s.get(u);d&&(s.delete(u),r.splice(r.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=r.indexOf(u);d>-1&&(r.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return r}function l(u){let d=0;for(;d<r.length&&comparePathParserScore(u,r[d])>=0&&(u.record.path!==r[d].record.path||!isRecordChildOf(u,r[d]));)d++;r.splice(d,0,u),u.record.name&&!isAliasRecord(u)&&s.set(u.record.name,u)}function c(u,d){let f,m={},g,y;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw createRouterError(1,{location:u});y=f.record.name,m=assign$1(paramsFromLocation(d.params,f.keys.filter(_=>!_.optional).map(_=>_.name)),u.params&&paramsFromLocation(u.params,f.keys.map(_=>_.name))),g=f.stringify(m)}else if("path"in u)g=u.path,f=r.find(_=>_.re.test(g)),f&&(m=f.parse(g),y=f.record.name);else{if(f=d.name?s.get(d.name):r.find(_=>_.re.test(d.path)),!f)throw createRouterError(1,{location:u,currentLocation:d});y=f.record.name,m=assign$1({},d.params,u.params),g=f.stringify(m)}const b=[];let x=f;for(;x;)b.unshift(x.record),x=x.parent;return{name:y,path:g,params:m,matched:b,meta:mergeMetaFields(b)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:n}}function paramsFromLocation(t,e){const r={};for(const s of e)s in t&&(r[s]=t[s]);return r}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const s in t.components)e[s]=typeof r=="boolean"?r:r[s];return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,r)=>assign$1(e,r.meta),{})}function mergeOptions$1(t,e){const r={};for(const s in t)r[s]=s in e?e[s]:t[s];return r}function isRecordChildOf(t,e){return e.children.some(r=>r===t||isRecordChildOf(t,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam$1(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode$h(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const i=s[n].replace(PLUS_RE," "),o=i.indexOf("="),a=decode$h(o<0?i:i.slice(0,o)),l=o<0?null:decode$h(i.slice(o+1));if(a in e){let c=e[a];isArray$1(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function stringifyQuery(t){let e="";for(let r in t){const s=t[r];if(r=encodeQueryKey(r),s==null){s!==void 0&&(e+=(e.length?"&":"")+r);continue}(isArray$1(s)?s.map(i=>i&&encodeQueryValue(i)):[s&&encodeQueryValue(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+r,i!=null&&(e+="="+i))})}return e}function normalizeQuery(t){const e={};for(const r in t){const s=t[r];s!==void 0&&(e[r]=isArray$1(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(s){return t.push(s),()=>{const n=t.indexOf(s);n>-1&&t.splice(n,1)}}function r(){t=[]}return{add:e,list:()=>t,reset:r}}function guardToPromiseFn(t,e,r,s,n){const i=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(createRouterError(4,{from:r,to:e})):d instanceof Error?a(d):isRouteLocation(d)?a(createRouterError(2,{from:e,to:d})):(i&&s.enterCallbacks[n]===i&&typeof d=="function"&&i.push(d),o())},c=t.call(s&&s.instances[n],e,r,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function extractComponentsGuards(t,e,r,s){const n=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(isRouteComponent(a)){const c=(a.__vccOpts||a)[e];c&&n.push(guardToPromiseFn(c,r,s,i,o))}else{let l=a();n.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=isESModule(c)?c.default:c;i.components[o]=u;const f=(u.__vccOpts||u)[e];return f&&guardToPromiseFn(f,r,s,i,o)()}))}}return n}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject(routerKey),r=inject(routeLocationKey),s=computed(()=>e.resolve(unref(t.to))),n=computed(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(isSameRouteRecord.bind(null,u));if(f>-1)return f;const m=getOriginalPath(l[c-2]);return c>1&&getOriginalPath(u)===m&&d[d.length-1].path!==m?d.findIndex(isSameRouteRecord.bind(null,l[c-2])):f}),i=computed(()=>n.value>-1&&includesParams(r.params,s.value.params)),o=computed(()=>n.value>-1&&n.value===r.matched.length-1&&isSameRouteLocationParams(r.params,s.value.params));function a(l={}){return guardEvent(l)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop$2):Promise.resolve()}return{route:s,href:computed(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const r=reactive(useLink(t)),{options:s}=inject(routerKey),n=computed(()=>({[getLinkClass(t.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&e.default(r);return t.custom?i:h("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},i)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const r in e){const s=e[r],n=t[r];if(typeof s=="string"){if(s!==n)return!1}else if(!isArray$1(n)||n.length!==s.length||s.some((i,o)=>i!==n[o]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,r)=>t!=null?t:e!=null?e:r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const s=inject(routerViewLocationKey),n=computed(()=>t.route||s.value),i=inject(viewDepthKey,0),o=computed(()=>{let c=unref(i);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=computed(()=>n.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,a),provide(routerViewLocationKey,n);const l=ref();return watch(()=>[l.value,a.value,t.name],([c,u,d],[f,m,g])=>{u&&(u.instances[d]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!isSameRouteRecord(u,m)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=n.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return normalizeSlot(r.default,{Component:f,route:c});const m=d.props[u],g=m?m===!0?c.params:typeof m=="function"?m(c):m:null,b=h(f,assign$1({},g,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return normalizeSlot(r.default,{Component:b,route:c})||b}}});function normalizeSlot(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),r=t.parseQuery||parseQuery,s=t.stringifyQuery||stringifyQuery,n=t.history,i=useCallbacks(),o=useCallbacks(),a=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=applyToParams.bind(null,I=>""+I),d=applyToParams.bind(null,encodeParam$1),f=applyToParams.bind(null,decode$h);function m(I,z){let j,q;return isRouteName(I)?(j=e.getRecordMatcher(I),q=z):q=I,e.addRoute(q,j)}function g(I){const z=e.getRecordMatcher(I);z&&e.removeRoute(z)}function y(){return e.getRoutes().map(I=>I.record)}function b(I){return!!e.getRecordMatcher(I)}function x(I,z){if(z=assign$1({},z||l.value),typeof I=="string"){const E=parseURL(r,I,z.path),T=e.resolve({path:E.path},z),P=n.createHref(E.fullPath);return assign$1(E,T,{params:f(T.params),hash:decode$h(E.hash),redirectedFrom:void 0,href:P})}let j;if("path"in I)j=assign$1({},I,{path:parseURL(r,I.path,z.path).path});else{const E=assign$1({},I.params);for(const T in E)E[T]==null&&delete E[T];j=assign$1({},I,{params:d(I.params)}),z.params=d(z.params)}const q=e.resolve(j,z),oe=I.hash||"";q.params=u(f(q.params));const le=stringifyURL(s,assign$1({},I,{hash:encodeHash(oe),path:q.path})),J=n.createHref(le);return assign$1({fullPath:le,hash:oe,query:s===stringifyQuery?normalizeQuery(I.query):I.query||{}},q,{redirectedFrom:void 0,href:J})}function _(I){return typeof I=="string"?parseURL(r,I,l.value.path):assign$1({},I)}function w(I,z){if(c!==I)return createRouterError(8,{from:z,to:I})}function v(I){return C(I)}function S(I){return v(assign$1(_(I),{replace:!0}))}function M(I){const z=I.matched[I.matched.length-1];if(z&&z.redirect){const{redirect:j}=z;let q=typeof j=="function"?j(I):j;return typeof q=="string"&&(q=q.includes("?")||q.includes("#")?q=_(q):{path:q},q.params={}),assign$1({query:I.query,hash:I.hash,params:"path"in q?{}:I.params},q)}}function C(I,z){const j=c=x(I),q=l.value,oe=I.state,le=I.force,J=I.replace===!0,E=M(j);if(E)return C(assign$1(_(E),{state:typeof E=="object"?assign$1({},oe,E.state):oe,force:le,replace:J}),z||j);const T=j;T.redirectedFrom=z;let P;return!le&&isSameRouteLocation(s,q,j)&&(P=createRouterError(16,{to:T,from:q}),L(q,q,!0,!1)),(P?Promise.resolve(P):X(T,q)).catch(R=>isNavigationFailure(R)?isNavigationFailure(R,2)?R:ce(R):N(R,T,q)).then(R=>{if(R){if(isNavigationFailure(R,2))return C(assign$1({replace:J},_(R.to),{state:typeof R.to=="object"?assign$1({},oe,R.to.state):oe,force:le}),z||T)}else R=O(T,q,!0,J,oe);return F(T,q,R),R})}function A(I,z){const j=w(I,z);return j?Promise.reject(j):Promise.resolve()}function X(I,z){let j;const[q,oe,le]=extractChangingRecords(I,z);j=extractComponentsGuards(q.reverse(),"beforeRouteLeave",I,z);for(const E of q)E.leaveGuards.forEach(T=>{j.push(guardToPromiseFn(T,I,z))});const J=A.bind(null,I,z);return j.push(J),runGuardQueue(j).then(()=>{j=[];for(const E of i.list())j.push(guardToPromiseFn(E,I,z));return j.push(J),runGuardQueue(j)}).then(()=>{j=extractComponentsGuards(oe,"beforeRouteUpdate",I,z);for(const E of oe)E.updateGuards.forEach(T=>{j.push(guardToPromiseFn(T,I,z))});return j.push(J),runGuardQueue(j)}).then(()=>{j=[];for(const E of I.matched)if(E.beforeEnter&&!z.matched.includes(E))if(isArray$1(E.beforeEnter))for(const T of E.beforeEnter)j.push(guardToPromiseFn(T,I,z));else j.push(guardToPromiseFn(E.beforeEnter,I,z));return j.push(J),runGuardQueue(j)}).then(()=>(I.matched.forEach(E=>E.enterCallbacks={}),j=extractComponentsGuards(le,"beforeRouteEnter",I,z),j.push(J),runGuardQueue(j))).then(()=>{j=[];for(const E of o.list())j.push(guardToPromiseFn(E,I,z));return j.push(J),runGuardQueue(j)}).catch(E=>isNavigationFailure(E,8)?E:Promise.reject(E))}function F(I,z,j){for(const q of a.list())q(I,z,j)}function O(I,z,j,q,oe){const le=w(I,z);if(le)return le;const J=z===START_LOCATION_NORMALIZED,E=isBrowser?history.state:{};j&&(q||J?n.replace(I.fullPath,assign$1({scroll:J&&E&&E.scroll},oe)):n.push(I.fullPath,oe)),l.value=I,L(I,z,j,J),ce()}let U;function k(){U||(U=n.listen((I,z,j)=>{if(!de.listening)return;const q=x(I),oe=M(q);if(oe){C(assign$1(oe,{replace:!0}),q).catch(noop$2);return}c=q;const le=l.value;isBrowser&&saveScrollPosition(getScrollKey(le.fullPath,j.delta),computeScrollPosition()),X(q,le).catch(J=>isNavigationFailure(J,12)?J:isNavigationFailure(J,2)?(C(J.to,q).then(E=>{isNavigationFailure(E,20)&&!j.delta&&j.type===NavigationType.pop&&n.go(-1,!1)}).catch(noop$2),Promise.reject()):(j.delta&&n.go(-j.delta,!1),N(J,q,le))).then(J=>{J=J||O(q,le,!1),J&&(j.delta&&!isNavigationFailure(J,8)?n.go(-j.delta,!1):j.type===NavigationType.pop&&isNavigationFailure(J,20)&&n.go(-1,!1)),F(q,le,J)}).catch(noop$2)}))}let B=useCallbacks(),ie=useCallbacks(),te;function N(I,z,j){ce(I);const q=ie.list();return q.length?q.forEach(oe=>oe(I,z,j)):console.error(I),Promise.reject(I)}function Q(){return te&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((I,z)=>{B.add([I,z])})}function ce(I){return te||(te=!I,k(),B.list().forEach(([z,j])=>I?j(I):z()),B.reset()),I}function L(I,z,j,q){const{scrollBehavior:oe}=t;if(!isBrowser||!oe)return Promise.resolve();const le=!j&&getSavedScrollPosition(getScrollKey(I.fullPath,0))||(q||!j)&&history.state&&history.state.scroll||null;return nextTick$1().then(()=>oe(I,z,le)).then(J=>J&&scrollToPosition(J)).catch(J=>N(J,I,z))}const Z=I=>n.go(I);let ne;const ue=new Set,de={currentRoute:l,listening:!0,addRoute:m,removeRoute:g,hasRoute:b,getRoutes:y,resolve:x,options:t,push:v,replace:S,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Q,install(I){const z=this;I.component("RouterLink",RouterLink),I.component("RouterView",RouterView),I.config.globalProperties.$router=z,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!ne&&l.value===START_LOCATION_NORMALIZED&&(ne=!0,v(n.location).catch(oe=>{}));const j={};for(const oe in START_LOCATION_NORMALIZED)j[oe]=computed(()=>l.value[oe]);I.provide(routerKey,z),I.provide(routeLocationKey,reactive(j)),I.provide(routerViewLocationKey,l);const q=I.unmount;ue.add(I),I.unmount=function(){ue.delete(I),ue.size<1&&(c=START_LOCATION_NORMALIZED,U&&U(),U=null,l.value=START_LOCATION_NORMALIZED,ne=!1,te=!1),q()}}};return de}function runGuardQueue(t){return t.reduce((e,r)=>e.then(()=>r()),Promise.resolve())}function extractChangingRecords(t,e){const r=[],s=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>isSameRouteRecord(c,a))?s.push(a):r.push(a));const l=t.matched[o];l&&(e.matched.find(c=>isSameRouteRecord(c,l))||n.push(l))}return[r,s,n]}var ENV=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(ENV||{}),BUFFER_BITS=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(BUFFER_BITS||{}),BLEND_MODES=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(BLEND_MODES||{}),DRAW_MODES=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(DRAW_MODES||{}),FORMATS=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(FORMATS||{}),TARGETS=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(TARGETS||{}),TYPES=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(TYPES||{}),SAMPLER_TYPES=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(SAMPLER_TYPES||{}),SCALE_MODES=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(SCALE_MODES||{}),WRAP_MODES=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(WRAP_MODES||{}),MIPMAP_MODES=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(MIPMAP_MODES||{}),ALPHA_MODES=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(ALPHA_MODES||{}),CLEAR_MODES=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(CLEAR_MODES||{}),GC_MODES=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(GC_MODES||{}),PRECISION=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(PRECISION||{}),MASK_TYPES=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(MASK_TYPES||{}),MSAA_QUALITY=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(MSAA_QUALITY||{}),BUFFER_TYPE=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var t;return(t=document.baseURI)!=null?t:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e)};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(t){return function(e){return e.test(t)}}function isMobile$1(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,s=r.split("[FBAN");typeof s[1]<"u"&&(r=s[0]),s=r.split("Twitter"),typeof s[1]<"u"&&(r=s[0]);var n=createMatch(r),i={apple:{phone:n(appleIphone)&&!n(windowsPhone),ipod:n(appleIpod),tablet:!n(appleIphone)&&(n(appleTablet)||isAppleTabletOnIos13(e))&&!n(windowsPhone),universal:n(appleUniversal),device:(n(appleIphone)||n(appleIpod)||n(appleTablet)||n(appleUniversal)||isAppleTabletOnIos13(e))&&!n(windowsPhone)},amazon:{phone:n(amazonPhone),tablet:!n(amazonPhone)&&n(amazonTablet),device:n(amazonPhone)||n(amazonTablet)},android:{phone:!n(windowsPhone)&&n(amazonPhone)||!n(windowsPhone)&&n(androidPhone),tablet:!n(windowsPhone)&&!n(amazonPhone)&&!n(androidPhone)&&(n(amazonTablet)||n(androidTablet)),device:!n(windowsPhone)&&(n(amazonPhone)||n(amazonTablet)||n(androidPhone)||n(androidTablet))||n(/\bokhttp\b/i)},windows:{phone:n(windowsPhone),tablet:n(windowsTablet),device:n(windowsPhone)||n(windowsTablet)},other:{blackberry:n(otherBlackBerry),blackberry10:n(otherBlackBerry10),opera:n(otherOpera),firefox:n(otherFirefox),chrome:n(otherChrome),device:n(otherBlackBerry)||n(otherBlackBerry10)||n(otherOpera)||n(otherFirefox)||n(otherChrome)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}const isMobile=isMobile$1(globalThis.navigator);function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(t){let e=!0;if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(isMobile.android.device){const r=navigator.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}const settings={ADAPTER:BrowserAdapter,MIPMAP_TEXTURES:MIPMAP_MODES.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:GC_MODES.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES.CLAMP,SCALE_MODE:SCALE_MODES.LINEAR,PRECISION_VERTEX:PRECISION.HIGH,PRECISION_FRAGMENT:isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;var ExtensionType=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(ExtensionType||{});const normalizeExtension=t=>{if((typeof t=="function"||typeof t=="object"&&t.extension)&&(t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}),typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(normalizeExtension).forEach(e=>{e.type.forEach(r=>{var s,n;return(n=(s=this._removeHandlers)[r])==null?void 0:n.call(s,e)})}),this},add(...t){return t.map(normalizeExtension).forEach(e=>{e.type.forEach(r=>{const s=this._addHandlers,n=this._queue;s[r]?s[r](e):(n[r]=n[r]||[],n[r].push(e))})}),this},handle(t,e,r){const s=this._addHandlers,n=this._removeHandlers;s[t]=e,n[t]=r;const i=this._queue;return i[t]&&(i[t].forEach(o=>e(o)),delete i[t]),this},handleByMap(t,e){return this.handle(t,r=>{e[r.name]=r.ref},r=>{delete e[r.name]})},handleByList(t,e){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((s,n)=>{var i,o;return((i=n.priority)!=null?i:-1)-((o=s.priority)!=null?o:-1)}))},r=>{const s=e.indexOf(r.ref);s!==-1&&e.splice(s,1)})}},PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(SHAPES||{});class Point{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Point(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(e=0,r=0,s=0,n=0){this.x=Number(e),this.y=Number(r),this.width=Number(s),this.height=Number(n),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const A=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=A)return!1;const F=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>F}const s=this.left,n=this.right,i=this.top,o=this.bottom;if(n<=s||o<=i)return!1;const a=tempPoints$1[0].set(e.left,e.top),l=tempPoints$1[1].set(e.left,e.bottom),c=tempPoints$1[2].set(e.right,e.top),u=tempPoints$1[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(r.a*r.d-r.b*r.c);if(d===0||(r.apply(a,a),r.apply(l,l),r.apply(c,c),r.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=s||Math.min(a.x,l.x,c.x,u.x)>=n||Math.max(a.y,l.y,c.y,u.y)<=i||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const f=d*(l.y-a.y),m=d*(a.x-l.x),g=f*s+m*i,y=f*n+m*i,b=f*s+m*o,x=f*n+m*o;if(Math.max(g,y,b,x)<=f*a.x+m*a.y||Math.min(g,y,b,x)>=f*u.x+m*u.y)return!1;const _=d*(a.y-c.y),w=d*(c.x-a.x),v=_*s+w*i,S=_*n+w*i,M=_*s+w*o,C=_*n+w*o;return!(Math.max(v,S,M,C)<=_*a.x+w*a.y||Math.min(v,S,M,C)>=_*u.x+w*u.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(s-r,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,r=.001){const s=Math.ceil((this.x+this.width-r)*e)/e,n=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=s-this.x,this.height=n-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),s=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=s-r,this.y=n,this.height=i-n,this}}class Circle{constructor(e=0,r=0,s=0){this.x=e,this.y=r,this.radius=s,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const s=this.radius*this.radius;let n=this.x-e,i=this.y-r;return n*=n,i*=i,n+i<=s}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}class Ellipse{constructor(e=0,r=0,s=0,n=0){this.x=e,this.y=r,this.width=s,this.height=n,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let s=(e-this.x)/this.width,n=(r-this.y)/this.height;return s*=s,n*=n,s+n<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}class Polygon{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const s=[];for(let n=0,i=r.length;n<i;n++)s.push(r[n].x,r[n].y);r=s}this.points=r,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new Polygon(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let s=!1;const n=this.points.length/2;for(let i=0,o=n-1;i<n;o=i++){const a=this.points[i*2],l=this.points[i*2+1],c=this.points[o*2],u=this.points[o*2+1];l>r!=u>r&&e<(c-a)*((r-l)/(u-l))+a&&(s=!s)}return s}}class RoundedRectangle{constructor(e=0,r=0,s=0,n=0,i=20){this.x=e,this.y=r,this.width=s,this.height=n,this.radius=i,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+s&&r<=this.y+this.height-s||e>=this.x+s&&e<=this.x+this.width-s)return!0;let n=e-(this.x+s),i=r-(this.y+s);const o=s*s;if(n*n+i*i<=o||(n=e-(this.x+this.width-s),n*n+i*i<=o)||(i=r-(this.y+this.height-s),n*n+i*i<=o)||(n=e-(this.x+s),n*n+i*i<=o))return!0}return!1}}class ObservablePoint{constructor(e,r,s=0,n=0){this._x=s,this._y=n,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new ObservablePoint(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class Matrix{constructor(e=1,r=0,s=0,n=1,i=0,o=0){this.array=null,this.a=e,this.b=r,this.c=s,this.d=n,this.tx=i,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,s,n,i,o){return this.a=e,this.b=r,this.c=s,this.d=n,this.tx=i,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const s=r||this.array;return e?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(e,r){r=r||new Point;const s=e.x,n=e.y;return r.x=this.a*s+this.c*n+this.tx,r.y=this.b*s+this.d*n+this.ty,r}applyInverse(e,r){r=r||new Point;const s=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return r.x=this.d*s*n+-this.c*s*i+(this.ty*this.c-this.tx*this.d)*s,r.y=this.a*s*i+-this.b*s*n+(-this.ty*this.a+this.tx*this.b)*s,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),s=Math.sin(e),n=this.a,i=this.c,o=this.tx;return this.a=n*r-this.b*s,this.b=n*s+this.b*r,this.c=i*r-this.d*s,this.d=i*s+this.d*r,this.tx=o*r-this.ty*s,this.ty=o*s+this.ty*r,this}append(e){const r=this.a,s=this.b,n=this.c,i=this.d;return this.a=e.a*r+e.b*n,this.b=e.a*s+e.b*i,this.c=e.c*r+e.d*n,this.d=e.c*s+e.d*i,this.tx=e.tx*r+e.ty*n+this.tx,this.ty=e.tx*s+e.ty*i+this.ty,this}setTransform(e,r,s,n,i,o,a,l,c){return this.a=Math.cos(a+c)*i,this.b=Math.sin(a+c)*i,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(s*this.a+n*this.c),this.ty=r-(s*this.b+n*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const s=this.a,n=this.c;this.a=s*e.a+this.b*e.c,this.b=s*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,s=this.b,n=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-n,i),l=Math.atan2(s,r),c=Math.abs(a+l);return c<1e-5||Math.abs(PI_2-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+s*s),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(o.x*r+o.y*n),e.position.y=this.ty+(o.x*s+o.y*i),e}invert(){const e=this.a,r=this.b,s=this.c,n=this.d,i=this.tx,o=e*n-r*s;return this.a=n/o,this.b=-r/o,this.c=-s/o,this.d=e/o,this.tx=(s*this.ty-n*i)/o,this.ty=-(e*this.ty-r*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Matrix;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let t=0;t<16;t++){const e=[];rotationCayley.push(e);for(let r=0;r<16;r++){const s=signum(ux[t]*ux[r]+vx[t]*uy[r]),n=signum(uy[t]*ux[r]+vy[t]*uy[r]),i=signum(ux[t]*vx[r]+vx[t]*vy[r]),o=signum(uy[t]*vx[r]+vy[t]*vy[r]);for(let a=0;a<16;a++)if(ux[a]===s&&uy[a]===n&&vx[a]===i&&vy[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Matrix;e.set(ux[t],uy[t],vx[t],vy[t],0,0),rotationMatrices.push(e)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ux[t],uY:t=>uy[t],vX:t=>vx[t],vY:t=>vy[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>rotationCayley[t][e],sub:(t,e)=>rotationCayley[t][groupD8.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?groupD8.S:groupD8.N:Math.abs(e)*2<=Math.abs(t)?t>0?groupD8.E:groupD8.W:e>0?t>0?groupD8.SE:groupD8.SW:t>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(t,e,r=0,s=0)=>{const n=rotationMatrices[groupD8.inv(e)];n.tx=r,n.ty=s,t.append(n)}},_Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,s=this.worldTransform;s.a=e.a*r.a+e.b*r.c,s.b=e.a*r.b+e.b*r.d,s.c=e.c*r.a+e.d*r.c,s.d=e.c*r.b+e.d*r.d,s.tx=e.tx*r.a+e.ty*r.c+r.tx,s.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Transform=_Transform;Transform.IDENTITY=new _Transform;class Runner{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,s,n,i,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let d=0,f=u.length;d<f;d++)u[d][c](e,r,s,n,i,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});settings.TARGET_FPMS=.06;var UPDATE_PRIORITY=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(UPDATE_PRIORITY||{});class TickerListener{constructor(e,r=null,s=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=s,this.once=n}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}class Ticker{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings.TARGET_FPMS,this.elapsedMS=1/settings.TARGET_FPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,s=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(e,r,s))}addOnce(e,r,s=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(e,r,s,!0))}_addListener(e){let r=this._head.next,s=this._head;if(!r)e.connect(s);else{for(;r;){if(e.priority>r.priority){e.connect(s);break}s=r,r=r.next}e.previous||e.connect(s)}return this._startIfPossible(),this}remove(e,r){let s=this._head.next;for(;s;)s.match(e,r)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*settings.TARGET_FPMS;const s=this._head;let n=s.next;for(;n;)n=n.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),s=Math.min(Math.max(0,r)/1e3,settings.TARGET_FPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!Ticker._shared){const e=Ticker._shared=new Ticker;e.autoStart=!0,e._protected=!0}return Ticker._shared}static get system(){if(!Ticker._system){const e=Ticker._system=new Ticker;e.autoStart=!0,e._protected=!0}return Ticker._system}}class TickerPlugin{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ticker.shared:new Ticker,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eventemitter3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function n(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new n(u,d||l,f),g=r?r+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=r?r+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,g=new Array(m);f<m;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(c){var u=r?r+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,m,g){var y=r?r+c:c;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,_,w;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,d),!0;case 4:return b.fn.call(b.context,u,d,f),!0;case 5:return b.fn.call(b.context,u,d,f,m),!0;case 6:return b.fn.call(b.context,u,d,f,m,g),!0}for(w=1,_=new Array(x-1);w<x;w++)_[w-1]=arguments[w];b.fn.apply(b.context,_)}else{var v=b.length,S;for(w=0;w<v;w++)switch(b[w].once&&this.removeListener(c,b[w].fn,void 0,!0),x){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,d);break;case 4:b[w].fn.call(b[w].context,u,d,f);break;default:if(!_)for(S=1,_=new Array(x-1);S<x;S++)_[S-1]=arguments[S];b[w].fn.apply(b[w].context,_)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var m=r?r+c:c;if(!this._events[m])return this;if(!u)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var y=0,b=[],x=g.length;y<x;y++)(g[y].fn!==u||f&&!g[y].once||d&&g[y].context!==d)&&b.push(g[y]);b.length?this._events[m]=b.length===1?b[0]:b:o(this,m)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(eventemitter3);const EventEmitter$1=eventemitter3.exports;var earcut$1={exports:{}};earcut$1.exports=earcut;earcut$1.exports.default=earcut;function earcut(t,e,r){r=r||2;var s=e&&e.length,n=s?e[0]*r:t.length,i=linkedList(t,0,n,r,!0),o=[];if(!i||i.next===i.prev)return o;var a,l,c,u,d,f,m;if(s&&(i=eliminateHoles(t,e,i,r)),t.length>80*r){a=c=t[0],l=u=t[1];for(var g=r;g<n;g+=r)d=t[g],f=t[g+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return earcutLinked(i,o,r,a,l,m,0),o}function linkedList(t,e,r,s,n){var i,o;if(n===signedArea(t,e,r,s)>0)for(i=e;i<r;i+=s)o=insertNode(i,t[i],t[i+1],o);else for(i=r-s;i>=e;i-=s)o=insertNode(i,t[i],t[i+1],o);return o&&equals$3(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(t,e){if(!t)return t;e||(e=t);var r=t,s;do if(s=!1,!r.steiner&&(equals$3(r,r.next)||area(r.prev,r,r.next)===0)){if(removeNode(r),r=e=r.prev,r===r.next)break;s=!0}else r=r.next;while(s||r!==e);return e}function earcutLinked(t,e,r,s,n,i,o){if(!!t){!o&&i&&indexCurve(t,s,n,i);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,i?isEarHashed(t,s,n,i):isEar(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(c.i/r|0),removeNode(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=cureLocalIntersections(filterPoints(t),e,r),earcutLinked(t,e,r,s,n,i,2)):o===2&&splitEarcut(t,e,r,s,n,i):earcutLinked(filterPoints(t),e,r,s,n,i,1);break}}}}function isEar(t){var e=t.prev,r=t,s=t.next;if(area(e,r,s)>=0)return!1;for(var n=e.x,i=r.x,o=s.x,a=e.y,l=r.y,c=s.y,u=n<i?n<o?n:o:i<o?i:o,d=a<l?a<c?a:c:l<c?l:c,f=n>i?n>o?n:o:i>o?i:o,m=a>l?a>c?a:c:l>c?l:c,g=s.next;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=d&&g.y<=m&&pointInTriangle(n,a,i,l,o,c,g.x,g.y)&&area(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function isEarHashed(t,e,r,s){var n=t.prev,i=t,o=t.next;if(area(n,i,o)>=0)return!1;for(var a=n.x,l=i.x,c=o.x,u=n.y,d=i.y,f=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<f?u:f:d<f?d:f,y=a>l?a>c?a:c:l>c?l:c,b=u>d?u>f?u:f:d>f?d:f,x=zOrder(m,g,e,r,s),_=zOrder(y,b,e,r,s),w=t.prevZ,v=t.nextZ;w&&w.z>=x&&v&&v.z<=_;){if(w.x>=m&&w.x<=y&&w.y>=g&&w.y<=b&&w!==n&&w!==o&&pointInTriangle(a,u,l,d,c,f,w.x,w.y)&&area(w.prev,w,w.next)>=0||(w=w.prevZ,v.x>=m&&v.x<=y&&v.y>=g&&v.y<=b&&v!==n&&v!==o&&pointInTriangle(a,u,l,d,c,f,v.x,v.y)&&area(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=y&&w.y>=g&&w.y<=b&&w!==n&&w!==o&&pointInTriangle(a,u,l,d,c,f,w.x,w.y)&&area(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;v&&v.z<=_;){if(v.x>=m&&v.x<=y&&v.y>=g&&v.y<=b&&v!==n&&v!==o&&pointInTriangle(a,u,l,d,c,f,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function cureLocalIntersections(t,e,r){var s=t;do{var n=s.prev,i=s.next.next;!equals$3(n,i)&&intersects(n,s,s.next,i)&&locallyInside(n,i)&&locallyInside(i,n)&&(e.push(n.i/r|0),e.push(s.i/r|0),e.push(i.i/r|0),removeNode(s),removeNode(s.next),s=t=i),s=s.next}while(s!==t);return filterPoints(s)}function splitEarcut(t,e,r,s,n,i){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&isValidDiagonal(o,a)){var l=splitPolygon(o,a);o=filterPoints(o,o.next),l=filterPoints(l,l.next),earcutLinked(o,e,r,s,n,i,0),earcutLinked(l,e,r,s,n,i,0);return}a=a.next}o=o.next}while(o!==t)}function eliminateHoles(t,e,r,s){var n=[],i,o,a,l,c;for(i=0,o=e.length;i<o;i++)a=e[i]*s,l=i<o-1?e[i+1]*s:t.length,c=linkedList(t,a,l,s,!1),c===c.next&&(c.steiner=!0),n.push(getLeftmost(c));for(n.sort(compareX),i=0;i<n.length;i++)r=eliminateHole(n[i],r);return r}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){var r=findHoleBridge(t,e);if(!r)return e;var s=splitPolygon(r,t);return filterPoints(s,s.next),filterPoints(r,r.next)}function findHoleBridge(t,e){var r=e,s=t.x,n=t.y,i=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var a=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=s&&a>i&&(i=a,o=r.x<r.next.x?r:r.next,a===s))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,c=o.x,u=o.y,d=1/0,f;r=o;do s>=r.x&&r.x>=c&&s!==r.x&&pointInTriangle(n<u?s:i,n,c,u,n<u?i:s,n,r.x,r.y)&&(f=Math.abs(n-r.y)/(s-r.x),locallyInside(r,t)&&(f<d||f===d&&(r.x>o.x||r.x===o.x&&sectorContainsSector(o,r)))&&(o=r,d=f)),r=r.next;while(r!==l);return o}function sectorContainsSector(t,e){return area(t.prev,t,e.prev)<0&&area(e.next,t,t.next)<0}function indexCurve(t,e,r,s){var n=t;do n.z===0&&(n.z=zOrder(n.x,n.y,e,r,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,sortLinked(n)}function sortLinked(t){var e,r,s,n,i,o,a,l,c=1;do{for(r=t,t=null,i=null,o=0;r;){for(o++,s=r,a=0,e=0;e<c&&(a++,s=s.nextZ,!!s);e++);for(l=c;a>0||l>0&&s;)a!==0&&(l===0||!s||r.z<=s.z)?(n=r,r=r.nextZ,a--):(n=s,s=s.nextZ,l--),i?i.nextZ=n:t=n,n.prevZ=i,i=n;r=s}i.nextZ=null,c*=2}while(o>1);return t}function zOrder(t,e,r,s,n){return t=(t-r)*n|0,e=(e-s)*n|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function getLeftmost(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function pointInTriangle(t,e,r,s,n,i,o,a){return(n-o)*(e-a)>=(t-o)*(i-a)&&(t-o)*(s-a)>=(r-o)*(e-a)&&(r-o)*(i-a)>=(n-o)*(s-a)}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!intersectsPolygon(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)&&(area(t.prev,t,e.prev)||area(t,e.prev,e))||equals$3(t,e)&&area(t.prev,t,t.next)>0&&area(e.prev,e,e.next)>0)}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals$3(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,r,s){var n=sign$1(area(t,e,r)),i=sign$1(area(t,e,s)),o=sign$1(area(r,s,t)),a=sign$1(area(r,s,e));return!!(n!==i&&o!==a||n===0&&onSegment(t,r,e)||i===0&&onSegment(t,s,e)||o===0&&onSegment(r,t,s)||a===0&&onSegment(r,e,s))}function onSegment(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function sign$1(t){return t>0?1:t<0?-1:0}function intersectsPolygon(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function locallyInside(t,e){return area(t.prev,t,t.next)<0?area(t,e,t.next)>=0&&area(t,t.prev,e)>=0:area(t,e,t.prev)<0||area(t,t.next,e)<0}function middleInside(t,e){var r=t,s=!1,n=(t.x+e.x)/2,i=(t.y+e.y)/2;do r.y>i!=r.next.y>i&&r.next.y!==r.y&&n<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(s=!s),r=r.next;while(r!==t);return s}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),s=new Node(e.i,e.x,e.y),n=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,s.next=r,r.prev=s,i.next=s,s.prev=i,s}function insertNode(t,e,r,s){var n=new Node(t,e,r);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(t,e,r,s){var n=e&&e.length,i=n?e[0]*r:t.length,o=Math.abs(signedArea(t,0,i,r));if(n)for(var a=0,l=e.length;a<l;a++){var c=e[a]*r,u=a<l-1?e[a+1]*r:t.length;o-=Math.abs(signedArea(t,c,u,r))}var d=0;for(a=0;a<s.length;a+=3){var f=s[a]*r,m=s[a+1]*r,g=s[a+2]*r;d+=Math.abs((t[f]-t[g])*(t[m+1]-t[f+1])-(t[f]-t[m])*(t[g+1]-t[f+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function signedArea(t,e,r,s){for(var n=0,i=e,o=r-s;i<r;i+=s)n+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return n}earcut.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},s=0,n=0;n<t.length;n++){for(var i=0;i<t[n].length;i++)for(var o=0;o<e;o++)r.vertices.push(t[n][i][o]);n>0&&(s+=t[n-1].length,r.holes.push(s))}return r};var punycode$1={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var s=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,i=typeof commonjsGlobal=="object"&&commonjsGlobal;(i.global===i||i.window===i||i.self===i)&&(r=i);var o,a=2147483647,l=36,c=1,u=26,d=38,f=700,m=72,g=128,y="-",b=/^xn--/,x=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=l-c,S=Math.floor,M=String.fromCharCode,C;function A(L){throw RangeError(w[L])}function X(L,Z){for(var ne=L.length,ue=[];ne--;)ue[ne]=Z(L[ne]);return ue}function F(L,Z){var ne=L.split("@"),ue="";ne.length>1&&(ue=ne[0]+"@",L=ne[1]),L=L.replace(_,".");var de=L.split("."),I=X(de,Z).join(".");return ue+I}function O(L){for(var Z=[],ne=0,ue=L.length,de,I;ne<ue;)de=L.charCodeAt(ne++),de>=55296&&de<=56319&&ne<ue?(I=L.charCodeAt(ne++),(I&64512)==56320?Z.push(((de&1023)<<10)+(I&1023)+65536):(Z.push(de),ne--)):Z.push(de);return Z}function U(L){return X(L,function(Z){var ne="";return Z>65535&&(Z-=65536,ne+=M(Z>>>10&1023|55296),Z=56320|Z&1023),ne+=M(Z),ne}).join("")}function k(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:l}function B(L,Z){return L+22+75*(L<26)-((Z!=0)<<5)}function ie(L,Z,ne){var ue=0;for(L=ne?S(L/f):L>>1,L+=S(L/Z);L>v*u>>1;ue+=l)L=S(L/v);return S(ue+(v+1)*L/(L+d))}function te(L){var Z=[],ne=L.length,ue,de=0,I=g,z=m,j,q,oe,le,J,E,T,P,R;for(j=L.lastIndexOf(y),j<0&&(j=0),q=0;q<j;++q)L.charCodeAt(q)>=128&&A("not-basic"),Z.push(L.charCodeAt(q));for(oe=j>0?j+1:0;oe<ne;){for(le=de,J=1,E=l;oe>=ne&&A("invalid-input"),T=k(L.charCodeAt(oe++)),(T>=l||T>S((a-de)/J))&&A("overflow"),de+=T*J,P=E<=z?c:E>=z+u?u:E-z,!(T<P);E+=l)R=l-P,J>S(a/R)&&A("overflow"),J*=R;ue=Z.length+1,z=ie(de-le,ue,le==0),S(de/ue)>a-I&&A("overflow"),I+=S(de/ue),de%=ue,Z.splice(de++,0,I)}return U(Z)}function N(L){var Z,ne,ue,de,I,z,j,q,oe,le,J,E=[],T,P,R,D;for(L=O(L),T=L.length,Z=g,ne=0,I=m,z=0;z<T;++z)J=L[z],J<128&&E.push(M(J));for(ue=de=E.length,de&&E.push(y);ue<T;){for(j=a,z=0;z<T;++z)J=L[z],J>=Z&&J<j&&(j=J);for(P=ue+1,j-Z>S((a-ne)/P)&&A("overflow"),ne+=(j-Z)*P,Z=j,z=0;z<T;++z)if(J=L[z],J<Z&&++ne>a&&A("overflow"),J==Z){for(q=ne,oe=l;le=oe<=I?c:oe>=I+u?u:oe-I,!(q<le);oe+=l)D=q-le,R=l-le,E.push(M(B(le+D%R,0))),q=S(D/R);E.push(M(B(q,0))),I=ie(ne,P,ue==de),ne=0,++ue}++ne,++Z}return E.join("")}function Q(L){return F(L,function(Z){return b.test(Z)?te(Z.slice(4).toLowerCase()):Z})}function ce(L){return F(L,function(Z){return x.test(Z)?"xn--"+N(Z):Z})}if(o={version:"1.3.2",ucs2:{decode:O,encode:U},decode:te,encode:N,toASCII:ce,toUnicode:Q},s&&n)if(t.exports==s)n.exports=o;else for(C in o)o.hasOwnProperty(C)&&(s[C]=o[C]);else r.punycode=o})(commonjsGlobal)})(punycode$1,punycode$1.exports);var util$6={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},querystring$1={};function hasOwnProperty$3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var decode$g=function(t,e,r,s){e=e||"&",r=r||"=";var n={};if(typeof t!="string"||t.length===0)return n;var i=/\+/g;t=t.split(e);var o=1e3;s&&typeof s.maxKeys=="number"&&(o=s.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var c=t[l].replace(i,"%20"),u=c.indexOf(r),d,f,m,g;u>=0?(d=c.substr(0,u),f=c.substr(u+1)):(d=c,f=""),m=decodeURIComponent(d),g=decodeURIComponent(f),hasOwnProperty$3(n,m)?Array.isArray(n[m])?n[m].push(g):n[m]=[n[m],g]:n[m]=g}return n},stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},encode$h=function(t,e,r,s){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var i=encodeURIComponent(stringifyPrimitive(n))+r;return Array.isArray(t[n])?t[n].map(function(o){return i+encodeURIComponent(stringifyPrimitive(o))}).join(e):i+encodeURIComponent(stringifyPrimitive(t[n]))}).join(e):s?encodeURIComponent(stringifyPrimitive(s))+r+encodeURIComponent(stringifyPrimitive(t)):""};querystring$1.decode=querystring$1.parse=decode$g;querystring$1.encode=querystring$1.stringify=encode$h;var punycode=punycode$1.exports,util$5=util$6,parse$1=urlParse,resolve$1=urlResolve,format$4=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=querystring$1;function urlParse(t,e,r){if(t&&util$5.isObject(t)&&t instanceof Url)return t;var s=new Url;return s.parse(t,e,r),s}Url.prototype.parse=function(t,e,r){if(!util$5.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),n=s!==-1&&s<t.indexOf("#")?"?":"#",i=t.split(n),o=/\\/g;i[0]=i[0].replace(o,"/"),t=i.join(n);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=simplePathPattern.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=protocolPattern.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(r||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&hostlessProtocol[c])&&(a=a.substr(2),this.slashes=!0)}if(!hostlessProtocol[c]&&(d||c&&!slashedProtocol[c])){for(var f=-1,m=0;m<hostEndingChars.length;m++){var g=a.indexOf(hostEndingChars[m]);g!==-1&&(f===-1||g<f)&&(f=g)}var y,b;f===-1?b=a.lastIndexOf("@"):b=a.lastIndexOf("@",f),b!==-1&&(y=a.slice(0,b),a=a.slice(b+1),this.auth=decodeURIComponent(y)),f=-1;for(var m=0;m<nonHostChars.length;m++){var g=a.indexOf(nonHostChars[m]);g!==-1&&(f===-1||g<f)&&(f=g)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var _=this.hostname.split(/\./),m=0,w=_.length;m<w;m++){var v=_[m];if(!!v&&!v.match(hostnamePartPattern)){for(var S="",M=0,C=v.length;M<C;M++)v.charCodeAt(M)>127?S+="x":S+=v[M];if(!S.match(hostnamePartPattern)){var A=_.slice(0,m),X=_.slice(m+1),F=v.match(hostnamePartStart);F&&(A.push(F[1]),X.unshift(F[2])),X.length&&(a="/"+X.join(".")+a),this.hostname=A.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=punycode.toASCII(this.hostname));var O=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+O,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!unsafeProtocol[u])for(var m=0,w=autoEscape.length;m<w;m++){var k=autoEscape[m];if(a.indexOf(k)!==-1){var B=encodeURIComponent(k);B===k&&(B=escape(k)),a=a.split(k).join(B)}}var ie=a.indexOf("#");ie!==-1&&(this.hash=a.substr(ie),a=a.slice(0,ie));var te=a.indexOf("?");if(te!==-1?(this.search=a.substr(te),this.query=a.substr(te+1),e&&(this.query=querystring.parse(this.query)),a=a.slice(0,te)):e&&(this.search="",this.query={}),a&&(this.pathname=a),slashedProtocol[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",N=this.search||"";this.path=O+N}return this.href=this.format(),this};function urlFormat(t){return util$5.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",s=this.hash||"",n=!1,i="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&util$5.isObject(this.query)&&Object.keys(this.query).length&&(i=querystring.stringify(this.query));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),s&&s.charAt(0)!=="#"&&(s="#"+s),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+n+r+o+s};function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)}Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()};Url.prototype.resolveObject=function(t){if(util$5.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var r=new Url,s=Object.keys(this),n=0;n<s.length;n++){var i=s[n];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return slashedProtocol[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!slashedProtocol[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!hostlessProtocol[t.protocol]){for(var w=(t.pathname||"").split("/");w.length&&!(t.host=w.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",m=r.search||"";r.path=f+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&r.pathname.charAt(0)==="/",y=t.host||t.pathname&&t.pathname.charAt(0)==="/",b=y||g||r.host&&t.pathname,x=b,_=r.pathname&&r.pathname.split("/")||[],w=t.pathname&&t.pathname.split("/")||[],v=r.protocol&&!slashedProtocol[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host=null),b=b&&(w[0]===""||_[0]==="")),y)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,_=w;else if(w.length)_||(_=[]),_.pop(),_=_.concat(w),r.search=t.search,r.query=t.query;else if(!util$5.isNullOrUndefined(t.search)){if(v){r.hostname=r.host=_.shift();var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=t.search,r.query=t.query,(!util$5.isNull(r.pathname)||!util$5.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var M=_.slice(-1)[0],C=(r.host||t.host||_.length>1)&&(M==="."||M==="..")||M==="",A=0,X=_.length;X>=0;X--)M=_[X],M==="."?_.splice(X,1):M===".."?(_.splice(X,1),A++):A&&(_.splice(X,1),A--);if(!b&&!x)for(;A--;A)_.unshift("..");b&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),C&&_.join("/").substr(-1)!=="/"&&_.push("");var F=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(v){r.hostname=r.host=F?"":_.length?_.shift():"";var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return b=b||r.host&&_.length,b&&!F&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),(!util$5.isNull(r.pathname)||!util$5.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const url={parse:parse$1,format:format$4,resolve:resolve$1};function assertPath(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function removeUrlParams(t){return t.split("?")[0].split("#")[0]}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(t,e,r){return t.replace(new RegExp(escapeRegExp(e),"g"),r)}function normalizeStringPosix(t,e){let r="",s=0,n=-1,i=0,o;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||i===1))if(n!==a-1&&i===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",s=0):(r=r.slice(0,l),s=r.length-1-r.lastIndexOf("/")),n=a,i=0;continue}}else if(r.length===2||r.length===1){r="",s=0,n=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",s=2)}else r.length>0?r+=`/${t.slice(n+1,a)}`:r=t.slice(n+1,a),s=a-n-1;n=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}const path={toPosix(t){return replaceAll(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){assertPath(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),s=/^[^/:]+:\/\//.exec(t),n=/^[^/:]+:\//.exec(t);if(r||s||n){const i=(r==null?void 0:r[0])||(s==null?void 0:s[0])||(n==null?void 0:n[0]);e=i,t=t.slice(i.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const s=removeUrlParams(this.toPosix(e!=null?e:settings.ADAPTER.getBaseUrl())),n=removeUrlParams(this.toPosix(r!=null?r:this.rootname(s)));return assertPath(t),t=this.toPosix(t),t.startsWith("/")?path.join(n,t.slice(1)):this.isAbsolute(t)?t:this.join(s,t)},normalize(t){if(t=this.toPosix(t),assertPath(t),t.length===0)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const s=t.endsWith("/");return t=normalizeStringPosix(t,!1),t.length>0&&s&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return assertPath(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){var r;if(t.length===0)return".";let e;for(let s=0;s<t.length;++s){const n=t[s];if(assertPath(n),n.length>0)if(e===void 0)e=n;else{const i=(r=t[s-1])!=null?r:"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(assertPath(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let s=-1,n=!0;const i=this.getProtocol(t),o=t;t=t.slice(i.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!n){s=a;break}}else n=!1;return s===-1?r?"/":this.isUrl(o)?i+t:i:r&&s===1?"//":i+t.slice(0,s)},rootname(t){assertPath(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){assertPath(t),e&&assertPath(e),t=this.toPosix(t);let r=0,s=-1,n=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){const l=t.charCodeAt(i);if(l===47){if(!n){r=i+1;break}}else a===-1&&(n=!1,a=i+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(s=i):(o=-1,s=a))}return r===s?s=a:s===-1&&(s=t.length),t.slice(r,s)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!n){r=i+1;break}}else s===-1&&(n=!1,s=i+1);return s===-1?"":t.slice(r,s)},extname(t){assertPath(t),t=this.toPosix(t);let e=-1,r=0,s=-1,n=!0,i=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!n){r=o+1;break}continue}s===-1&&(n=!1,s=o+1),a===46?e===-1?e=o:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||s===-1||i===0||i===1&&e===s-1&&e===r+1?"":t.slice(e,s)},parse(t){assertPath(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);let r=t.charCodeAt(0);const s=this.isAbsolute(t);let n;e.root=this.rootname(t),s||this.hasProtocol(t)?n=1:n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){if(r=t.charCodeAt(c),r===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),r===46?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||a===-1||u===0||u===1&&i===a-1&&i===o+1?a!==-1&&(o===0&&s?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&s?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(o,i),e.base=t.slice(o,a)),e.ext=t.slice(i,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const r=settings.ADAPTER.createCanvas();let s=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const n=!!(s&&s.getContextAttributes().stencil);if(s){const i=s.getExtension("WEBGL_lose_context");i&&i.loseContext()}return s=null,n}catch{return!1}}()),supported}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function hex2string(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function string2hex(t){if(typeof t=="string"&&(t=cssColorNames[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1)),t.length===3)){const[e,r,s]=t;t=e+e+r+r+s+s}return parseInt(t,16)}function mapPremultipliedBlendModes(){const t=[],e=[];for(let s=0;s<32;s++)t[s]=s,e[s]=s;t[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,t[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,t[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,e[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,e[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,e[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(t,e){return premultiplyBlendMode[e?1:0][t]}function premultiplyRgba(t,e,r,s){return r=r||new Float32Array(4),s||s===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function premultiplyTint(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;let r=t>>16&255,s=t>>8&255,n=t&255;return r=r*e+.5|0,s=s*e+.5|0,n=n*e+.5|0,(e*255<<24)+(r<<16)+(s<<8)+n}function premultiplyTintToRgba(t,e,r,s){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(s||s===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function createIndicesForQuads(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let s=0,n=0;s<r;s+=6,n+=4)e[s+0]=n+0,e[s+1]=n+1,e[s+2]=n+2,e[s+3]=n+0,e[s+4]=n+2,e[s+5]=n+3;return e}function getBufferType(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function isPow2(t){return!(t&t-1)&&!!t}function log2(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function removeItems(t,e,r){const s=t.length;let n;if(e>=s||r===0)return;r=e+r>s?s-e:r;const i=s-r;for(n=e;n<i;++n)t[n]=t[n+r];t.length=i}function sign(t){return t===0?0:t<0?-1:1}let nextUid=0;function uid(){return++nextUid}const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(e,r,s){this.canvas=settings.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=s||settings.RESOLUTION,this.resize(e,r)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(e){this.canvas.width=Math.round(e)}get height(){return this.canvas.height}set height(e){this.canvas.height=Math.round(e)}}function trimCanvas(t){let e=t.width,r=t.height;const s=t.getContext("2d",{willReadFrequently:!0}),i=s.getImageData(0,0,e,r).data,o=i.length,a={top:null,left:null,right:null,bottom:null};let l=null,c,u,d;for(c=0;c<o;c+=4)i[c+3]!==0&&(u=c/4%e,d=~~(c/4/e),a.top===null&&(a.top=d),(a.left===null||u<a.left)&&(a.left=u),(a.right===null||a.right<u)&&(a.right=u+1),(a.bottom===null||a.bottom<d)&&(a.bottom=d));return a.top!==null&&(e=a.right-a.left,r=a.bottom-a.top+1,l=s.getImageData(a.left,a.top,e,r)),{height:r,width:e,data:l}}let tempAnchor;function determineCrossOrigin(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=t;const r=url.parse(tempAnchor.href),s=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!s||r.protocol!==e.protocol?"anonymous":""}function getResolutionOfUrl(t,e=1){const r=settings.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e}const INSTALLED=[];function autoDetectResource(t,e){if(!t)return null;let r="";if(typeof t=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);s&&(r=s[1].toLowerCase())}for(let s=INSTALLED.length-1;s>=0;--s){const n=INSTALLED[s];if(n.test&&n.test(t,r))return new n(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Resource{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class BufferResource extends Resource{constructor(e,r){const{width:s,height:n}=r||{};if(!s||!n)throw new Error("BufferResource width or height invalid");super(s,n),this.data=e}upload(e,r,s){const n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ALPHA_MODES.UNPACK);const i=r.realWidth,o=r.realHeight;return s.width===i&&s.height===o?n.texSubImage2D(r.target,0,0,0,i,o,r.format,s.type,this.data):(s.width=i,s.height=o,n.texImage2D(r.target,0,s.internalFormat,i,o,0,r.format,s.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,format:FORMATS.RGBA,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class extends EventEmitter$1{constructor(t=null,e=null){super(),e=e||{};const{alphaMode:r,mipmap:s,anisotropicLevel:n,scaleMode:i,width:o,height:a,wrapMode:l,format:c,type:u,target:d,resolution:f,resourceOptions:m}=e;t&&!(t instanceof Resource)&&(t=autoDetectResource(t,m),t.internal=!0),this.resolution=f||settings.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=s!=null?s:settings.MIPMAP_TEXTURES,this.anisotropicLevel=n!=null?n:settings.ANISOTROPIC_LEVEL,this._wrapMode=l||settings.WRAP_MODE,this._scaleMode=i!=null?i:settings.SCALE_MODE,this.format=c||FORMATS.RGBA,this.type=u||TYPES.UNSIGNED_BYTE,this.target=d||TARGETS.TEXTURE_2D,this.alphaMode=r!=null?r:ALPHA_MODES.UNPACK,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),_BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=settings.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${uid()}`}n=t._pixiId}let i=BaseTextureCache[n];if(s&&r&&!i)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return i||(i=new _BaseTexture(t,e),i.cacheId=n,_BaseTexture.addToCache(i,n)),i}static fromBuffer(t,e,r,s){t=t||new Float32Array(e*r*4);const n=new BufferResource(t,{width:e,height:r}),i=t instanceof Float32Array?TYPES.FLOAT:TYPES.UNSIGNED_BYTE;return new _BaseTexture(n,Object.assign({},defaultBufferOptions,s||{width:e,height:r,type:i}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),BaseTextureCache[e]&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),BaseTextureCache[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=BaseTextureCache[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete BaseTextureCache[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete BaseTextureCache[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let BaseTexture=_BaseTexture;BaseTexture._globalBatch=0;class AbstractMultiResource extends Resource{constructor(e,r){const{width:s,height:n}=r||{};super(s,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const o=new BaseTexture;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let s=0;s<this.length;s++)!e[s]||(e[s].castToBaseTexture?this.addBaseTextureAt(e[s].castToBaseTexture(),s):e[s]instanceof Resource?this.addResourceAt(e[s],s):this.addResourceAt(autoDetectResource(e[s],r),s))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const r=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(r).then(()=>{const{realWidth:s,realHeight:n}=this.items[0];return this.resize(s,n),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(e,r){const{width:s,height:n}=r||{};let i,o;Array.isArray(e)?(i=e,o=e.length):o=e,super(o,{width:s,height:n}),i&&this.initFromArray(i,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=TARGETS.TEXTURE_2D_ARRAY}upload(e,r,s){const{length:n,itemDirtyIds:i,items:o}=this,{gl:a}=e;s.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,n,0,r.format,s.type,null);for(let l=0;l<n;l++){const c=o[l];i[l]<c.dirtyId&&(i[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,r.format,s.type,c.resource.source))}return!0}}class BaseImageResource extends Resource{constructor(e){const r=e,s=r.naturalWidth||r.videoWidth||r.width,n=r.naturalHeight||r.videoHeight||r.height;super(s,n),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,s){s===void 0&&!r.startsWith("data:")?e.crossOrigin=determineCrossOrigin(r):s!==!1&&(e.crossOrigin=typeof s=="string"?s:"anonymous")}upload(e,r,s,n){const i=e.gl,o=r.realWidth,a=r.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&r.target===i.TEXTURE_2D&&s.width===o&&s.height===a?i.texSubImage2D(i.TEXTURE_2D,0,0,0,r.format,s.type,n):(s.width=o,s.height=a,i.texImage2D(r.target,0,s.internalFormat,r.format,s.type,n)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,s=e.naturalHeight||e.videoHeight||e.height;this.resize(r,s),super.update()}dispose(){this.source=null}}class CanvasResource extends BaseImageResource{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const _CubeResource=class extends AbstractMultiResource{constructor(t,e){const{width:r,height:s,autoLoad:n,linkBaseTexture:i}=e||{};if(t&&t.length!==_CubeResource.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:s});for(let o=0;o<_CubeResource.SIDES;o++)this.items[o].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=i!==!1,t&&this.initFromArray(t,e),n!==!1&&this.load()}bind(t){super.bind(t),t.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const s=this.itemDirtyIds;for(let n=0;n<_CubeResource.SIDES;n++){const i=this.items[n];(s[n]<i.dirtyId||r.dirtyId<e.dirtyId)&&(i.valid&&i.resource?(i.resource.upload(t,i,r),s[n]=i.dirtyId):s[n]<-1&&(t.gl.texImage2D(i.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),s[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===_CubeResource.SIDES}};let CubeResource=_CubeResource;CubeResource.SIDES=6;class ImageResource extends BaseImageResource{constructor(e,r){var s;if(r=r||{},typeof e=="string"){const n=new Image;BaseImageResource.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=((s=r.createBitmap)!=null?s:settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,s)=>{const n=this.source;this.url=n.src;const i=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?r(this.process()):r(this))};n.complete&&n.src?i():(n.onload=i,n.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,s=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:s?"cors":"no-cors"}).then(n=>n.blob()).then(n=>r(n,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,s){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,s,this.bitmap),!this.preserveBitmap){let n=!0;const i=r._glTextures;for(const o in i){const a=i[o];if(a!==s&&a.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}const _SVGResource=class extends BaseImageResource{constructor(t,e){e=e||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},_SVGResource.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;BaseImageResource.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{!this._resolve||(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=e*this.scale,n=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/r*e,n=this._overrideHeight||this._overrideWidth/e*r),s=Math.round(s),n=Math.round(n);const i=this.source;i.width=s,i.height=n,i._pixiId=`canvas_${uid()}`,i.getContext("2d").drawImage(t,0,0,e,r,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(t){const e=_SVGResource.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&_SVGResource.SVG_XML.test(t)}};let SVGResource=_SVGResource;SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const _VideoResource=class extends BaseImageResource{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const s=t[0].src||t[0];BaseImageResource.crossOrigin(r,s,e.crossorigin);for(let n=0;n<t.length;++n){const i=document.createElement("source");let{src:o,mime:a}=t[n];o=o||t[n];const l=o.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);a=a||_VideoResource.MIME_TYPES[c]||`video/${c}`,i.src=o,i.type=a,r.appendChild(i)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||_VideoResource.TYPES.includes(e)}};let VideoResource=_VideoResource;VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class ImageBitmapResource extends BaseImageResource{constructor(e,r){var n;var s=(...i)=>{super(...i)};r=r||{},typeof e=="string"?(s(ImageBitmapResource.EMPTY),this.url=e):(s(e),this.url=null),this.crossOrigin=(n=r.crossOrigin)!=null?n:!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const s=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await s.blob();if(this.destroyed)return;const i=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=i,this.update(),e(this)}catch(s){if(this.destroyed)return;r(s),this.onError.emit(s)}}),this._load)}upload(e,r,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){var e;return ImageBitmapResource._EMPTY=(e=ImageBitmapResource._EMPTY)!=null?e:settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);class DepthResource extends BufferResource{upload(e,r,s){const n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ALPHA_MODES.UNPACK);const i=r.realWidth,o=r.realHeight;return s.width===i&&s.height===o?n.texSubImage2D(r.target,0,0,0,i,o,r.format,s.type,this.data):(s.width=i,s.height=o,n.texImage2D(r.target,0,s.internalFormat,i,o,0,r.format,s.type,this.data)),!0}}class Framebuffer{constructor(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const n=this.colorTextures[s],i=n.resolution;n.setSize(e/i,r/i)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,r/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(e={}){var r;if(typeof e=="number"){const s=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];e={width:s,height:n,scaleMode:i,resolution:o}}e.width=e.width||100,e.height=e.height||100,(r=e.multisample)!=null||(e.multisample=MSAA_QUALITY.NONE),super(null,e),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,s){const n=r.width,i=r.height;if(s){const o=e.width/2/n,a=e.height/2/i,l=e.x/n+o,c=e.y/i+a;s=groupD8.add(s,groupD8.NW),this.x0=l+o*groupD8.uX(s),this.y0=c+a*groupD8.uY(s),s=groupD8.add(s,2),this.x1=l+o*groupD8.uX(s),this.y1=c+a*groupD8.uY(s),s=groupD8.add(s,2),this.x2=l+o*groupD8.uX(s),this.y2=c+a*groupD8.uY(s),s=groupD8.add(s,2),this.x3=l+o*groupD8.uX(s),this.y3=c+a*groupD8.uY(s)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class Texture extends EventEmitter$1{constructor(e,r,s,n,i,o){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Rectangle(0,0,1,1)),e instanceof Texture&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=n,this.valid=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=s||r,this._rotate=Number(i||0),i===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Point(o.x,o.y):new Point(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;(r==null?void 0:r.url)&&TextureCache[r.url]&&Texture.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),s=new Texture(this.baseTexture,!this.noFrame&&e,r,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(s._frame=e),s}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},s=settings.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let i=null;if(n)i=e;else if(e instanceof BaseTexture){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${uid()}`,BaseTexture.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${uid()}`}i=e._pixiId}let o=TextureCache[i];if(n&&s&&!o)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return!o&&!(e instanceof BaseTexture)?(r.resolution||(r.resolution=getResolutionOfUrl(e)),o=new Texture(new BaseTexture(e,r)),o.baseTexture.cacheId=i,BaseTexture.addToCache(o.baseTexture,i),Texture.addToCache(o,i)):!o&&e instanceof BaseTexture&&(o=new Texture(e),Texture.addToCache(o,i)),o}static fromURL(e,r){const s=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),n=Texture.from(e,Object.assign({resourceOptions:s},r),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(e,r,s,n){return new Texture(BaseTexture.fromBuffer(e,r,s,n))}static fromLoader(e,r,s,n){const i=new BaseTexture(e,Object.assign({scaleMode:settings.SCALE_MODE,resolution:getResolutionOfUrl(r)},n)),{resource:o}=i;o instanceof ImageResource&&(o.url=r);const a=new Texture(i);return s||(s=r),BaseTexture.addToCache(a.baseTexture,s),Texture.addToCache(a,s),s!==r&&(BaseTexture.addToCache(a.baseTexture,r),Texture.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),TextureCache[r]&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),TextureCache[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=TextureCache[e];if(r){const s=r.textureCacheIds.indexOf(e);return s>-1&&r.textureCacheIds.splice(s,1),delete TextureCache[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)TextureCache[e.textureCacheIds[r]]===e&&delete TextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:s,width:n,height:i}=e,o=r+n>this.baseTexture.width,a=s+i>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${r} + ${n} = ${r+n} > ${this.baseTexture.width}`,u=`Y: ${s} + ${i} = ${s+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const e=settings.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(e)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,s=!0){const n=this.baseTexture.resolution,i=Math.round(e*n)/n,o=Math.round(r*n)/n;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new RenderTexture(new BaseRenderTexture(e))}}class RenderTexturePool{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,s=MSAA_QUALITY.NONE){const n=new BaseRenderTexture(Object.assign({width:e,height:r,resolution:1,multisample:s},this.textureOptions));return new RenderTexture(n)}getOptimalTexture(e,r,s=1,n=MSAA_QUALITY.NONE){let i;e=Math.ceil(e*s-1e-6),r=Math.ceil(r*s-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=nextPow2(e),r=nextPow2(r),i=((e&65535)<<16|r&65535)>>>0,n>1&&(i+=n*4294967296)):i=n>1?-n:-1,this.texturePool[i]||(this.texturePool[i]=[]);let o=this.texturePool[i].pop();return o||(o=this.createTexture(e,r,n)),o.filterPoolKey=i,o.setResolution(s),o}getFilterTexture(e,r,s){const n=this.getOptimalTexture(e.width,e.height,r||e.resolution,s||MSAA_QUALITY.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const s=this.texturePool[r];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const s=this.texturePool[r];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}RenderTexturePool.SCREEN_KEY=-1;class Attribute{constructor(e,r=0,s=!1,n=TYPES.FLOAT,i,o,a){this.buffer=e,this.size=r,this.normalized=s,this.type=n,this.stride=i,this.start=o,this.instance=a}destroy(){this.buffer=null}static from(e,r,s,n,i){return new Attribute(e,r,s,n,i)}}let UID$4=0;class Buffer$1{constructor(e,r=!0,s=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=r,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Buffer$1(e)}}const map$2={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(t,e){let r=0,s=0;const n={};for(let l=0;l<t.length;l++)s+=e[l],r+=t[l].length;const i=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=getBufferType(u);n[d]||(n[d]=new map$2[d](i)),o=n[d];for(let f=0;f<u.length;f++){const m=(f/c|0)*s+a,g=f%c;o[m+g]=u[f]}a+=c}return new Float32Array(i)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(e,r,s=0,n=!1,i,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Buffer$1||(r instanceof Array&&(r=new Float32Array(r)),r=new Buffer$1(r));const c=e.split("|");if(c.length>1){for(let d=0;d<c.length;d++)this.addAttribute(c[d],r,s,n,i);return this}let u=this.buffers.indexOf(r);return u===-1&&(this.buffers.push(r),u=this.buffers.length-1),this.attributes[e]=new Attribute(u,s,n,i,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Buffer$1||(e instanceof Array&&(e=new Uint16Array(e)),e=new Buffer$1(e)),e.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],s=new Buffer$1;let n;for(n in this.attributes){const i=this.attributes[n],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*byteSizeMap$1[i.type]/4),i.buffer=0}for(s.data=interleaveTypedArrays(e,r),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Geometry;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Buffer$1(this.buffers[r].data.slice(0));for(const r in this.attributes){const s=this.attributes[r];e.attributes[r]=new Attribute(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Geometry,s=[],n=[],i=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l]=n[l]||0,n[l]+=o.buffers[l].data.length,i[l]=0}for(let a=0;a<o.buffers.length;a++)s[a]=new map$1[getBufferType(o.buffers[a].data)](n[a]),r.buffers[a]=new Buffer$1(s[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)s[l].set(o.buffers[l].data,i[l]),i[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){u=d;break}for(const d in o.attributes){const f=o.attributes[d];(f.buffer|0)===u&&(l+=f.size*byteSizeMap$1[f.type]/4)}for(let d=0;d<e.length;d++){const f=e[d].indexBuffer.data;for(let m=0;m<f.length;m++)r.indexBuffer.data[m+c]+=a;a+=e[d].buffers[u].data.length/l,c+=f.length}}return r}}class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer$1(this.vertices),this.uvBuffer=new Buffer$1(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let s=0,n=0;return this.uvs[0]=s,this.uvs[1]=n,this.uvs[2]=s+r.width/e.width,this.uvs[3]=n,this.uvs[4]=s+r.width/e.width,this.uvs[5]=n+r.height/e.height,this.uvs[6]=s,this.uvs[7]=n+r.height/e.height,s=r.x,n=r.y,this.vertices[0]=s,this.vertices[1]=n,this.vertices[2]=s+r.width,this.vertices[3]=n,this.vertices[4]=s+r.width,this.vertices[5]=n+r.height,this.vertices[6]=s,this.vertices[7]=n+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let UID$2=0;class UniformGroup{constructor(e,r,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!r,this.ubo=!!s,e instanceof Buffer$1?(this.buffer=e,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Buffer$1(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,s){if(!this.ubo)this.uniforms[e]=new UniformGroup(r,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,s){return new UniformGroup(e,r,s)}static uboFrom(e,r){return new UniformGroup(e,r!=null?r:!0,!0)}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$1=new Matrix;class FilterSystem{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){var g,y;const s=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new FilterState,o=this.renderer.renderTexture;let a=r[0].resolution,l=r[0].multisample,c=r[0].padding,u=r[0].autoFit,d=(g=r[0].legacy)!=null?g:!0;for(let b=1;b<r.length;b++){const x=r[b];a=Math.min(a,x.resolution),l=Math.min(l,x.multisample),c=this.useMaxPadding?Math.max(c,x.padding):c+x.padding,u=u&&x.autoFit,d=d||((y=x.legacy)!=null?y:!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(i),i.resolution=a,i.multisample=l,i.legacy=d,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(c);const f=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(tempMatrix$1.copyFrom(s.projection.transform).invert(),f),u?(i.sourceFrame.fit(f),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(f)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,a,l),i.filters=r,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=i.sourceFrame.width,m.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=s.projection.transform,s.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,m),s.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),s=r.filters;this.activeState=r;const n=this.globalUniforms.uniforms;n.outputFrame=r.sourceFrame,n.resolution=r.resolution;const i=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(i[0]=r.destinationFrame.width,i[1]=r.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*r.resolution),o[1]=Math.round(i[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*i[2]-.5*o[2],a[3]=r.sourceFrame.height*i[3]-.5*o[3],r.legacy){const c=n.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,r.renderTexture,l.renderTexture,CLEAR_MODES.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let c=r.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,r.resolution);u.filterFrame=c.filterFrame;let d=0;for(d=0;d<s.length-1;++d){d===1&&r.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,r.resolution),u.filterFrame=c.filterFrame),s[d].apply(this,c,u,CLEAR_MODES.CLEAR,r);const f=c;c=u,u=f}s[d].apply(this,c,l.renderTexture,CLEAR_MODES.BLEND,r),d>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=CLEAR_MODES.CLEAR){const{renderTexture:s,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,s.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=n.stateId&1||this.forceClear;(r===CLEAR_MODES.CLEAR||r===CLEAR_MODES.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,s,n){const i=this.renderer;i.state.set(e.state),this.bindAndClear(s,n),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(DRAW_MODES.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:s,destinationFrame:n}=this.activeState,{orig:i}=r._texture,o=e.set(n.width,0,0,n.height,s.x,s.y),a=r.worldTransform.copyTo(Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,s=1,n=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(e,r,s,n)}getFilterTexture(e,r,s){if(typeof e=="number"){const i=e;e=r,r=i}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,s||MSAA_QUALITY.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const s=tempPoints[0],n=tempPoints[1],i=tempPoints[2],o=tempPoints[3];s.set(r.left,r.top),n.set(r.left,r.bottom),i.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(s,s),e.apply(n,n),e.apply(i,i),e.apply(o,o);const a=Math.min(s.x,n.x,i.x,o.x),l=Math.min(s.y,n.y,i.y,o.y),c=Math.max(s.x,n.x,i.x,o.x),u=Math.max(s.y,n.y,i.y,o.y);r.x=a,r.y=l,r.width=c-a,r.height=u-l}roundFrame(e,r,s,n,i){if(!(e.width<=0||e.height<=0||s.width<=0||s.height<=0)){if(i){const{a:o,b:a,c:l,d:c}=i;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}i=i?tempMatrix$1.copyFrom(i):tempMatrix$1.identity(),i.translate(-s.x,-s.y).scale(n.width/s.width,n.height/s.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(r),this.transformAABB(i.invert(),e)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class ObjectRenderer{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class BatchSystem{constructor(e){this.renderer=e,this.emptyRenderer=new ObjectRenderer(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:s}=this.renderer.texture;for(let n=r-1;n>=0;--n)e[n]=s[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,r,s,n){const{elements:i,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=i[c],d=u._batchLocation;if(d>=0&&d<n&&r[d]===u){o[c]=d;continue}for(;l<n;){const f=r[l];if(f&&f._batchEnabled===s&&f._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,r[l]=u;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()}init(e){var r;if(e.context)this.initFromContext(e.context);else{const s=this.renderer.background.alpha<1,n=(r=e.premultipliedAlpha)!=null?r:!0;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:s,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let s;if(settings.PREFER_ENV>=ENV.WEBGL2&&(s=e.getContext("webgl2",r)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault()}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=s||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class GLFramebuffer{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(r=null,s=null),r?e.drawBuffers=n=>r.drawBuffersWEBGL(n):(this.hasMRT=!1,e.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,s=0){const{gl:n}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==s&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=s),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,s)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>s,a=r.height>>s,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>s,a=e.height>>s;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,s,n){const i=this.viewport;e=Math.round(e),r=Math.round(r),s=Math.round(s),n=Math.round(n),(i.width!==s||i.height!==n||i.x!==e||i.y!==r)&&(i.x=e,i.y=r,i.width=s,i.height=n,this.gl.viewport(e,r,s,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,s,n,i=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:o}=this;o.clearColor(e,r,s,n),o.clear(i)}initFramebuffer(e){const{gl:r}=this,s=new GLFramebuffer(r.createFramebuffer());return s.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(e),e.disposeRunner.add(this),s}resizeFramebuffer(e){const{gl:r}=this,s=e.glFramebuffers[this.CONTEXT_UID];s.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,s.stencil),s.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));const n=e.colorTextures;let i=n.length;r.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const a=n[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&s.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,s.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,s.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:s}=this,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let o=i.length;s.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||s.createRenderbuffer():n.msaaBuffer&&(s.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=i[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&n.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,n.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,n.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,r),a.push(s.COLOR_ATTACHMENT0+l))}if(a.length>1&&s.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const c=e.depthTexture;this.renderer.texture.bind(c,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,r)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,n.stencil),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,e.width,e.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,e.width,e.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n.stencil)):n.stencil&&(s.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let s=MSAA_QUALITY.NONE;if(e<=1||r===null)return s;for(let n=0;n<r.length;n++)if(r[n]<=e){s=r[n];break}return s===1&&(s=MSAA_QUALITY.NONE),s}blit(e,r,s){const{current:n,renderer:i,gl:o,CONTEXT_UID:a}=this;if(i.context.webGLVersion!==2||!n)return;const l=n.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=n.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new Framebuffer(n.width,n.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}r||(r=tempRectangle,r.width=n.width,r.height=n.height),s||(s=r);const c=r.width===s.width&&r.height===s.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}disposeFramebuffer(e,r){const s=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!s)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),r||(n.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&n.deleteRenderbuffer(s.msaaBuffer),s.stencil&&n.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&s.blitFramebuffer.dispose()}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<r.length;s++)this.disposeFramebuffer(r[s],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;e.stencil=!0;const s=e.width,n=e.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,s,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,s,n),r.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(s=null),s?(e.createVertexArray=()=>s.createVertexArrayOES(),e.bindVertexArray=n=>s.bindVertexArrayOES(n),e.deleteVertexArray=n=>s.deleteVertexArrayOES(n)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=(n,i)=>s.vertexAttribDivisorANGLE(n,i),e.drawElementsInstanced=(n,i,o,a,l)=>s.drawElementsInstancedANGLE(n,i,o,a,l),e.drawArraysInstanced=(n,i,o,a)=>s.drawArraysInstancedANGLE(n,i,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:s}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const o=n[r.program.id]||this.initGeometryVao(e,r,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let s=0;s<e.buffers.length;s++){const n=e.buffers[s];r.update(n)}}checkCompatibility(e,r){const s=e.attributes,n=r.attributeData;for(const i in n)if(!s[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,r){const s=e.attributes,n=r.attributeData,i=["g",e.id];for(const o in s)n[o]&&i.push(o,n[o].location);return i.join("-")}initGeometryVao(e,r,s=!0){const n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[i]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const d=e.buffers,f=e.attributes,m={},g={};for(const y in d)m[y]=0,g[y]=0;for(const y in f)!f[y].size&&a.attributeData[y]?f[y].size=a.attributeData[y].size:f[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),m[f[y].buffer]+=f[y].size*byteSizeMap[f[y].type];for(const y in f){const b=f[y],x=b.size;b.stride===void 0&&(m[b.buffer]===x*byteSizeMap[b.type]?b.stride=0:b.stride=m[b.buffer]),b.start===void 0&&(b.start=g[b.buffer],g[b.buffer]+=x*byteSizeMap[b.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(let y=0;y<d.length;y++){const b=d[y];o.bind(b),s&&b._glBuffers[i].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,n.bindVertexArray(null),o.unbind(BUFFER_TYPE.ARRAY_BUFFER),u}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const s=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!s){if(o)for(let l=0;l<i.length;l++){const c=i[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&o.dispose(i[l],r))}if(!r){for(const l in s)if(l[0]==="g"){const c=s[l];this._activeVao===c&&this.unbind(),n.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let s=0;s<r.length;s++)this.disposeGeometry(this.managedGeometries[r[s]],e)}activateVao(e,r){const s=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],d=o[u.buffer],f=d._glBuffers[n];if(r.attributeData[c]){l!==f&&(i.bind(d),l=f);const m=r.attributeData[c].location;if(s.enableVertexAttribArray(m),s.vertexAttribPointer(m,u.size,u.type||s.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)s.vertexAttribDivisor(m,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,s,n){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(s||0)*a,n||1):i.drawElements(e,r||o.indexBuffer.data.length,l,(s||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,s,r||o.getSize(),n||1):i.drawArrays(e,s,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);class MaskData{constructor(e=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}function compileShader(t,e,r){const s=t.createShader(e);return t.shaderSource(s,r),t.compileShader(s),s}function logPrettyShaderError(t,e){const r=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),s=t.getShaderInfoLog(e),n=s.split(`
`),i={},o=n.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!i[c]?(i[c]=!0,!0):!1),a=[""];o.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function logProgramError(t,e,r,s){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||logPrettyShaderError(t,r),t.getShaderParameter(s,t.COMPILE_STATUS)||logPrettyShaderError(t,s),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function booleanArray(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function defaultValue(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return booleanArray(2*e);case"bvec3":return booleanArray(3*e);case"bvec4":return booleanArray(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||(context==null?void 0:context.isContextLost())){const t=settings.ADAPTER.createCanvas();let e;settings.PREFER_ENV>=ENV.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),context=e}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const t=getTestContext();t&&t.getShaderPrecisionFormat&&(maxFragmentPrecision=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?PRECISION.HIGH:PRECISION.MEDIUM)}return maxFragmentPrecision}function setPrecision(t,e,r){if(t.substring(0,9)!=="precision"){let s=e;return e===PRECISION.HIGH&&r!==PRECISION.HIGH&&(s=PRECISION.MEDIUM),`precision ${s} float;
${t}`}else if(r!==PRECISION.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(t){return GLSL_TO_SIZE[t]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(t,e){if(!GL_TABLE){const r=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let s=0;s<r.length;++s){const n=r[s];GL_TABLE[t[n]]=GL_TO_GLSL_TYPES[n]}}return GL_TABLE[e]}const uniformParsers=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(t,e){var s;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in t.uniforms){const i=e[n];if(!i){(s=t.uniforms[n])!=null&&s.group&&(t.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=t.uniforms[n];let a=!1;for(let l=0;l<uniformParsers.length;l++)if(uniformParsers[l].test(i,o)){r.push(uniformParsers[l].code(n,o)),a=!0;break}if(!a){const c=(i.size===1&&!i.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function checkMaxIfStatementsInShader(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const s=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(t));if(e.shaderSource(r,s),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;let UID$1=0;const nameCache={};class Program{constructor(e,r,s="pixi-shader",n={}){this.extra={},this.id=UID$1++,this.vertexSrc=e||Program.defaultVertexSrc,this.fragmentSrc=r||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(s=s.replace(/\s+/g,"-"),nameCache[s]?(nameCache[s]++,s+=`-${nameCache[s]}`):nameCache[s]=1,this.vertexSrc=`#define SHADER_NAME ${s}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${s}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,settings.PRECISION_VERTEX,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentSrc(){return defaultFragment$2}static from(e,r,s){const n=e+r;let i=ProgramCache[n];return i||(ProgramCache[n]=i=new Program(e,r,s)),i}}class Shader{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof UniformGroup?this.uniformGroup=r:this.uniformGroup=new UniformGroup(r):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const s in r.uniforms){const n=r.uniforms[s];if(n.group&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,s){const n=Program.from(e,r);return new Shader(n,s)}}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State$1{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(e){!!(this.data&1<<BLEND$1)!==e&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(e){!!(this.data&1<<OFFSET$1)!==e&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(e){!!(this.data&1<<CULLING$1)!==e&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(e){!!(this.data&1<<DEPTH_TEST$1)!==e&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(e){!!(this.data&1<<DEPTH_MASK$1)!==e&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(e){!!(this.data&1<<WINDING$1)!==e&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==BLEND_MODES.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new State$1;return e.depthTest=!1,e.blend=!0,e}}var defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;class Filter extends Shader{constructor(e,r,s){const n=Program.from(e||Filter.defaultVertexSrc,r||Filter.defaultFragmentSrc);super(n,s),this.padding=0,this.resolution=settings.FILTER_RESOLUTION,this.multisample=settings.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new State$1}apply(e,r,s,n,i){e.applyFilter(this,r,s,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment$1}}var vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$3=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;const tempMat$1=new Matrix;class TextureMatrix{constructor(e,r){this._texture=e,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const s=this.mapCoord;for(let n=0;n<e.length;n+=2){const i=e[n],o=e[n+1];r[n]=i*s.a+o*s.c+s.tx,r[n+1]=i*s.b+o*s.d+s.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const s=r._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=r.orig,i=r.trim;i&&(tempMat$1.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(tempMat$1));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(r._frame.x+l+c)/o.width,a[1]=(r._frame.y+l+c)/o.height,a[2]=(r._frame.x+r._frame.width-l+c)/o.width,a[3]=(r._frame.y+r._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}class SpriteMaskFilter extends Filter{constructor(e,r,s){let n=null;typeof e!="string"&&r===void 0&&s===void 0&&(n=e,e=void 0,r=void 0,s=void 0),super(e||vertex$2,r||fragment$3,s),this.maskSprite=n,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,s,n){const i=this._maskSprite,o=i._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new TextureMatrix(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,s,n))}}class MaskSystem{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let s=r;if(!s.isMaskData){const i=this.maskDataPool.pop()||new MaskData;i.pooled=!0,i.maskObject=r,s=i}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(n),s._colorMask=n?n._colorMask:15,s.autoDetect&&this.detect(s),s._target=e,s.type!==MASK_TYPES.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(s);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(s);break;case MASK_TYPES.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case MASK_TYPES.COLOR:this.pushColorMask(s);break}s.type===MASK_TYPES.SPRITE&&this.maskStack.push(s)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(r);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(r);break;case MASK_TYPES.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===MASK_TYPES.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=MASK_TYPES.SCISSOR:e.type=MASK_TYPES.STENCIL:e.type=MASK_TYPES.COLOR}pushSpriteMask(e){var u,d;const{maskObject:r}=e,s=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));const i=this.renderer,o=i.renderTexture;let a,l;if(o.current){const f=o.current;a=e.resolution||f.resolution,l=(u=e.multisample)!=null?u:f.multisample}else a=e.resolution||i.resolution,l=(d=e.multisample)!=null?d:i.multisample;n[0].resolution=a,n[0].multisample=l,n[0].maskSprite=r;const c=s.filterArea;s.filterArea=r.getBounds(!0),i.filter.push(s,n),s.filterArea=c,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,s=e._colorMask=r&e.colorMask;s!==r&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(e){const r=e._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==r&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,s=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==s&&(n===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix=new Matrix,rectPool=[],_ScissorSystem=class extends AbstractMaskSystem{constructor(t){super(t),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){var o;if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:s}=this,n=s.renderTexture,i=r.getBounds(!0,(o=rectPool.pop())!=null?o:new Rectangle);this.roundFrameToPixels(i,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),e&&i.fit(e),t._scissorRectLocal=i}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:s,d:n}=t;return(Math.abs(r)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||_ScissorSystem.isMatrixRotated(e.worldTransform)||_ScissorSystem.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,s,n){_ScissorSystem.isMatrixRotated(n)||(n=n?tempMatrix.copyFrom(n):tempMatrix.identity(),n.translate(-r.x,-r.y).scale(s.width/r.width,s.height/r.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,t),t.fit(s),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&rectPool.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let ScissorSystem=_ScissorSystem;ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(e){super(e),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:s}=this.renderer,n=e._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;i!==0&&(e._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,n,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,i!==0&&(e._colorMask=i,s.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=s?s._colorMask:15;n!==0&&(s._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(s._colorMask=n,r.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class ProjectionSystem{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(e,r,s,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,r,s,n){const i=this.projectionMatrix,o=n?-1:1;i.identity(),i.a=1/r.width*2,i.d=o*(1/r.height*2),i.tx=-1-r.x*i.a,i.ty=-o-r.y*i.d}setTransform(e){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}bind(e=null,r,s){const n=this.renderer;this.current=e;let i,o,a;e?(i=e.baseTexture,a=i.resolution,r||(tempRect.width=e.frame.width,tempRect.height=e.frame.height,r=tempRect),s||(tempRect2.x=e.frame.x,tempRect2.y=e.frame.y,tempRect2.width=r.width,tempRect2.height=r.height,s=tempRect2),o=i.framebuffer):(a=n.resolution,r||(tempRect.width=n._view.screen.width,tempRect.height=n._view.screen.height,r=tempRect),s||(s=tempRect,s.width=r.width,s.height=r.height));const l=this.viewportFrame;l.x=s.x*a,l.y=s.y*a,l.width=s.width*a,l.height=s.height*a,e||(l.y=n.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(s,r,a,!o),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(s)}clear(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.renderer.background.colorRgba;const s=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,i=s.width!==n.width||s.height!==n.height;if(i){let{x:o,y:a,width:l,height:c}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,c)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);function uboUpdate(t,e,r,s,n){r.buffer.update(n)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(t){const e=t.map(i=>({data:i,offset:0,dataLen:0,dirty:0}));let r=0,s=0,n=0;for(let i=0;i<e.length;i++){const o=e[i];if(r=GLSL_TO_STD40_SIZE[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,s%r!==0&&s<16){const a=s%r%16;s+=a,n+=a}s+r>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=r,s=r):(o.offset=n,s+=r,n+=r)}return n=Math.ceil(n/16)*16,{uboElements:e,size:n}}function getUBOData(t,e){const r=[];for(const s in t)e[s]&&r.push(e[s]);return r.sort((s,n)=>s.index-n.index),r}function generateUniformBufferSync(t,e){if(!t.autoManage)return{size:0,syncFunc:uboUpdate};const r=getUBOData(t.uniforms,e),{uboElements:s,size:n}=createUBOElements(r),i=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const a=s[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let d=0;d<uniformParsers.length;d++){const f=uniformParsers[d];if(f.codeUbo&&f.test(a.data,l)){i.push(`offset = ${a.offset/4};`,uniformParsers[d].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const d=mapSize(a.data.type),f=Math.max(GLSL_TO_STD40_SIZE[a.data.type]/16,1),m=d/f,g=(4-m%4)%4;i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${m}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const d=UBO_TO_SINGLE_SETTERS[a.data.type];i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${d};
                `)}}return i.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join(`
`))}}class GLProgram{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(t,e){const r={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const i=e.getActiveAttrib(t,n);if(i.name.startsWith("gl_"))continue;const o=mapType(e,i.type),a={type:o,name:i.name,size:mapSize(o),location:e.getAttribLocation(t,i.name)};r[i.name]=a}return r}function getUniformData(t,e){const r={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const i=e.getActiveUniform(t,n),o=i.name.replace(/\[.*?\]$/,""),a=!!i.name.match(/\[.*?\]$/),l=mapType(e,i.type);r[o]={name:o,index:n,type:l,size:i.size,isArray:a,value:defaultValue(l,i.size)}}return r}function generateProgram(t,e){var l;const r=compileShader(t,t.VERTEX_SHADER,e.vertexSrc),s=compileShader(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();t.attachShader(n,r),t.attachShader(n,s);const i=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(i&&(typeof t.transformFeedbackVaryings!="function"||t.transformFeedbackVaryings(n,i.names,i.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||logProgramError(t,n,r,s),e.attributeData=getAttributeData(n,t),e.uniformData=getUniformData(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const c=Object.keys(e.attributeData);c.sort((u,d)=>u>d?1:-1);for(let u=0;u<c.length;u++)e.attributeData[c[u]].location=u,t.bindAttribLocation(n,u,c[u]);t.linkProgram(n)}t.deleteShader(r),t.deleteShader(s);const o={};for(const c in e.uniformData){const u=e.uniformData[c];o[c]={location:t.getUniformLocation(n,c),value:defaultValue(u.type,u.size)}}return new GLProgram(n,o)}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const s=e.program,n=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==s&&(this.program=s,this.gl.useProgram(n.program)),r||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(e.uniformGroup,defaultSyncData)),n}setUniforms(e){const r=this.shader.program,s=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(s.uniformData,e,this.renderer)}syncUniformGroup(e,r){const s=this.getGlProgram();(!e.static||e.dirtyId!==s.uniformDirtyGroups[e.id])&&(s.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,s,r))}syncUniforms(e,r,s){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,s)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=generateUniformsSync(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const s=this.getGlProgram();if(!e.static||e.dirtyId!==0||!s.uniformGroups[e.id]){e.dirtyId=0;const n=s.uniformGroups[e.id]||this.createSyncBufferGroup(e,s,r);e.buffer.update(),n(s.uniformData,e.uniforms,this.renderer,defaultSyncData,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,s.uniformBufferBindings[r])}createSyncBufferGroup(e,r,s){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(r.program,s);r.uniformBufferBindings[s]=this.shader.uniformBindCount,n.uniformBlockBinding(r.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=generateUniformBufferSync(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,s){const n=e.uniforms,i=[`${s}-`];for(const o in n)i.push(o),r[o]&&i.push(r[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,s=e.program,n=generateProgram(r,s);return s.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);function mapWebGLBlendModesToPixi(t,e=[]){return e[BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.ADD]=[t.ONE,t.ONE],e[BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.NONE]=[0,0],e[BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State$1,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=mapWebGLBlendModesToPixi(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(_StateSystem.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(_StateSystem.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let StateSystem=_StateSystem;StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};extensions$1.add(StateSystem);class TextureGCSystem{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=settings.GC_MAX_IDLE,this.checkCountMax=settings.GC_MAX_CHECK_COUNT,this.mode=settings.GC_MODE}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let s=!1;for(let n=0;n<r.length;n++){const i=r[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),r[n]=null,s=!0)}if(s){let n=0;for(let i=0;i<r.length;i++)r[i]!==null&&(r[n++]=r[i]);r.length=n}}unload(e){const r=this.renderer.texture,s=e._texture;s&&!s.framebuffer&&r.destroyTexture(s);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}}TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};extensions$1.add(TextureGCSystem);function mapTypeAndFormatToInternalFormat(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:t.RGBA8,[FORMATS.RGB]:t.RGB8,[FORMATS.RG]:t.RG8,[FORMATS.RED]:t.R8,[FORMATS.RGBA_INTEGER]:t.RGBA8UI,[FORMATS.RGB_INTEGER]:t.RGB8UI,[FORMATS.RG_INTEGER]:t.RG8UI,[FORMATS.RED_INTEGER]:t.R8UI,[FORMATS.ALPHA]:t.ALPHA,[FORMATS.LUMINANCE]:t.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:t.RGBA8_SNORM,[FORMATS.RGB]:t.RGB8_SNORM,[FORMATS.RG]:t.RG8_SNORM,[FORMATS.RED]:t.R8_SNORM,[FORMATS.RGBA_INTEGER]:t.RGBA8I,[FORMATS.RGB_INTEGER]:t.RGB8I,[FORMATS.RG_INTEGER]:t.RG8I,[FORMATS.RED_INTEGER]:t.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:t.RGBA16UI,[FORMATS.RGB_INTEGER]:t.RGB16UI,[FORMATS.RG_INTEGER]:t.RG16UI,[FORMATS.RED_INTEGER]:t.R16UI,[FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:t.RGBA16I,[FORMATS.RGB_INTEGER]:t.RGB16I,[FORMATS.RG_INTEGER]:t.RG16I,[FORMATS.RED_INTEGER]:t.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:t.RGBA32UI,[FORMATS.RGB_INTEGER]:t.RGB32UI,[FORMATS.RG_INTEGER]:t.RG32UI,[FORMATS.RED_INTEGER]:t.R32UI,[FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:t.RGBA32I,[FORMATS.RGB_INTEGER]:t.RGB32I,[FORMATS.RG_INTEGER]:t.RG32I,[FORMATS.RED_INTEGER]:t.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:t.RGBA32F,[FORMATS.RGB]:t.RGB32F,[FORMATS.RG]:t.RG32F,[FORMATS.RED]:t.R32F,[FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:t.RGBA16F,[FORMATS.RGB]:t.RGB16F,[FORMATS.RG]:t.RG16F,[FORMATS.RED]:t.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:t.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:t.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:t.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:t.RGB10_A2,[FORMATS.RGBA_INTEGER]:t.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:t.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:t.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:t.RGBA,[FORMATS.RGB]:t.RGB,[FORMATS.ALPHA]:t.ALPHA,[FORMATS.LUMINANCE]:t.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:t.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:t.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:t.RGBA}},e}class GLTexture{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}class TextureSystem{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};const s=new GLTexture(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new GLTexture(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,r=0){const{gl:s}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,s.activeTexture(s.TEXTURE0+r)),s.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,s.activeTexture(s.TEXTURE0+r)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,s.activeTexture(s.TEXTURE0+r)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<s.length;n++)s[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<s.length;n++)s[n]===e&&(this.currentLocation!==n&&(r.activeTexture(r.TEXTURE0+n),this.currentLocation=n),r.bindTexture(e.target,this.emptyTextures[e.target].texture),s[n]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:s,CONTEXT_UID:n}=this;if(!!s)for(let i=e-1;i>=0;--i){const o=r[i];o&&o._glTextures[n].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new GLTexture(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var s,n;r.internalFormat=(n=(s=this.internalFormats[e.type])==null?void 0:s[e.format])!=null?n:e.format,this.webGLVersion===2&&e.type===TYPES.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var n;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const s=this.renderer;if(this.initTextureType(e,r),(n=e.resource)!=null&&n.upload(s,e,r))r.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,o=e.realHeight,a=s.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,a.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:s}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),s.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const n=this.managedTextures.indexOf(e);n!==-1&&removeItems(this.managedTextures,n,1)}}updateTextureStyle(e){var s;const r=e._glTextures[this.CONTEXT_UID];!r||((e.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=WRAP_MODES.CLAMP:r.wrapMode=e.wrapMode,(s=e.resource)!=null&&s.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const s=this.gl;if(r.mipmap&&e.mipmap!==MIPMAP_MODES.ON_MANUAL&&s.generateMipmap(e.target),s.texParameteri(e.target,s.TEXTURE_WRAP_S,r.wrapMode),s.texParameteri(e.target,s.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){s.texParameteri(e.target,s.TEXTURE_MIN_FILTER,e.scaleMode===SCALE_MODES.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===SCALE_MODES.LINEAR){const i=Math.min(e.anisotropicLevel,s.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else s.texParameteri(e.target,s.TEXTURE_MIN_FILTER,e.scaleMode===SCALE_MODES.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(e.target,s.TEXTURE_MAG_FILTER,e.scaleMode===SCALE_MODES.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);const tempTransform=new Transform;class GenerateTextureSystem{constructor(e){this.renderer=e,this._tempMatrix=new Matrix}generateTexture(e,r){const{region:s,...n}=r||{},i=s||e.getLocalBounds(null,!0);i.width===0&&(i.width=1),i.height===0&&(i.height=1);const o=RenderTexture.create({width:i.width,height:i.height,...n});this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=e.transform;return e.transform=tempTransform,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color=typeof e.color=="string"?string2hex(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=hex2string(e),hex2rgb(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class ViewSystem{constructor(e){this.renderer=e}init(e){this.screen=new Rectangle(0,0,e.width,e.height),this.element=e.view||settings.ADAPTER.createCanvas(),this.resolution=e.resolution||settings.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const s=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=s,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",s,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);class PluginSystem{constructor(e){this.renderer=e,this.plugins={}}init(e){for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class SystemManager extends EventEmitter$1{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){var n;this.addRunners(...e.runners);const r=((n=e.priority)!=null?n:[]).filter(i=>e.systems[i]),s=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of s)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Runner(r)})}addSystem(e,r){const s=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=s,this._systemsHash[r]=s;for(const n in this.runners)this.runners[n].add(s);return this}emitWithCustomOptions(e,r){const s=Object.keys(this._systemsHash);e.items.forEach(n=>{const i=s.find(o=>this._systemsHash[o]===n);n[e.name](r[i])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}class StartupSystem{constructor(e){this.renderer=e}run(e){const r=this.renderer;r.emitWithCustomOptions(r.runners.init,e),e.hello&&console.log(`PixiJS 7.0.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);class TransformFeedbackSystem{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:s}=this,n=e._glTransformFeedbacks[s]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:s,renderer:n}=this;r&&n.shader.bind(r),s.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:s,CONTEXT_UID:n}=this,i=r.createTransformFeedback();e._glTransformFeedbacks[n]=i,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];!a||(s.buffer.update(a),a._glBuffers[n].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[n].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,r){const s=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&i.dispose(a,r))}!s||(r||n.deleteTransformFeedback(s),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(t){for(const e of renderers)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultFilterVertex=$defaultFilterVertex,_Renderer=class extends SystemManager{constructor(t){var s,n;super(),t=Object.assign({},settings.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const e={runners:["init","destroy","contextChange","reset","update","postrender","prerender","resize"],systems:_Renderer.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e);const r={hello:t.hello,_plugin:_Renderer.__plugins,background:{alpha:t.backgroundAlpha,color:(s=t.background)!=null?s:t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:(n=t.premultipliedAlpha)!=null?n:t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r)}static test(t){return t!=null&&t.forceCanvas?!1:isWebGLSupported()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return this.background.clearBeforeRender}get useContextAlpha(){return this.context.useContextAlpha}get preserveDrawingBuffer(){return this.context.preserveDrawingBuffer}get backgroundColor(){return this.background.color}set backgroundColor(t){this.background.color=t}get backgroundAlpha(){return this.background.color}set backgroundAlpha(t){this.background.alpha=t}get powerPreference(){return this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Renderer=_Renderer;Renderer.extension={type:ExtensionType.Renderer,priority:1};Renderer.__plugins={};Renderer.__systems={};extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class ViewableBuffer{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class BatchShaderGenerator{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const s=new Int32Array(e);for(let i=0;i<e;i++)s[i]=i;this.defaultGroupCache[e]=UniformGroup.from({uSamplers:s},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${e}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Program(this.vertexSrc,n)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[e]};return new Shader(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let s=0;s<e;s++)s>0&&(r+=`
else `),s<e-1&&(r+=`if(vTextureId < ${s}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class BatchGeometry extends Geometry{constructor(e=!1){super(),this._buffer=new Buffer$1(null,e,!1),this._indexBuffer=new Buffer$1(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}var defaultVertex=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;const _BatchRenderer=class extends ObjectRenderer{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State$1.for2d(),this.size=settings.SPRITE_BATCH_SIZE*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return defaultVertex}static get defaultFragmentTemplate(){return defaultFragment}setShaderGenerator({vertex:t=_BatchRenderer.defaultVertexSrc,fragment:e=_BatchRenderer.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(t,e)}contextChange(){const t=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=_BatchRenderer,r=this.size/4,s=Math.floor(r/this.MAX_TEXTURES)+1;for(;t.length<r;)t.push(new BatchDrawCall);for(;e.length<s;)e.push(new BatchTextureArray);for(let n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,MAX_TEXTURES:e}=this,r=_BatchRenderer._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,i=this.renderer.textureGC.count;let o=++BaseTexture._globalBatch,a=0,l=r[0],c=0;s.copyBoundTextures(n,e);for(let u=0;u<this._bufferSize;++u){const d=t[u];t[u]=null,d._batchEnabled!==o&&(l.count>=e&&(s.boundArray(l,n,o,e),this.buildDrawCalls(l,c,u),c=u,l=r[++a],++o),d._batchEnabled=o,d.touched=i,l.elements[l.count++]=d)}l.count>0&&(s.boundArray(l,n,o,e),this.buildDrawCalls(l,c,this._bufferSize),++a,++o);for(let u=0;u<n.length;u++)n[u]=null;BaseTexture._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:i,vertexSize:o}=this,a=_BatchRenderer._drawCallPool;let l=this._dcIndex,c=this._aIndex,u=this._iIndex,d=a[l];d.start=this._iIndex,d.texArray=t;for(let f=e;f<r;++f){const m=s[f],g=m._texture.baseTexture,y=premultiplyBlendMode[g.alphaMode?1:0][m.blendMode];s[f]=null,e<f&&d.blend!==y&&(d.size=u-d.start,e=f,d=a[++l],d.texArray=t,d.start=u),this.packInterleavedGeometry(m,n,i,c,u),c+=m.vertexData.length/2*o,u+=m.indices.length,d.blend=y}e<r&&(d.size=u-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;settings.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,s=_BatchRenderer._drawCallPool;let n=null;for(let i=0;i<t;i++){const{texArray:o,type:a,size:l,start:c,blend:u}=s[i];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=u,r.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=nextPow2(Math.ceil(t/8)),r=log2(e),s=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new ViewableBuffer(s*this.vertexSize*4)),n}getIndexBuffer(t){const e=nextPow2(Math.ceil(t/12)),r=log2(e),s=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(s)),n}packInterleavedGeometry(t,e,r,s,n){const{uint32View:i,float32View:o}=e,a=s/this.vertexSize,l=t.uvs,c=t.indices,u=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),m=f<1&&t._texture.baseTexture.alphaMode?premultiplyTint(t._tintRGB,f):t._tintRGB+(f*255<<24);for(let g=0;g<u.length;g+=2)o[s++]=u[g],o[s++]=u[g+1],o[s++]=l[g],o[s++]=l[g+1],i[s++]=m,o[s++]=d;for(let g=0;g<c.length;g++)r[n++]=a+c[g]}};let BatchRenderer=_BatchRenderer;BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin};BatchRenderer._drawCallPool=[];BatchRenderer._textureArrayPool=[];extensions$1.add(BatchRenderer);class GLBuffer{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:s}=this,n=e._glBuffers[s]||this.createGLBuffer(e);r.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:s,CONTEXT_UID:n}=this;if(this.boundBufferBases[r]!==e){const i=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[r]=e,s.bindBufferBase(s.UNIFORM_BUFFER,r,i.buffer)}}bindBufferRange(e,r,s){const{gl:n,CONTEXT_UID:i}=this;s=s||0;const o=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,r||0,o.buffer,s*256,256)}update(e){const{gl:r,CONTEXT_UID:s}=this,n=e._glBuffers[s]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,r.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const i=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,i)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const s=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),s&&(r||n.deleteBuffer(s.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let s=0;s<r.length;s++)this.dispose(this.managedBuffers[r[s]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:s}=this;return e._glBuffers[r]=new GLBuffer(s.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class MultisampleSystem{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const s=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,s)}else{const s=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,s)}r>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:r>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:r>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class ObjectRendererSystem{constructor(e){this.renderer=e}render(e,r){const s=this.renderer;let n,i,o,a;if(r&&(n=r.renderTexture,i=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!n,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(n||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}s.renderTexture.bind(n),s.batch.currentRenderer.start(),(i!=null?i:s.background.clearBeforeRender)&&s.renderTexture.clear(),e.render(s),s.batch.currentRenderer.flush(),n&&(r.blit&&s.framebuffer.blit(),n.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);var fragment$2=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$2,e),this.alpha=1}_loadMatrix(e,r=!1){let s=e;r&&(this._multiply(s,this.uniforms.m,e),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(e,r,s){return e[0]=r[0]*s[0]+r[1]*s[5]+r[2]*s[10]+r[3]*s[15],e[1]=r[0]*s[1]+r[1]*s[6]+r[2]*s[11]+r[3]*s[16],e[2]=r[0]*s[2]+r[1]*s[7]+r[2]*s[12]+r[3]*s[17],e[3]=r[0]*s[3]+r[1]*s[8]+r[2]*s[13]+r[3]*s[18],e[4]=r[0]*s[4]+r[1]*s[9]+r[2]*s[14]+r[3]*s[19]+r[4],e[5]=r[5]*s[0]+r[6]*s[5]+r[7]*s[10]+r[8]*s[15],e[6]=r[5]*s[1]+r[6]*s[6]+r[7]*s[11]+r[8]*s[16],e[7]=r[5]*s[2]+r[6]*s[7]+r[7]*s[12]+r[8]*s[17],e[8]=r[5]*s[3]+r[6]*s[8]+r[7]*s[13]+r[8]*s[18],e[9]=r[5]*s[4]+r[6]*s[9]+r[7]*s[14]+r[8]*s[19]+r[9],e[10]=r[10]*s[0]+r[11]*s[5]+r[12]*s[10]+r[13]*s[15],e[11]=r[10]*s[1]+r[11]*s[6]+r[12]*s[11]+r[13]*s[16],e[12]=r[10]*s[2]+r[11]*s[7]+r[12]*s[12]+r[13]*s[17],e[13]=r[10]*s[3]+r[11]*s[8]+r[12]*s[13]+r[13]*s[18],e[14]=r[10]*s[4]+r[11]*s[9]+r[12]*s[14]+r[13]*s[19]+r[14],e[15]=r[15]*s[0]+r[16]*s[5]+r[17]*s[10]+r[18]*s[15],e[16]=r[15]*s[1]+r[16]*s[6]+r[17]*s[11]+r[18]*s[16],e[17]=r[15]*s[2]+r[16]*s[7]+r[17]*s[12]+r[18]*s[17],e[18]=r[15]*s[3]+r[16]*s[8]+r[17]*s[13]+r[18]*s[18],e[19]=r[15]*s[4]+r[16]*s[9]+r[17]*s[14]+r[18]*s[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const s=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(s,r)}tint(e,r){const s=e>>16&255,n=e>>8&255,i=e&255,o=[s/255,0,0,0,0,0,n/255,0,0,0,0,0,i/255,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const s=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(s,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const s=Math.cos(e),n=Math.sin(e),i=Math.sqrt,o=1/3,a=i(o),l=s+(1-s)*o,c=o*(1-s)-a*n,u=o*(1-s)+a*n,d=o*(1-s)+a*n,f=s+o*(1-s),m=o*(1-s)-a*n,g=o*(1-s)-a*n,y=o*(1-s)+a*n,b=s+o*(1-s),x=[l,c,u,0,0,d,f,m,0,0,g,y,b,0,0,0,0,0,1,0];this._loadMatrix(x,r)}contrast(e,r){const s=(e||0)+1,n=-.5*(s-1),i=[s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0];this._loadMatrix(i,r)}saturate(e=0,r){const s=e*2/3+1,n=(s-1)*-.5,i=[s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0];this._loadMatrix(i,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,s,n,i){e=e||.2,r=r||.15,s=s||16770432,n=n||3375104;const o=(s>>16&255)/255,a=(s>>8&255)/255,l=(s&255)/255,c=(n>>16&255)/255,u=(n>>8&255)/255,d=(n&255)/255,f=[.3,.59,.11,0,0,o,a,l,e,0,c,u,d,r,0,o-c,a-u,l-d,0,0];this._loadMatrix(f,i)}night(e,r){e=e||.1;const s=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(s,r)}predator(e,r){const s=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(s,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;settings.SORTABLE_CHILDREN=!1;class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(e=e||new Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:s,b:n,c:i,d:o,tx:a,ty:l}=e,c=s*r.x+i*r.y+a,u=n*r.x+o*r.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let r=this.minX,s=this.minY,n=this.maxX,i=this.maxY,o=e[0],a=e[1];r=o<r?o:r,s=a<s?a:s,n=o>n?o:n,i=a>i?a:i,o=e[2],a=e[3],r=o<r?o:r,s=a<s?a:s,n=o>n?o:n,i=a>i?a:i,o=e[4],a=e[5],r=o<r?o:r,s=a<s?a:s,n=o>n?o:n,i=a>i?a:i,o=e[6],a=e[7],r=o<r?o:r,s=a<s?a:s,n=o>n?o:n,i=a>i?a:i,this.minX=r,this.minY=s,this.maxX=n,this.maxY=i}addFrame(e,r,s,n,i){this.addFrameMatrix(e.worldTransform,r,s,n,i)}addFrameMatrix(e,r,s,n,i){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty;let f=this.minX,m=this.minY,g=this.maxX,y=this.maxY,b=o*r+l*s+u,x=a*r+c*s+d;f=b<f?b:f,m=x<m?x:m,g=b>g?b:g,y=x>y?x:y,b=o*n+l*s+u,x=a*n+c*s+d,f=b<f?b:f,m=x<m?x:m,g=b>g?b:g,y=x>y?x:y,b=o*r+l*i+u,x=a*r+c*i+d,f=b<f?b:f,m=x<m?x:m,g=b>g?b:g,y=x>y?x:y,b=o*n+l*i+u,x=a*n+c*i+d,f=b<f?b:f,m=x<m?x:m,g=b>g?b:g,y=x>y?x:y,this.minX=f,this.minY=m,this.maxX=g,this.maxY=y}addVertexData(e,r,s){let n=this.minX,i=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<s;l+=2){const c=e[l],u=e[l+1];n=c<n?c:n,i=u<i?u:i,o=c>o?c:o,a=u>a?u:a}this.minX=n,this.minY=i,this.maxX=o,this.maxY=a}addVertices(e,r,s,n){this.addVerticesMatrix(e.worldTransform,r,s,n)}addVerticesMatrix(e,r,s,n,i=0,o=i){const a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,f=e.ty;let m=this.minX,g=this.minY,y=this.maxX,b=this.maxY;for(let x=s;x<n;x+=2){const _=r[x],w=r[x+1],v=a*_+c*w+d,S=u*w+l*_+f;m=Math.min(m,v-i),y=Math.max(y,v+i),g=Math.min(g,S-o),b=Math.max(b,S+o)}this.minX=m,this.minY=g,this.maxX=y,this.maxY=b}addBounds(e){const r=this.minX,s=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<s?e.minY:s,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,r){const s=e.minX>r.minX?e.minX:r.minX,n=e.minY>r.minY?e.minY:r.minY,i=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(s<=i&&n<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=i>c?i:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const s=e.minX>r.x?e.minX:r.x,n=e.minY>r.y?e.minY:r.y,i=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(s<=i&&n<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=s<a?s:a,this.minY=n<l?n:l,this.maxX=i>c?i:c,this.maxY=o>u?o:u}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,s,n,i,o){e-=i,r-=o,s+=i,n+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>n?this.maxY:n}}class DisplayObject extends EventEmitter$1{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let s=0;s<r.length;++s){const n=r[s];Object.defineProperty(DisplayObject.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Rectangle),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const r=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=s,this.transform=r,this._bounds=n,this._bounds.updateID+=this._boundsID-i,o}toGlobal(e,r,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,s,n){return r&&(e=r.toGlobal(e,s,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,s)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,s=1,n=1,i=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=r,this.scale.x=s||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(e){this.transform.rotation=e*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;function sortChildren$1(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}class Container extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=settings.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const s=this.getChildIndex(e),n=this.getChildIndex(r);this.children[s]=r,this.children[n]=e,this.onChildrenChange(s<n?s:n)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const s=this.getChildIndex(e);removeItems(this.children,s,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],s=this.children.indexOf(r);if(s===-1)return null;r.parent=null,r.transform._parentID=-1,removeItems(this.children,s,1),this._boundsID++,this.onChildrenChange(s),r.emit("removed",this),this.emit("childRemoved",r,this,s)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const s=e,n=r,i=n-s;let o;if(i>0&&i<=n){o=this.children.splice(s,i);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,s=this.children.length;r<s;++r){const n=this.children[r];n._lastSortedIndex=r,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(sortChildren$1),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const s=this.children[e];s.visible&&s.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const s=r._mask.isMaskData?r._mask.maskObject:r._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(r._bounds,s._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const s=super.getLocalBounds(e);if(!r)for(let n=0,i=this.children.length;n<i;++n){const o=this.children[n];o.visible&&o.updateTransform()}return s}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let s,n;if(this.cullArea?(s=this.cullArea,n=this.worldTransform):this._render!==Container.prototype._render&&(s=this.getBounds(!0)),s&&r.intersects(s,n))this._render(e);else if(this.cullArea)return;for(let i=0,o=this.children.length;i<o;++i){const a=this.children[i],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||((r=this.filters)==null?void 0:r.length))this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,n=this.children.length;s<n;++s)this.children[s].render(e)}}renderAdvanced(e){var i,o,a;const r=this.filters,s=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<r.length;l++)r[l].enabled&&this._enabledFilters.push(r[l])}const n=r&&((i=this._enabledFilters)==null?void 0:i.length)||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==MASK_TYPES.NONE));if(n&&e.batch.flush(),r&&((o=this._enabledFilters)==null?void 0:o.length)&&e.filter.push(this,this._enabledFilters),s&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}n&&e.batch.flush(),s&&e.mask.pop(this),r&&((a=this._enabledFilters)==null?void 0:a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,s=this.removeChildren(0,this.children.length);if(r)for(let n=0;n<s.length;++n)s[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}}Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(e){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,s=r.a,n=r.b,i=r.c,o=r.d,a=r.tx,l=r.ty,c=this.vertexData,u=e.trim,d=e.orig,f=this._anchor;let m=0,g=0,y=0,b=0;if(u?(g=u.x-f._x*d.width,m=g+u.width,b=u.y-f._y*d.height,y=b+u.height):(g=-f._x*d.width,m=g+d.width,b=-f._y*d.height,y=b+d.height),c[0]=s*g+i*b+a,c[1]=o*b+n*g+l,c[2]=s*m+i*b+a,c[3]=o*b+n*m+l,c[4]=s*m+i*y+a,c[5]=o*y+n*m+l,c[6]=s*g+i*y+a,c[7]=o*y+n*g+l,this._roundPixels){const x=settings.RESOLUTION;for(let _=0;_<c.length;++_)c[_]=Math.round(c[_]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,s=e.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,l=i.c,c=i.d,u=i.tx,d=i.ty,f=-n._x*s.width,m=f+s.width,g=-n._y*s.height,y=g+s.height;r[0]=o*f+l*g+u,r[1]=c*g+a*f+d,r[2]=o*m+l*g+u,r[3]=c*g+a*m+d,r[4]=o*m+l*y+u,r[5]=c*y+a*m+d,r[6]=o*f+l*y+u,r[7]=c*y+a*f+d}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,tempPoint$1);const r=this._texture.orig.width,s=this._texture.orig.height,n=-r*this.anchor.x;let i=0;return tempPoint$1.x>=n&&tempPoint$1.x<n+r&&(i=-s*this.anchor.y,tempPoint$1.y>=i&&tempPoint$1.y<i+s)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(e,r){const s=e instanceof Texture?e:Texture.from(e,r);return new Sprite(s)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=sign(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=sign(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new CacheData),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};DisplayObject.prototype._initCachedDisplayObject=function(e){var f,m,g;if((f=this._cacheData)!=null&&f.sprite)return;const r=this.alpha;this.alpha=1,e.batch.flush();const s=this.getLocalBounds(null,!0).clone();if((m=this.filters)!=null&&m.length){const y=this.filters[0].padding;s.pad(y)}s.ceil(settings.RESOLUTION);const n=e.renderTexture.current,i=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=RenderTexture.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(g=this.cacheAsBitmapMultisample)!=null?g:e.multisample}),c=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=c,BaseTexture.addToCache(l.baseTexture,c),Texture.addToCache(l,c);const u=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(n,i,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const d=new Sprite(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(s.x/s.width),d.anchor.y=-(s.y/s.height),d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};DisplayObject.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(e){var u;if((u=this._cacheData)!=null&&u.sprite)return;const r=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const n=e.canvasContext.activeContext,i=e._projTransform;r.ceil(settings.RESOLUTION);const o=RenderTexture.create({width:r.width,height:r.height}),a=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=a,BaseTexture.addToCache(o.baseTexture,a),Texture.addToCache(o,a);const l=_tempMatrix;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=r.x,l.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=n,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const c=new Sprite(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(r.x/r.width),c.anchor.y=-(r.y/r.height),c.alpha=s,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(e,r){for(let s=0,n=this.children.length;s<n;s++)if(this.children[s].name===e)return this.children[s];if(r)for(let s=0,n=this.children.length;s<n;s++){const i=this.children[s];if(!i.getChildByName)continue;const o=i.getChildByName(e,!0);if(o)return o}return null};DisplayObject.prototype.getGlobalPosition=function(e=new Point,r=!1){return this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};class FederatedEvent{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,s,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,s,n,i,o,a,l,c,u,d,f,m,g,y){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(e){this.dispatch=new EventEmitter$1,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((s,n)=>s.priority-n.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let s=0,n=r.length;s<n;s++)r[s].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){const s=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,tempHitLocation.set(e,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,r){if(!e.target)return;const s=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,i=s.length-1;n<i;n++)if(e.currentTarget=s[n],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let n=s.length-2;n>=0;n--)if(e.currentTarget=s[n],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,s=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const n=s.children;if(n)for(let i=0;i<n.length;i++)this.all(e,r,n[i]);e.currentTarget=s,this.notifyTarget(e,r)}propagationPath(e){const r=[e];for(let s=0;s<PROPAGATION_LIMIT&&e!==this.rootTarget;s++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestRecursive(e,r,s,n,i){if(!e||!e.visible||i(e,s))return null;if(e.interactiveChildren&&e.children){const o=e.children;for(let a=o.length-1;a>=0;a--){const l=o[a],c=this.hitTestRecursive(l,r||l.interactive,s,n,i);if(c){if(c.length>0&&!c[c.length-1].parent)continue;return(c.length>0||e.interactive)&&c.push(e),c}}}return r&&n(e,s)?e.interactive?[e]:[]:null}hitPruneFn(e,r){var s;if(e.hitArea&&(e.worldTransform.applyInverse(r,tempLocalMapping),!e.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!((s=n.containsPoint)!=null&&s.call(n,r)))return!0}return!1}hitTestFn(e,r){return e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){r=r!=null?r:e.type;const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const n=r.button===2;this.dispatchEvent(r,n?"rightdown":"mousedown")}const s=this.trackingData(e.pointerId);s.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var a;if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e),s=r.pointerType==="mouse"||r.pointerType==="pen",n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets&&i!==r.target){const l=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,l,i);if(this.dispatchEvent(c,"pointerout"),s&&this.dispatchEvent(c,"mouseout"),!r.composedPath().includes(i)){const u=this.createPointerEvent(e,"pointerleave",i);for(u.eventPhase=u.AT_TARGET;u.target&&!r.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),s&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(c)}if(i!==r.target){const l=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(r,l);this.dispatchEvent(c,"pointerover"),s&&this.dispatchEvent(c,"mouseover");let u=i==null?void 0:i.parent;for(;u&&u!==this.rootTarget.parent&&u!==r.target;)u=u.parent;if(!u||u===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==i&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),s&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](r,"pointermove"),r.pointerType==="touch"&&this[o](r,"touchmove"),s&&(this[o](r,"mousemove"),this.cursor=(a=r.target)==null?void 0:a.cursor),n.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),s=this.createPointerEvent(e),n=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const i=this.clonePointerEvent(s,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;r.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(i)}mapPointerOut(e){if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const s=e.pointerType==="mouse"||e.pointerType==="pen",n=this.findMountedTarget(r.overTargets),i=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(i),s&&this.dispatchEvent(i,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(i),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),s=this.createPointerEvent(e);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.dispatchEvent(s,a?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=i;if(i&&!s.composedPath().includes(i)){let a=i;for(;a&&!s.composedPath().includes(a);){if(s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete n.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(s,"click");a.target=o,a.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const l=n.clicksByButton[e.button];l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"?this.dispatchEvent(a,"click"):a.pointerType==="touch"&&this.dispatchEvent(a,"tap"),this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(s)}mapPointerUpOutside(e){if(!(e instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(s){let i=s;for(;i;)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),i=i.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let s=1;s<e.length&&e[s].parent===r;s++)r=e[s];return r}createPointerEvent(e,r,s){const n=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=s!=null?s:this.hitTest(n.global.x,n.global.y),typeof r=="string"&&(n.type=r),n}createWheelEvent(e){const r=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const s=this.allocateEvent(FederatedPointerEvent);return s.nativeEvent=e.nativeEvent,s.originalEvent=e.originalEvent,this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.target=e.target,s.path=e.composedPath().slice(),s.type=r!=null?r:s.type,s}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof FederatedPointerEvent&&r instanceof FederatedPointerEvent&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof FederatedMouseEvent&&r instanceof FederatedMouseEvent&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const s=e.currentTarget._events[r];if(!!s)if("fn"in s)s.fn.call(s.context,e);else for(let n=0,i=s.length;n<i&&!e.propagationImmediatelyStopped;n++)s[n].fn.call(s[n].context,e)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class EventSystem{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new EventBoundary(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const s=this.cursorStyles[e];if(s)switch(typeof s){case"string":r&&(this.domElement.style.cursor=s);break;case"function":s(e);break;case"object":r&&Object.assign(this.domElement.style,s);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let s=0,n=r.length;s<n;s++){const i=r[s],o=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const r=this.normalizeToPointerData(e);for(let s=0,n=r.length;s<n;s++){const i=this.bootstrapEvent(this.rootPointerEvent,r[s]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const s=r!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let i=0,o=n.length;i<o;i++){const a=this.bootstrapEvent(this.rootPointerEvent,n[i]);a.type+=s,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const r=this.normalizeToPointerData(e);for(let s=0,n=r.length;s<n;s++){const i=this.bootstrapEvent(this.rootPointerEvent,r[s]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,s){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;e.x=(r-n.left)*(this.domElement.width/n.width)*i,e.y=(s-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let s=0,n=e.changedTouches.length;s<n;s++){const i=e.changedTouches[s];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,r.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const s=e;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=MOUSE_POINTER_ID),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,r.push(s)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=TOUCH_TO_POINTER[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}}EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]};extensions$1.add(EventSystem);const FederatedDisplayObject={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const s=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,n=typeof e=="function"?void 0:e;t=s?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,n)},removeEventListener(t,e,r){const s=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,n=typeof e=="function"?void 0:e;t=s?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,n)},dispatchEvent(t){if(!(t instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${DIV_TOUCH_SIZE}px`,r.style.height=`${DIV_TOUCH_SIZE}px`,r.style.position="absolute",r.style.top=`${DIV_TOUCH_POS_X}px`,r.style.left=`${DIV_TOUCH_POS_Y}px`,r.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${DIV_HOOK_SIZE}px`,e.style.height=`${DIV_HOOK_SIZE}px`,e.style.position="absolute",e.style.top=`${DIV_HOOK_POS_X}px`,e.style.left=`${DIV_HOOK_POS_Y}px`,e.style.zIndex=DIV_HOOK_ZINDEX.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let s=0;s<r.length;s++)this.updateAccessibleObjects(r[s])}update(){const e=performance.now();if(isMobile.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:s,width:n,height:i}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=n/o*l,u=i/a*l;let d=this.div;d.style.left=`${r}px`,d.style.top=`${s}px`,d.style.width=`${o}px`,d.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const m=this.children[f];if(m.renderId!==this.renderId)m._accessibleActive=!1,removeItems(this.children,f,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,f--;else{d=m._accessibleDiv;let g=m.hitArea;const y=m.worldTransform;m.hitArea?(d.style.left=`${(y.tx+g.x*y.a)*c}px`,d.style.top=`${(y.ty+g.y*y.d)*u}px`,d.style.width=`${g.width*y.a*c}px`,d.style.height=`${g.height*y.d*u}px`):(g=m.getBounds(),this.capHitArea(g),d.style.left=`${g.x*c}px`,d.style.top=`${g.y*u}px`,d.style.width=`${g.width*c}px`,d.style.height=`${g.height*u}px`,d.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(d.title=m.accessibleTitle),d.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&d.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==d.title||m.tabIndex!==d.tabIndex)&&(d.title=m.accessibleTitle,d.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:s}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>s&&(e.height=s-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${DIV_TOUCH_SIZE}px`,r.style.height=`${DIV_TOUCH_SIZE}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=DIV_TOUCH_ZINDEX.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:s}=e.target,n=this.renderer.events.rootBoundary,i=Object.assign(new FederatedEvent(n),{target:s});n.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>n.dispatchEvent(i,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class{constructor(t){this.stage=new Container,t=Object.assign({forceCanvas:!1},t),this.renderer=autoDetectRenderer(t),_Application._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=_Application._plugins.slice(0);r.reverse(),r.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Application=_Application;Application._plugins=[];extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,s;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:i}=this._resizeTo;r=n,s=i}this.renderer.resize(r,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);class BackgroundLoader{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<r;s++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const convertToList=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"?e(r):r):t);function processX(t,e,r,s,n){const i=e[r];for(let o=0;o<i.length;o++){const a=i[o];r<e.length-1?processX(t.replace(s[r],a),e,r+1,s,n):n.push(t.replace(s[r],a))}}function createStringVariations(t){const e=/\{(.*?)\}/g,r=t.match(e),s=[];if(r){const n=[];r.forEach(i=>{const o=i.substring(1,i.length-1).split(",");n.push(o)}),processX(t,n,0,r,s)}else s.push(t);return s}const isSingleItem=t=>!Array.isArray(t);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){return this._cache.get(e)}set(e,r){const s=convertToList(e);let n;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){n=l.getCacheableAssets(s,r);break}}n||(n={},s.forEach(a=>{n[a]=r}));const i=Object.keys(n),o={cacheKeys:i,keys:s};if(s.forEach(a=>{this._cacheMap.set(a,o)}),i.forEach(a=>{this._cache.has(a)&&this._cache.get(a),this._cache.set(a,n[a])}),r instanceof Texture){const a=r;s.forEach(l=>{a.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(a.baseTexture,l),Texture.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return;const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,r){const s={promise:null,parser:null};return s.promise=(async()=>{var i,o;let n=null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((i=l.test)==null?void 0:i.call(l,e,r,this))){n=await l.load(e,r,this),s.parser=l;break}}if(!s.parser)return null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((o=l.testParse)==null?void 0:o.call(l,n,r,this))&&(n=await l.parse(n,r,this)||n,s.parser=l)}return n})(),s}async load(e,r){let s=0;const n={},i=isSingleItem(e),o=convertToList(e,c=>({src:c})),a=o.length,l=o.map(async c=>{const u=path.toAbsolute(c.src);if(!n[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),n[c.src]=await this.promiseCache[u].promise,r&&r(++s/a)}catch(d){throw delete this.promiseCache[u],delete n[c.src],new Error(`[Loader.load] Failed to load ${u}.
${d}`)}});return await Promise.all(l),i?n[o[0].src]:n}async unload(e){const s=convertToList(e,n=>({src:n})).map(async n=>{var a,l;const i=path.toAbsolute(n.src),o=this.promiseCache[i];if(o){const c=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,c,n,this),delete this.promiseCache[i]}});await Promise.all(s)}get parsers(){return this._parsers}}class Resolver{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(e){this._manifest,this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const s=[];Array.isArray(r)?r.forEach(n=>{typeof n.name=="string"?s.push(n.name):s.push(...n.name),this.add(n.name,n.srcs)}):Object.keys(r).forEach(n=>{s.push(n),this.add(n,r[n])}),this._bundles[e]=s}add(e,r,s){const n=convertToList(e);n.forEach(o=>{this._assetMap[o]}),Array.isArray(r)||(typeof r=="string"?r=createStringVariations(r):r=[r]);const i=r.map(o=>{var l;let a=o;if(typeof o=="string"){let c=!1;for(let u=0;u<this._parsers.length;u++){const d=this._parsers[u];if(d.test(o)){a=d.parse(o),c=!0;break}}c||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=n),(this._basePath||this._rootPath)&&(a.src=path.toAbsolute(a.src,this._basePath,this._rootPath)),a.data=(l=a.data)!=null?l:s,a});n.forEach(o=>{this._assetMap[o]=i})}resolveBundle(e){const r=isSingleItem(e);e=convertToList(e);const s={};return e.forEach(n=>{const i=this._bundles[n];i&&(s[n]=this.resolve(i))}),r?s[e[0]]:s}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const s={};for(const n in r)s[n]=r[n].src;return s}return r.src}resolve(e){const r=isSingleItem(e);e=convertToList(e);const s={};return e.forEach(n=>{var i;if(!this._resolverHash[n])if(this._assetMap[n]){let o=this._assetMap[n];const a=this._getPreferredOrder(o),l=o[0];a==null||a.priority.forEach(c=>{a.params[c].forEach(u=>{const d=o.filter(f=>f[c]?f[c]===u:!1);d.length&&(o=d)})}),this._resolverHash[n]=(i=o[0])!=null?i:l}else{let o=n;(this._basePath||this._rootPath)&&(o=path.toAbsolute(o,this._basePath,this._rootPath)),this._resolverHash[n]={src:o}}s[n]=this._resolverHash[n]}),r?s[e[0]]:s}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const s=e[0],n=this._preferredOrder.find(i=>i.params.format.includes(s.format));if(n)return n}return this._preferredOrder[0]}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var i,o,a,l;if(this._initialized)return;if(this._initialized=!0,e.basePath&&(this.resolver.basePath=e.basePath),e.manifest){let c=e.manifest;typeof c=="string"&&(c=await this.load(c)),this.resolver.addManifest(c)}const r=(o=(i=e.texturePreference)==null?void 0:i.resolution)!=null?o:1,s=typeof r=="number"?[r]:r;let n=[];if((a=e.texturePreference)!=null&&a.format){const c=(l=e.texturePreference)==null?void 0:l.format;n=typeof c=="string"?[c]:c;for(const u of this._detections)await u.test()||(n=await u.remove(n))}else for(const c of this._detections)await c.test()&&(n=await c.add(n));this.resolver.prefer({params:{format:n,resolution:s}})}add(e,r,s){this.resolver.add(e,r,s)}async load(e,r){this._initialized||await this.init();const s=isSingleItem(e),n=convertToList(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):a),i=this.resolver.resolve(n),o=await this._mapLoadToResolve(i,r);return s?o[n[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let s=!1;typeof e=="string"&&(s=!0,e=[e]);const n=this.resolver.resolveBundle(e),i={},o=Object.keys(n);let a=0,l=0;const c=()=>{r==null||r(++a/l)},u=o.map(d=>{const f=n[d];return l+=Object.keys(f).length,this._mapLoadToResolve(f,c).then(m=>{i[d]=m})});return await Promise.all(u),s?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Cache.get(e);const r={};for(let s=0;s<e.length;s++)r[s]=Cache.get(e[s]);return r}async _mapLoadToResolve(e,r){const s=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(s,r);this._backgroundLoader.active=!0;const o={};return s.forEach((a,l)=>{const c=i[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[n[l]]=c,Cache.set(u,c)}),o}async unload(e){this._initialized||await this.init();const r=convertToList(e).map(n=>typeof n!="string"?n.src:n),s=this.resolver.resolve(r);await this._unloadFromResolved(s)}async unloadBundle(e){this._initialized||await this.init(),e=convertToList(e);const r=this.resolver.resolveBundle(e),s=Object.keys(r).map(n=>this._unloadFromResolved(r[n]));await Promise.all(s)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(s=>{Cache.remove(s.src)}),await this.loader.unload(r)}get detections(){return this._detections}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,t=>{const e=t.ref;Object.entries(assetKeyMap).filter(([r])=>!!e[r]).forEach(([r,s])=>{var n;return extensions$1.add(Object.assign(e[r],{extension:(n=e[r].extension)!=null?n:s}))})},t=>{const e=t.ref;Object.keys(assetKeyMap).filter(r=>!!e[r]).forEach(r=>extensions$1.remove(e[r]))});const cacheTextureArray={extension:ExtensionType.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof Texture),getCacheableAssets:(t,e)=>{const r={};return t.forEach(s=>{e.forEach((n,i)=>{r[s+(i===0?"":i+1)]=n})}),r}};extensions$1.add(cacheTextureArray);var LoaderParserPriority=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(LoaderParserPriority||{});const loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(t){return path.extname(t).includes(".json")},async load(t){return await(await settings.ADAPTER.fetch(t)).json()}};extensions$1.add(loadJson);const loadTxt={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(t){return path.extname(t).includes(".txt")},async load(t){return await(await settings.ADAPTER.fetch(t)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFonts=["woff","woff2","ttf","otf"];function getFontFamilyName(t){const e=path.extname(t);return path.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(t){const r=t.split("?")[0].split(".").pop();return validFonts.includes(r)},async load(t,e){var s,n,i,o,a,l;if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=settings.ADAPTER.getFontFaceSet();if(r){const c=[],u=(n=(s=e.data)==null?void 0:s.family)!=null?n:getFontFamilyName(t),d=(a=(o=(i=e.data)==null?void 0:i.weights)==null?void 0:o.filter(m=>validWeights.includes(m)))!=null?a:["normal"],f=(l=e.data)!=null?l:{};for(let m=0;m<d.length;m++){const g=d[m],y=new FontFace(u,`url(${t})`,{...f,weight:g});await y.load(),r.add(y),c.push(y)}return c.length===1?c[0]:c}return null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>settings.ADAPTER.getFontFaceSet().delete(e))}};extensions$1.add(loadWebFont);let UUID=0,MAX_WORKERS;const WHITE_PNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",checkImageBitmapCode={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${WHITE_PNG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},workerCode={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let workerURL;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const r=URL.createObjectURL(new Blob([checkImageBitmapCode.code],{type:"application/javascript"})),s=new Worker(r);s.addEventListener("message",n=>{s.terminate(),URL.revokeObjectURL(r),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<MAX_WORKERS&&(workerURL||(workerURL=URL.createObjectURL(new Blob([workerCode.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(workerURL),e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const s=new Promise((n,i)=>{this.queue.push({id:e,arguments:r,resolve:n,reject:i})});return this.next(),s}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),s=r.id;this.resolveHash[UUID]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:UUID++,id:s})}}const WorkerManager=new WorkerManagerClass;function checkExtension(t,e){const r=t.split("?")[0],s=path.extname(r).toLowerCase();return Array.isArray(e)?e.includes(s.toLowerCase()):s.toLowerCase()===e}function createTexture(t,e,r){const s=new Texture(t);return s.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),s}const validImages$1=[".jpg",".png",".jpeg",".avif",".webp"];async function loadImageBitmap(t){const e=await settings.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const loadTextures={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0},test(t){let e=!1;for(let r=0;r<validImages$1.length;r++)if(t.startsWith(`data:image/${validImages$1[r].slice(1)}`)){e=!0;break}return e||checkExtension(t,validImages$1)},async load(t,e,r){let s=null;globalThis.createImageBitmap?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?s=await WorkerManager.loadImageBitmap(t):s=await loadImageBitmap(t):s=await new Promise(i=>{s=new Image,s.crossOrigin="anonymous",s.src=t,s.complete?i(s):s.onload=()=>{i(s)}});const n=new BaseTexture(s,{resolution:getResolutionOfUrl(t),...e.data});return n.resource.src=t,createTexture(n,r,t)},unload(t){t.destroy(!0)}};extensions$1.add(loadTextures);ExtensionType.LoadParser,LoaderParserPriority.High,loadTextures.unload;const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:t=>{var e,r;return{resolution:parseFloat((r=(e=settings.RETINA_PREFIX.exec(t))==null?void 0:e[1])!=null?r:"1"),format:t.split(".").pop(),src:t}}};extensions$1.add(resolveTextureUrl);const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await settings.ADAPTER.fetch(t).then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await settings.ADAPTER.fetch(t).then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...imageFormats],remove:async t=>t.filter(e=>!imageFormats.includes(e))};extensions$1.add(detectDefaults);var INTERNAL_FORMATS=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};class BlobResource extends BufferResource{constructor(e,r={width:1,height:1,autoLoad:!0}){let s,n;typeof e=="string"?(s=e,n=new Uint8Array):(s=null,n=e),super(n,r),this.origin=s,this.buffer=n?new ViewableBuffer(n):null,this.origin&&r.autoLoad!==!1&&this.load(),n!=null&&n.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}async load(){const s=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(s),this.buffer=new ViewableBuffer(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),this}}class CompressedTextureResource extends BlobResource{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||CompressedTextureResource._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,s){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:u,levelBuffer:d}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,l,this.format,c,u,0,d)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,r,s,n,i,o,a){const l=new Array(s);let c=e.byteOffset,u=o,d=a,f=u+n-1&~(n-1),m=d+i-1&~(i-1),g=f*m*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];for(let y=0;y<s;y++)l[y]={levelID:y,levelWidth:s>1?u:f,levelHeight:s>1?d:m,levelBuffer:new Uint8Array(e.buffer,c,g)},c+=g,u=u>>1||1,d=d>>1||1,f=u+n-1&~(n-1),m=d+i-1&~(i-1),g=f*m*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];return l}}let storedGl,extensions;function getCompressedTextureExtensions(){extensions={s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const e=settings.ADAPTER.createCanvas().getContext("webgl");return e?(storedGl=e,!0):!1},add:async t=>{extensions||getCompressedTextureExtensions();const e=[];for(const r in extensions)!extensions[r]||e.push(r);return[...e,...t]},remove:async t=>(extensions||getCompressedTextureExtensions(),t.filter(e=>!(e in extensions)))};extensions$1.add(detectCompressedTextures);const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={[70]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function parseDDS(t){const e=new Uint32Array(t);if(e[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(t,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),n=s[DDS_FIELDS.HEIGHT],i=s[DDS_FIELDS.WIDTH],o=s[DDS_FIELDS.MIPMAP_COUNT],a=new Uint32Array(t,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),l=a[PF_FLAGS];if(l&DDPF_FOURCC){const c=a[DDS_PF_FIELDS.FOURCC];if(c!==FOURCC_DX10){const w=FOURCC_TO_FORMAT[c],v=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,S=new Uint8Array(t,v);return[new CompressedTextureResource(S,{format:w,width:i,height:n,levels:o})]}const u=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,d=new Uint32Array(e.buffer,u,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),f=d[DDS_DX10_FIELDS.DXGI_FORMAT],m=d[DDS_DX10_FIELDS.RESOURCE_DIMENSION],g=d[DDS_DX10_FIELDS.MISC_FLAG],y=d[DDS_DX10_FIELDS.ARRAY_SIZE],b=DXGI_TO_FORMAT[f];if(b===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(g===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,_=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(y===1)x.push(new Uint8Array(t,_));else{const w=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[b];let v=0,S=i,M=n;for(let A=0;A<o;A++){const X=Math.max(1,S+3&-4),F=Math.max(1,M+3&-4),O=X*F*w;v+=O,S=S>>>1,M=M>>>1}let C=_;for(let A=0;A<y;A++)x.push(new Uint8Array(t,C,v)),C+=v}return x.map(w=>new CompressedTextureResource(w,{format:b,width:i,height:n,levels:o}))}throw l&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):l&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):l&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(t,e,r=!1){const s=new DataView(e);if(!validate$1(t,s))return null;const n=s.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,i=s.getUint32(KTX_FIELDS.GL_TYPE,n),o=s.getUint32(KTX_FIELDS.GL_FORMAT,n),a=s.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,n),l=s.getUint32(KTX_FIELDS.PIXEL_WIDTH,n),c=s.getUint32(KTX_FIELDS.PIXEL_HEIGHT,n)||1,u=s.getUint32(KTX_FIELDS.PIXEL_DEPTH,n)||1,d=s.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,n)||1,f=s.getUint32(KTX_FIELDS.NUMBER_OF_FACES,n),m=s.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,n),g=s.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,n);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const y=4,b=4,x=l+3&-4,_=c+3&-4,w=new Array(d);let v=l*c;i===0&&(v=x*_);let S;if(i!==0?TYPES_TO_BYTES_PER_COMPONENT[i]?S=TYPES_TO_BYTES_PER_COMPONENT[i]*FORMATS_TO_COMPONENTS[o]:S=TYPES_TO_BYTES_PER_PIXEL[i]:S=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[a],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const M=r?parseKvData(s,g,n):null;let A=v*S,X=l,F=c,O=x,U=_,k=FILE_HEADER_SIZE+g;for(let B=0;B<m;B++){const ie=s.getUint32(k,n);let te=k+4;for(let N=0;N<d;N++){let Q=w[N];Q||(Q=w[N]=new Array(m)),Q[B]={levelID:B,levelWidth:m>1||i!==0?X:O,levelHeight:m>1||i!==0?F:U,levelBuffer:new Uint8Array(e,te,A)},te+=A}k+=ie+4,k=k%4!==0?k+4-k%4:k,X=X>>1||1,F=F>>1||1,O=X+y-1&~(y-1),U=F+b-1&~(b-1),A=O*U*S}return i!==0?{uncompressed:w.map(B=>{let ie=B[0].levelBuffer,te=!1;return i===TYPES.FLOAT?ie=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):i===TYPES.UNSIGNED_INT?(te=!0,ie=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):i===TYPES.INT&&(te=!0,ie=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new BufferResource(ie,{width:B[0].levelWidth,height:B[0].levelHeight}),type:i,format:te?convertFormatToInteger(o):o}}),kvData:M}:{compressed:w.map(B=>new CompressedTextureResource(null,{format:a,width:l,height:c,levels:m,levelBuffers:B})),kvData:M}}function validate$1(t,e){for(let r=0;r<FILE_IDENTIFIER.length;r++)if(e.getUint8(r)!==FILE_IDENTIFIER[r])return!1;return!0}function convertFormatToInteger(t){switch(t){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return t}}function parseKvData(t,e,r){const s=new Map;let n=0;for(;n<e;){const i=t.getUint32(FILE_HEADER_SIZE+n,r),o=FILE_HEADER_SIZE+n+4,a=3-(i+3)%4;if(i===0||i>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<i&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,i-l-1);s.set(c,u),n+=4+i+a}return s}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},test(t){return checkExtension(t,".dds")},async load(t,e,r){const n=await(await settings.ADAPTER.fetch(t)).arrayBuffer(),o=parseDDS(n).map(a=>{const l=new BaseTexture(a,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(t),...e.data});return createTexture(l,r,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},test(t){return checkExtension(t,".ktx")},async load(t,e,r){const n=await(await settings.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:o,kvData:a}=parseKTX(t,n),l=i!=null?i:o,c={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(t),...e.data},u=l.map(d=>{l===o&&Object.assign(c,{type:d.type,format:d.format});const f=new BaseTexture(d,c);return f.ktxKeyValueData=a,createTexture(f,r,t)});return u.length===1?u[0]:u},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};extensions$1.add(loadKTX);const resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:t=>{const r=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:t=>{var s,n,i,o;if(t.split("?")[0].split(".").pop()==="ktx"){const a=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(a.some(l=>t.endsWith(l)))return{resolution:parseFloat((n=(s=settings.RETINA_PREFIX.exec(t))==null?void 0:s[1])!=null?n:"1"),format:a.find(l=>t.endsWith(l)),src:t}}return{resolution:parseFloat((o=(i=settings.RETINA_PREFIX.exec(t))==null?void 0:i[1])!=null?o:"1"),format:t.split(".").pop(),src:t}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class{constructor(t){this.renderer=t}async image(t,e,r){const s=new Image;return s.src=await this.base64(t,e,r),s}async base64(t,e,r){const s=this.canvas(t);if(s.toDataURL!==void 0)return s.toDataURL(e,r);if(s.convertToBlob!==void 0){const n=await s.convertToBlob({type:e,quality:r});return await new Promise(i=>{const o=new FileReader;o.onload=()=>i(o.result),o.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const r=this.renderer;let s,n=!1,i,o=!1;t&&(t instanceof RenderTexture?i=t:(i=this.renderer.generateTexture(t),o=!0)),i?(s=i.baseTexture.resolution,e=e!=null?e:i.frame,n=!1,r.renderTexture.bind(i)):(s=r.resolution,e||(e=TEMP_RECT,e.width=r.width,e.height=r.height),n=!0,r.renderTexture.bind(null));const a=Math.round(e.width*s),l=Math.round(e.height*s);let c=new CanvasRenderTarget(a,l,1);const u=new Uint8Array(BYTES_PER_PIXEL*a*l),d=r.gl;d.readPixels(Math.round(e.x*s),Math.round(e.y*s),a,l,d.RGBA,d.UNSIGNED_BYTE,u);const f=c.context.getImageData(0,0,a,l);if(_Extract.arrayPostDivide(u,f.data),c.context.putImageData(f,0,0),n){const m=new CanvasRenderTarget(c.width,c.height,1);m.context.scale(1,-1),m.context.drawImage(c.canvas,0,-l),c.destroy(),c=m}return o&&i.destroy(!0),c.canvas}pixels(t,e){const r=this.renderer;let s,n,i=!1;t&&(t instanceof RenderTexture?n=t:(n=this.renderer.generateTexture(t),i=!0)),n?(s=n.baseTexture.resolution,e=e!=null?e:n.frame,r.renderTexture.bind(n)):(s=r.resolution,e||(e=TEMP_RECT,e.width=r.width,e.height=r.height),r.renderTexture.bind(null));const o=Math.round(e.width*s),a=Math.round(e.height*s),l=new Uint8Array(BYTES_PER_PIXEL*o*a),c=r.gl;return c.readPixels(Math.round(e.x*s),Math.round(e.y*s),o,a,c.RGBA,c.UNSIGNED_BYTE,l),i&&n.destroy(!0),_Extract.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let r=0;r<t.length;r+=4){const s=e[r+3]=t[r+3];s!==0?(e[r]=Math.round(Math.min(t[r]*255/s,255)),e[r+1]=Math.round(Math.min(t[r+1]*255/s,255)),e[r+2]=Math.round(Math.min(t[r+2]*255/s,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}}};let Extract=_Extract;Extract.extension={name:"extract",type:ExtensionType.RendererSystem};extensions$1.add(Extract);var LINE_JOIN=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(LINE_JOIN||{}),LINE_CAP=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(LINE_CAP||{});const GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new FillStyle;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function fixOrientation(t,e=!1){const r=t.length;if(r<6)return;let s=0;for(let n=0,i=t[r-2],o=t[r-1];n<r;n+=2){const a=t[n],l=t[n+1];s+=(a-i)*(l+o),i=a,o=l}if(!e&&s>0||e&&s<=0){const n=r/2;for(let i=n+n%2;i<r;i+=2){const o=r-i-2,a=r-i-1,l=i,c=i+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const buildPoly={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const s=t.holes,n=e.points,i=e.indices;if(r.length>=6){fixOrientation(r,!1);const o=[];for(let c=0;c<s.length;c++){const u=s[c];fixOrientation(u.points,!0),o.push(r.length/2),r=r.concat(u.points)}const a=earcut$1.exports(r,o,2);if(!a)return;const l=n.length/2;for(let c=0;c<a.length;c+=3)i.push(a[c]+l),i.push(a[c+1]+l),i.push(a[c+2]+l);for(let c=0;c<r.length;c++)n.push(r[c])}}},buildCircle={build(t){const e=t.points;let r,s,n,i,o,a;if(t.type===SHAPES.CIRC){const g=t.shape;r=g.x,s=g.y,o=a=g.radius,n=i=0}else if(t.type===SHAPES.ELIP){const g=t.shape;r=g.x,s=g.y,o=g.width,a=g.height,n=i=0}else{const g=t.shape,y=g.width/2,b=g.height/2;r=g.x+y,s=g.y+b,o=a=Math.max(0,Math.min(g.radius,Math.min(y,b))),n=y-o,i=b-a}if(!(o>=0&&a>=0&&n>=0&&i>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(n?4:0)+(i?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=r+n,e[1]=e[3]=s+i,e[2]=e[4]=r-n,e[5]=e[7]=s-i;return}let u=0,d=l*4+(n?2:0)+2,f=d,m=c;{const g=n+o,y=i,b=r+g,x=r-g,_=s+y;if(e[u++]=b,e[u++]=_,e[--d]=_,e[--d]=x,i){const w=s-y;e[f++]=x,e[f++]=w,e[--m]=w,e[--m]=b}}for(let g=1;g<l;g++){const y=Math.PI/2*(g/l),b=n+Math.cos(y)*o,x=i+Math.sin(y)*a,_=r+b,w=r-b,v=s+x,S=s-x;e[u++]=_,e[u++]=v,e[--d]=v,e[--d]=w,e[f++]=w,e[f++]=S,e[--m]=S,e[--m]=_}{const g=n,y=i+a,b=r+g,x=r-g,_=s+y,w=s-y;e[u++]=b,e[u++]=_,e[--m]=w,e[--m]=b,n&&(e[u++]=x,e[u++]=_,e[--m]=w,e[--m]=x)}},triangulate(t,e){const r=t.points,s=e.points,n=e.indices;if(r.length===0)return;let i=s.length/2;const o=i;let a,l;if(t.type!==SHAPES.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;s.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),i++,s.push(r[0],r[1]);for(let u=2;u<r.length;u+=2)s.push(r[u],r[u+1]),n.push(i++,o,i);n.push(o+1,o,i)}},buildRectangle={build(t){const e=t.shape,r=e.x,s=e.y,n=e.width,i=e.height,o=t.points;o.length=0,n>=0&&i>=0&&o.push(r,s,r+n,s,r+n,s+i,r,s+i)},triangulate(t,e){const r=t.points,s=e.points;if(r.length===0)return;const n=s.length/2;s.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},buildRoundedRectangle={build(t){buildCircle.build(t)},triangulate(t,e){buildCircle.triangulate(t,e)}};function square(t,e,r,s,n,i,o,a){const l=t-r*n,c=e-s*n,u=t+r*i,d=e+s*i;let f,m;o?(f=s,m=-r):(f=-s,m=r);const g=l+f,y=c+m,b=u+f,x=d+m;return a.push(g,y),a.push(b,x),2}function round(t,e,r,s,n,i,o,a){const l=r-t,c=s-e;let u=Math.atan2(l,c),d=Math.atan2(n-t,i-e);a&&u<d?u+=Math.PI*2:!a&&u>d&&(d+=Math.PI*2);let f=u;const m=d-u,g=Math.abs(m),y=Math.sqrt(l*l+c*c),b=(15*g*Math.sqrt(y)/Math.PI>>0)+1,x=m/b;if(f+=x,a){o.push(t,e),o.push(r,s);for(let _=1,w=f;_<b;_++,w+=x)o.push(t,e),o.push(t+Math.sin(w)*y,e+Math.cos(w)*y);o.push(t,e),o.push(n,i)}else{o.push(r,s),o.push(t,e);for(let _=1,w=f;_<b;_++,w+=x)o.push(t+Math.sin(w)*y,e+Math.cos(w)*y),o.push(t,e);o.push(n,i),o.push(t,e)}return b*2}function buildNonNativeLine(t,e){const r=t.shape;let s=t.points||r.points.slice();const n=e.closePointEps;if(s.length===0)return;const i=t.lineStyle,o=new Point(s[0],s[1]),a=new Point(s[s.length-2],s[s.length-1]),l=r.type!==SHAPES.POLY||r.closeStroke,c=Math.abs(o.x-a.x)<n&&Math.abs(o.y-a.y)<n;if(l){s=s.slice(),c&&(s.pop(),s.pop(),a.set(s[s.length-2],s[s.length-1]));const N=(o.x+a.x)*.5,Q=(a.y+o.y)*.5;s.unshift(N,Q),s.push(N,Q)}const u=e.points,d=s.length/2;let f=s.length;const m=u.length/2,g=i.width/2,y=g*g,b=i.miterLimit*i.miterLimit;let x=s[0],_=s[1],w=s[2],v=s[3],S=0,M=0,C=-(_-v),A=x-w,X=0,F=0,O=Math.sqrt(C*C+A*A);C/=O,A/=O,C*=g,A*=g;const U=i.alignment,k=(1-U)*2,B=U*2;l||(i.cap===LINE_CAP.ROUND?f+=round(x-C*(k-B)*.5,_-A*(k-B)*.5,x-C*k,_-A*k,x+C*B,_+A*B,u,!0)+2:i.cap===LINE_CAP.SQUARE&&(f+=square(x,_,C,A,k,B,!0,u))),u.push(x-C*k,_-A*k),u.push(x+C*B,_+A*B);for(let N=1;N<d-1;++N){x=s[(N-1)*2],_=s[(N-1)*2+1],w=s[N*2],v=s[N*2+1],S=s[(N+1)*2],M=s[(N+1)*2+1],C=-(_-v),A=x-w,O=Math.sqrt(C*C+A*A),C/=O,A/=O,C*=g,A*=g,X=-(v-M),F=w-S,O=Math.sqrt(X*X+F*F),X/=O,F/=O,X*=g,F*=g;const Q=w-x,ce=_-v,L=w-S,Z=M-v,ne=Q*L+ce*Z,ue=ce*L-Z*Q,de=ue<0;if(Math.abs(ue)<.001*Math.abs(ne)){u.push(w-C*k,v-A*k),u.push(w+C*B,v+A*B),ne>=0&&(i.join===LINE_JOIN.ROUND?f+=round(w,v,w-C*k,v-A*k,w-X*k,v-F*k,u,!1)+4:f+=2,u.push(w-X*B,v-F*B),u.push(w+X*k,v+F*k));continue}const I=(-C+x)*(-A+v)-(-C+w)*(-A+_),z=(-X+S)*(-F+v)-(-X+w)*(-F+M),j=(Q*z-L*I)/ue,q=(Z*I-ce*z)/ue,oe=(j-w)*(j-w)+(q-v)*(q-v),le=w+(j-w)*k,J=v+(q-v)*k,E=w-(j-w)*B,T=v-(q-v)*B,P=Math.min(Q*Q+ce*ce,L*L+Z*Z),R=de?k:B,D=P+R*R*y;oe<=D?i.join===LINE_JOIN.BEVEL||oe/y>b?(de?(u.push(le,J),u.push(w+C*B,v+A*B),u.push(le,J),u.push(w+X*B,v+F*B)):(u.push(w-C*k,v-A*k),u.push(E,T),u.push(w-X*k,v-F*k),u.push(E,T)),f+=2):i.join===LINE_JOIN.ROUND?de?(u.push(le,J),u.push(w+C*B,v+A*B),f+=round(w,v,w+C*B,v+A*B,w+X*B,v+F*B,u,!0)+4,u.push(le,J),u.push(w+X*B,v+F*B)):(u.push(w-C*k,v-A*k),u.push(E,T),f+=round(w,v,w-C*k,v-A*k,w-X*k,v-F*k,u,!1)+4,u.push(w-X*k,v-F*k),u.push(E,T)):(u.push(le,J),u.push(E,T)):(u.push(w-C*k,v-A*k),u.push(w+C*B,v+A*B),i.join===LINE_JOIN.ROUND?de?f+=round(w,v,w+C*B,v+A*B,w+X*B,v+F*B,u,!0)+2:f+=round(w,v,w-C*k,v-A*k,w-X*k,v-F*k,u,!1)+2:i.join===LINE_JOIN.MITER&&oe/y<=b&&(de?(u.push(E,T),u.push(E,T)):(u.push(le,J),u.push(le,J)),f+=2),u.push(w-X*k,v-F*k),u.push(w+X*B,v+F*B),f+=2)}x=s[(d-2)*2],_=s[(d-2)*2+1],w=s[(d-1)*2],v=s[(d-1)*2+1],C=-(_-v),A=x-w,O=Math.sqrt(C*C+A*A),C/=O,A/=O,C*=g,A*=g,u.push(w-C*k,v-A*k),u.push(w+C*B,v+A*B),l||(i.cap===LINE_CAP.ROUND?f+=round(w-C*(k-B)*.5,v-A*(k-B)*.5,w-C*k,v-A*k,w+C*B,v+A*B,u,!1)+2:i.cap===LINE_CAP.SQUARE&&(f+=square(w,v,C,A,k,B,!1,u)));const ie=e.indices,te=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon;for(let N=m;N<f+m-2;++N)x=u[N*2],_=u[N*2+1],w=u[(N+1)*2],v=u[(N+1)*2+1],S=u[(N+2)*2],M=u[(N+2)*2+1],!(Math.abs(x*(v-M)+w*(M-_)+S*(_-v))<te)&&ie.push(N,N+1,N+2)}function buildNativeLine(t,e){let r=0;const s=t.shape,n=t.points||s.points,i=s.type!==SHAPES.POLY||s.closeStroke;if(n.length===0)return;const o=e.points,a=e.indices,l=n.length/2,c=o.length/2;let u=c;for(o.push(n[0],n[1]),r=1;r<l;r++)o.push(n[r*2],n[r*2+1]),a.push(u,u+1),u++;i&&a.push(u,c)}function buildLine(t,e){t.lineStyle.native?buildNativeLine(t,e):buildNonNativeLine(t,e)}class ArcUtils{static curveTo(e,r,s,n,i,o){const a=o[o.length-2],c=o[o.length-1]-r,u=a-e,d=n-r,f=s-e,m=Math.abs(c*f-u*d);if(m<1e-8||i===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const g=c*c+u*u,y=d*d+f*f,b=c*d+u*f,x=i*Math.sqrt(g)/m,_=i*Math.sqrt(y)/m,w=x*b/g,v=_*b/y,S=x*f+_*u,M=x*d+_*c,C=u*(_+w),A=c*(_+w),X=f*(x+v),F=d*(x+v),O=Math.atan2(A-M,C-S),U=Math.atan2(F-M,X-S);return{cx:S+e,cy:M+r,radius:i,startAngle:O,endAngle:U,anticlockwise:u*d>f*c}}static arc(e,r,s,n,i,o,a,l,c){const u=a-o,d=GRAPHICS_CURVES._segmentsCount(Math.abs(u)*i,Math.ceil(Math.abs(u)/PI_2)*40),f=u/(d*2),m=f*2,g=Math.cos(f),y=Math.sin(f),b=d-1,x=b%1/b;for(let _=0;_<=b;++_){const w=_+x*_,v=f+o+m*w,S=Math.cos(v),M=-Math.sin(v);c.push((g*S+y*M)*i+s,(g*-M+y*S)*i+n)}}}class BezierUtils{static curveLength(e,r,s,n,i,o,a,l){let u=0,d=0,f=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,v=0,S=e,M=r;for(let C=1;C<=10;++C)d=C/10,f=d*d,m=f*d,g=1-d,y=g*g,b=y*g,x=b*e+3*y*d*s+3*g*f*i+m*a,_=b*r+3*y*d*n+3*g*f*o+m*l,w=S-x,v=M-_,S=x,M=_,u+=Math.sqrt(w*w+v*v);return u}static curveTo(e,r,s,n,i,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=GRAPHICS_CURVES._segmentsCount(BezierUtils.curveLength(l,c,e,r,s,n,i,o));let d=0,f=0,m=0,g=0,y=0;a.push(l,c);for(let b=1,x=0;b<=u;++b)x=b/u,d=1-x,f=d*d,m=f*d,g=x*x,y=g*x,a.push(m*l+3*f*x*e+3*d*g*s+y*i,m*c+3*f*x*r+3*d*g*n+y*o)}}class QuadraticUtils{static curveLength(e,r,s,n,i,o){const a=e-2*s+i,l=r-2*n+o,c=2*s-2*e,u=2*n-2*r,d=4*(a*a+l*l),f=4*(a*c+l*u),m=c*c+u*u,g=2*Math.sqrt(d+f+m),y=Math.sqrt(d),b=2*d*y,x=2*Math.sqrt(m),_=f/y;return(b*g+y*f*(g-x)+(4*m*d-f*f)*Math.log((2*y+_+g)/(_+x)))/(4*b)}static curveTo(e,r,s,n,i){const o=i[i.length-2],a=i[i.length-1],l=GRAPHICS_CURVES._segmentsCount(QuadraticUtils.curveLength(o,a,e,r,s,n));let c=0,u=0;for(let d=1;d<=l;++d){const f=d/l;c=o+(e-o)*f,u=a+(r-a)*f,i.push(c+(e+(s-e)*f-c)*f,u+(r+(n-r)*f-u)*f)}}}class BatchPart{constructor(){this.reset()}begin(e,r,s){this.reset(),this.style=e,this.start=r,this.attribStart=s}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(e,r=null,s=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=s,this.fillStyle=r,this.matrix=n,this.type=e.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),BATCH_POOL.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,s=null){const n=new GraphicsData(t,e,r,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new GraphicsData(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=s.lineStyle,s.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const s=e[r];if(!!s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,tmpPoint):tmpPoint.copyFrom(t),s.shape.contains(tmpPoint.x,tmpPoint.y))){let n=!1;if(s.holes){for(let i=0;i<s.holes.length;i++)if(s.holes[i].shape.contains(tmpPoint.x,tmpPoint.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,s=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],s=r.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],c=l.fillStyle,u=l.lineStyle;FILL_COMMANDS[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||u.visible)&&this.processHoles(l.holes);for(let f=0;f<2;f++){const m=f===0?c:u;if(!m.visible)continue;const g=m.texture.baseTexture,y=this.indices.length,b=this.points.length/2;g.wrapMode=WRAP_MODES.REPEAT,f===0?this.processFill(l):this.processLine(l);const x=this.points.length/2-b;x!==0&&(r&&!this._compareStyles(s,m)&&(r.end(y,b),r=null),r||(r=BATCH_POOL.pop()||new BatchPart,r.begin(m,y,b),this.batches.push(r),s=m),this.addUvs(this.points,t,m.texture,b,x,m.matrix))}}const n=this.indices.length,i=this.points.length/2;if(r&&r.end(n,i),this.batches.length===0){this.batchable=!0;return}const o=i>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const r=this.graphicsData[t],s=r.fillStyle,n=r.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const s=t[e];for(let n=0;n<s.size;n++){const i=s.start+n;this.indicesUint16[i]=this.indicesUint16[i]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<_GraphicsGeometry.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++BaseTexture._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[u]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let s=DRAW_CALL_POOL.pop();s||(s=new BatchDrawCall,s.texArray=new BatchTextureArray),s.texArray.count=0,s.start=0,s.size=0,s.type=DRAW_MODES.TRIANGLES;let n=0,i=null,o=0,a=!1,l=DRAW_MODES.TRIANGLES,c=0;this.drawCalls.push(s);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,m=d.style,g=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,l=a?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,i=null,n=f,t++),i!==g&&(i=g,g._batchEnabled!==t&&(n===f&&(t++,n=0,s.size>0&&(s=DRAW_CALL_POOL.pop(),s||(s=new BatchDrawCall,s.texArray=new BatchTextureArray),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=l),g.touched=1,g._batchEnabled=t,g._batchLocation=n,g.wrapMode=WRAP_MODES.REPEAT,s.texArray.elements[s.texArray.count++]=g,n++)),s.size+=d.size,c+=d.size,o=g._batchLocation,this.addColors(e,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,o,d.attribSize,d.attribStart)}BaseTexture._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,s=this.textureIds,n=new ArrayBuffer(t.length*3*4),i=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let l=0;l<t.length/2;l++)i[a++]=t[l*2],i[a++]=t[l*2+1],i[a++]=e[l*2],i[a++]=e[l*2+1],o[a++]=r[l],i[a++]=s[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?buildPoly.triangulate(t,this):FILL_COMMANDS[t.type].triangulate(t,this)}processLine(t){buildLine(t,this);for(let e=0;e<t.holes.length;e++)buildLine(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];FILL_COMMANDS[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const s=t[r*2],n=t[r*2+1];t[r*2]=e.a*s+e.c*n+e.tx,t[r*2+1]=e.b*s+e.d*n+e.ty}}addColors(t,e,r,s,n=0){const i=(e>>16)+(e&65280)+((e&255)<<16),o=premultiplyTint(i,r);t.length=Math.max(t.length,n+s);for(let a=0;a<s;a++)t[n+a]=o}addTextureIds(t,e,r,s=0){t.length=Math.max(t.length,s+r);for(let n=0;n<r;n++)t[s+n]=e}addUvs(t,e,r,s,n,i=null){let o=0;const a=e.length,l=r.frame;for(;o<n;){let u=t[(s+o)*2],d=t[(s+o)*2+1];if(i){const f=i.a*u+i.c*d+i.tx;d=i.b*u+i.d*d+i.ty,u=f}o++,e.push(u/l.width,d/l.height)}const c=r.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(e,r,a,n)}adjustUvs(t,e,r,s){const n=e.baseTexture,i=1e-6,o=r+s*2,a=e.frame,l=a.width/n.width,c=a.height/n.height;let u=a.x/a.width,d=a.y/a.height,f=Math.floor(t[r]+i),m=Math.floor(t[r+1]+i);for(let g=r+2;g<o;g+=2)f=Math.min(f,Math.floor(t[g]+i)),m=Math.min(m,Math.floor(t[g+1]+i));u-=f,d-=m;for(let g=r;g<o;g+=2)t[g]=(t[g]+u)*l,t[g+1]=(t[g+1]+d)*c}};let GraphicsGeometry=_GraphicsGeometry;GraphicsGeometry.BATCHABLE_SIZE=100;class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const e=new LineStyle;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const temp=new Float32Array(3),DEFAULT_SHADERS={},_Graphics=class extends Container{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State$1.for2d(),this._geometry=t||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new _Graphics(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r=1,s=.5,n=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:r,alignment:s,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:Texture.WHITE,color:t!=null&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,s=r[r.length-2],n=r[r.length-1];return(s!==t||n!==e)&&r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(t,e,r,s,n),this}bezierCurveTo(t,e,r,s,n,i){return this._initCurve(),BezierUtils.curveTo(t,e,r,s,n,i,this.currentPath.points),this}arcTo(t,e,r,s,n){this._initCurve(t,e);const i=this.currentPath.points,o=ArcUtils.curveTo(t,e,r,s,n,i);if(o){const{cx:a,cy:l,radius:c,startAngle:u,endAngle:d,anticlockwise:f}=o;this.arc(a,l,c,u,d,f)}return this}arc(t,e,r,s,n,i=!1){if(s===n)return this;if(!i&&n<=s?n+=PI_2:i&&s<=n&&(s+=PI_2),n-s===0)return this;const a=t+Math.cos(s)*r,l=e+Math.sin(s)*r,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const d=Math.abs(u[u.length-2]-a),f=Math.abs(u[u.length-1]-l);d<c&&f<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return ArcUtils.arc(a,l,t,e,r,s,n,i,u),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:Texture.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,s){return this.drawShape(new Rectangle(t,e,r,s))}drawRoundedRect(t,e,r,s,n){return this.drawShape(new RoundedRectangle(t,e,r,s,n))}drawCircle(t,e,r){return this.drawShape(new Circle(t,e,r))}drawEllipse(t,e,r,s){return this.drawShape(new Ellipse(t,e,r,s))}drawPolygon(...t){let e,r=!0;const s=t[0];s.points?(r=s.closeStroke,e=s.points):Array.isArray(t[0])?e=t[0]:e=t;const n=new Polygon(e);return n.closeStroke=r,this.drawShape(n),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===SHAPES.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let s=0;s<r;s++){const n=t.batches[s],i=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,n.start*2,n.size),c={vertexData:o,blendMode:e,indices:l,uvs:a,_batchRGB:hex2rgb(i),_tintRGB:i,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=c}}_renderBatched(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,s=this.tint,n=this.worldAlpha,i=e.uniforms,o=r.drawCalls;i.translationMatrix=this.transform.worldTransform,i.tint[0]=(s>>16&255)/255*n,i.tint[1]=(s>>8&255)/255*n,i.tint[2]=(s&255)/255*n,i.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,r.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:r,type:s,size:n,start:i}=e,o=r.count;for(let a=0;a<o;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(s,n,i)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!DEFAULT_SHADERS[r]){const{MAX_TEXTURES:s}=t.plugins[r],n=new Int32Array(s);for(let a=0;a<s;a++)n[a]=a;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:n},!0)},o=t.plugins[r]._shader.program;DEFAULT_SHADERS[r]=new Shader(o,i)}e=DEFAULT_SHADERS[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:s,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,r,s,n)}containsPoint(t){return this.worldTransform.applyInverse(t,_Graphics._TEMP_POINT),this._geometry.containsPoint(_Graphics._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=hex2rgb(this.tint,temp);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],s=r._batchRGB,n=t[0]*s[0]*255,i=t[1]*s[1]*255,o=t[2]*s[2]*255,a=(n<<16)+(i<<8)+(o|0);r._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,s=e.b,n=e.c,i=e.d,o=e.tx,a=e.ty,l=this._geometry.points,c=this.vertexData;let u=0;for(let d=0;d<l.length;d+=2){const f=l[d],m=l[d+1];c[u++]=r*f+n*m+o,c[u++]=i*m+s*f+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Graphics=_Graphics;Graphics._TEMP_POINT=new Point;class MeshBatchUvs{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class extends Container{constructor(t,e,r,s=DRAW_MODES.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||State$1.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&e.length<_Mesh.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,s=e._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const n=this.transform.worldTransform,i=n.a,o=n.b,a=n.c,l=n.d,c=n.tx,u=n.ty,d=this.vertexData;for(let f=0;f<d.length/2;f++){const m=r[f*2],g=r[f*2+1];d[f*2]=i*m+a*g+c,d[f*2+1]=o*m+l*g+u}if(this._roundPixels){const f=settings.RESOLUTION;for(let m=0;m<d.length;++m)d[m]=Math.round(d[m]*f)/f}this.vertexDirty=s}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,tempPoint);const e=this.geometry.getBuffer("aVertexPosition").data,r=tempPolygon.points,s=this.geometry.getIndex().data,n=s.length,i=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=i){const a=s[o]*2,l=s[o+1]*2,c=s[o+2]*2;if(r[0]=e[a],r[1]=e[a+1],r[2]=e[l],r[3]=e[l+1],r[4]=e[c],r[5]=e[c+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Mesh=_Mesh;Mesh.BATCHABLE_SIZE=100;var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(e,r){const s={uSampler:e,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(s,r.uniforms),super(r.program||Program.from(vertex$1,fragment$1),s),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this.tint=r.tint,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class MeshGeometry extends Geometry{constructor(e,r,s){super();const n=new Buffer$1(e),i=new Buffer$1(r,!0),o=new Buffer$1(s,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",i,2,!1,TYPES.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class ParticleBuffer{constructor(e,r,s){this.geometry=new Geometry,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let i=e[n];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||TYPES.FLOAT,offset:i.offset},r[n]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new Buffer$1(createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Buffer$1(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=n,n+=a.size,this.staticStride+=a.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new Buffer$1(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===TYPES.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===TYPES.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,s){for(let n=0;n<this.dynamicProperties.length;n++){const i=this.dynamicProperties[n];i.uploadFunction(e,r,s,i.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,s){for(let n=0;n<this.staticProperties.length;n++){const i=this.staticProperties[n];i.uploadFunction(e,r,s,i.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State$1.for2d()}render(e){const r=e.children,s=e._maxSize,n=e._batchSize,i=this.renderer;let o=r.length;if(o===0)return;o>s&&!e.autoResize&&(o=s);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=r[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=correctBlendMode(e.blendMode,c),i.state.set(this.state);const u=i.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let m=0,g=0;m<o;m+=n,g+=1){let y=o-m;y>n&&(y=n),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const b=a[g];b.uploadDynamic(r,m,y);const x=e._bufferUpdateIDs[g]||0;f=f||b._updateID<x,f&&(b._updateID=e._updateID,b.uploadStatic(r,m,y)),i.geometry.bind(b.geometry),u.drawElements(u.TRIANGLES,y*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],s=e._maxSize,n=e._batchSize,i=e._properties;for(let o=0;o<s;o+=n)r.push(new ParticleBuffer(this.properties,i,n));return r}_generateOneMoreBuffer(e){const r=e._batchSize,s=e._properties;return new ParticleBuffer(this.properties,s,r)}uploadVertices(e,r,s,n,i,o){let a=0,l=0,c=0,u=0;for(let d=0;d<s;++d){const f=e[r+d],m=f._texture,g=f.scale.x,y=f.scale.y,b=m.trim,x=m.orig;b?(l=b.x-f.anchor.x*x.width,a=l+b.width,u=b.y-f.anchor.y*x.height,c=u+b.height):(a=x.width*(1-f.anchor.x),l=x.width*-f.anchor.x,c=x.height*(1-f.anchor.y),u=x.height*-f.anchor.y),n[o]=l*g,n[o+1]=u*y,n[o+i]=a*g,n[o+i+1]=u*y,n[o+i*2]=a*g,n[o+i*2+1]=c*y,n[o+i*3]=l*g,n[o+i*3+1]=c*y,o+=i*4}}uploadPosition(e,r,s,n,i,o){for(let a=0;a<s;a++){const l=e[r+a].position;n[o]=l.x,n[o+1]=l.y,n[o+i]=l.x,n[o+i+1]=l.y,n[o+i*2]=l.x,n[o+i*2+1]=l.y,n[o+i*3]=l.x,n[o+i*3+1]=l.y,o+=i*4}}uploadRotation(e,r,s,n,i,o){for(let a=0;a<s;a++){const l=e[r+a].rotation;n[o]=l,n[o+i]=l,n[o+i*2]=l,n[o+i*3]=l,o+=i*4}}uploadUvs(e,r,s,n,i,o){for(let a=0;a<s;++a){const l=e[r+a]._texture._uvs;l?(n[o]=l.x0,n[o+1]=l.y0,n[o+i]=l.x1,n[o+i+1]=l.y1,n[o+i*2]=l.x2,n[o+i*2+1]=l.y2,n[o+i*3]=l.x3,n[o+i*3+1]=l.y3,o+=i*4):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+i*2]=0,n[o+i*2+1]=0,n[o+i*3]=0,n[o+i*3+1]=0,o+=i*4)}}uploadTint(e,r,s,n,i,o){for(let a=0;a<s;++a){const l=e[r+a],c=l._texture.baseTexture.alphaMode>0,u=l.alpha,d=u<1&&c?premultiplyTint(l._tintRGB,u):l._tintRGB+(u*255<<24);n[o]=d,n[o+i]=d,n[o+i*2]=d,n[o+i*3]=d,o+=i*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);settings.UPLOADS_PER_FRAME=4;var TEXT_GRADIENT=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(TEXT_GRADIENT||{});const defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class TextStyle{constructor(e){this.styleID=0,this.reset(),deepCopyProperties(this,e,e)}clone(){const e={};return deepCopyProperties(e,this,defaultStyle),new TextStyle(e)}reset(){deepCopyProperties(this,defaultStyle,defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=getColor(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=getColor(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){areArraysEqual(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=getColor(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let s=r.length-1;s>=0;s--){let n=r[s].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!genericFontFamilies.includes(n)&&(n=`"${n}"`),r[s]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}}function getSingleColor(t){return typeof t=="number"?hex2string(t):(typeof t=="string"&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function getColor(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=getSingleColor(t[e]);return t}else return getSingleColor(t)}function areArraysEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function deepCopyProperties(t,e,r){for(const s in r)Array.isArray(e[s])?t[s]=e[s].slice():t[s]=e[s]}const contextSettings={willReadFrequently:!0};class TextMetrics{constructor(e,r,s,n,i,o,a,l,c){this.text=e,this.style=r,this.width=s,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,r,s,n=TextMetrics._canvas){s=s==null?r.wordWrap:s;const i=r.toFontString(),o=TextMetrics.measureFont(i);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=n.getContext("2d",contextSettings);a.font=i;const c=(s?TextMetrics.wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(c.length);let d=0;for(let y=0;y<c.length;y++){const b=a.measureText(c[y]).width+(c[y].length-1)*r.letterSpacing;u[y]=b,d=Math.max(d,b)}let f=d+r.strokeThickness;r.dropShadow&&(f+=r.dropShadowDistance);const m=r.lineHeight||o.fontSize+r.strokeThickness;let g=Math.max(m,o.fontSize+r.strokeThickness)+(c.length-1)*(m+r.leading);return r.dropShadow&&(g+=r.dropShadowDistance),new TextMetrics(e,r,f,g,c,u,m+r.leading,d,o)}static wordWrap(e,r,s=TextMetrics._canvas){const n=s.getContext("2d",contextSettings);let i=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=r,d=TextMetrics.collapseSpaces(u),f=TextMetrics.collapseNewlines(u);let m=!d;const g=r.wordWrapWidth+c,y=TextMetrics.tokenize(e);for(let b=0;b<y.length;b++){let x=y[b];if(TextMetrics.isNewline(x)){if(!f){a+=TextMetrics.addLine(o),m=!d,o="",i=0;continue}x=" "}if(d){const w=TextMetrics.isBreakingSpace(x),v=TextMetrics.isBreakingSpace(o[o.length-1]);if(w&&v)continue}const _=TextMetrics.getFromCache(x,c,l,n);if(_>g)if(o!==""&&(a+=TextMetrics.addLine(o),o="",i=0),TextMetrics.canBreakWords(x,r.breakWords)){const w=TextMetrics.wordWrapSplit(x);for(let v=0;v<w.length;v++){let S=w[v],M=1;for(;w[v+M];){const A=w[v+M],X=S[S.length-1];if(TextMetrics.canBreakChars(X,A,x,v,r.breakWords))break}v+=S.length-1;const C=TextMetrics.getFromCache(S,c,l,n);C+i>g&&(a+=TextMetrics.addLine(o),m=!1,o="",i=0),o+=S,i+=C}}else{o.length>0&&(a+=TextMetrics.addLine(o),o="",i=0);const w=b===y.length-1;a+=TextMetrics.addLine(x,!w),m=!1,o="",i=0}else _+i>g&&(m=!1,a+=TextMetrics.addLine(o),o="",i=0),(o.length>0||!TextMetrics.isBreakingSpace(x)||m)&&(o+=x,i+=_)}return a+=TextMetrics.addLine(o,!1),a}static addLine(e,r=!0){return e=TextMetrics.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,s,n){let i=s[e];if(typeof i!="number"){const o=e.length*r;i=n.measureText(e).width+o,s[e]=i}return i}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const s=e[r];if(!TextMetrics.isBreakingSpace(s))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:TextMetrics._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:TextMetrics._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let s="";if(typeof e!="string")return r;for(let n=0;n<e.length;n++){const i=e[n],o=e[n+1];if(TextMetrics.isBreakingSpace(i,o)||TextMetrics.isNewline(i)){s!==""&&(r.push(s),s=""),r.push(i);continue}s+=i}return s!==""&&r.push(s),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,s,n,i){return!0}static wordWrapSplit(e){return e.split("")}static measureFont(e){if(TextMetrics._fonts[e])return TextMetrics._fonts[e];const r={ascent:0,descent:0,fontSize:0},s=TextMetrics._canvas,n=TextMetrics._context;n.font=e;const i=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,o=Math.ceil(n.measureText(i).width);let a=Math.ceil(n.measureText(TextMetrics.BASELINE_SYMBOL).width);const l=Math.ceil(TextMetrics.HEIGHT_MULTIPLIER*a);a=a*TextMetrics.BASELINE_MULTIPLIER|0,s.width=o,s.height=l,n.fillStyle="#f00",n.fillRect(0,0,o,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a);const c=n.getImageData(0,0,o,l).data,u=c.length,d=o*4;let f=0,m=0,g=!1;for(f=0;f<a;++f){for(let y=0;y<d;y+=4)if(c[m+y]!==255){g=!0;break}if(!g)m+=d;else break}for(r.ascent=a-f,m=u-d,g=!1,f=l;f>a;--f){for(let y=0;y<d;y+=4)if(c[m+y]!==255){g=!0;break}if(!g)m-=d;else break}return r.descent=f-a,r.fontSize=r.ascent+r.descent,TextMetrics._fonts[e]=r,r}static clearMetrics(e=""){e?delete TextMetrics._fonts[e]:TextMetrics._fonts={}}static get _canvas(){if(!TextMetrics.__canvas){let e;try{const r=new OffscreenCanvas(0,0),s=r.getContext("2d",contextSettings);if(s!=null&&s.measureText)return TextMetrics.__canvas=r,r;e=settings.ADAPTER.createCanvas()}catch{e=settings.ADAPTER.createCanvas()}e.width=e.height=10,TextMetrics.__canvas=e}return TextMetrics.__canvas}static get _context(){return TextMetrics.__context||(TextMetrics.__context=TextMetrics._canvas.getContext("2d",contextSettings)),TextMetrics.__context}}TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class extends Sprite{constructor(t,e,r){let s=!1;r||(r=settings.ADAPTER.createCanvas(),s=!0),r.width=3,r.height=3;const n=Texture.from(r);n.orig=new Rectangle,n.trim=new Rectangle,super(n),this._ownCanvas=s,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,s=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,i=s.height,o=s.lines,a=s.lineHeight,l=s.lineWidths,c=s.maxLineWidth,u=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;let d,f;const m=e.dropShadow?2:1;for(let g=0;g<m;++g){const y=e.dropShadow&&g===0,b=y?Math.ceil(Math.max(1,i)+e.padding*2):0,x=b*this._resolution;if(y){r.fillStyle="black",r.strokeStyle="black";const w=e.dropShadowColor,v=hex2rgb(typeof w=="number"?w:string2hex(w)),S=e.dropShadowBlur*this._resolution,M=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${v[0]*255},${v[1]*255},${v[2]*255},${e.dropShadowAlpha})`,r.shadowBlur=S,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*M,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*M+x}else r.fillStyle=this._generateFillStyle(e,o,s),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let _=(a-u.fontSize)/2;a-u.fontSize<0&&(_=0);for(let w=0;w<o.length;w++)d=e.strokeThickness/2,f=e.strokeThickness/2+w*a+u.ascent+_,e.align==="right"?d+=c-l[w]:e.align==="center"&&(d+=(c-l[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[w],d+e.padding,f+e.padding-b,!0),e.fill&&this.drawLetterSpacing(o[w],d+e.padding,f+e.padding-b)}this.updateTexture()}drawLetterSpacing(t,e,r,s=!1){const i=this._style.letterSpacing,o=_Text.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(i===0||o){o&&(this.context.letterSpacing=i,this.context.textLetterSpacing=i),s?this.context.strokeText(t,e,r):this.context.fillText(t,e,r);return}let a=e;const l=Array.from?Array.from(t):t.split("");let c=this.context.measureText(t).width,u=0;for(let d=0;d<l.length;++d){const f=l[d];s?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let m="";for(let g=d+1;g<l.length;++g)m+=l[g];u=this.context.measureText(m).width,a+=c-u+i,c=u}}updateTexture(){const t=this.canvas;if(this._style.trim){const i=trimCanvas(t);i.data&&(t.width=i.width,t.height=i.height,this.context.putImageData(i.data,0,0))}const e=this._texture,r=this._style,s=r.trim?0:r.padding,n=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const i=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-i-o*2,l=this.canvas.height/this._resolution-i-o*2,c=s.slice(),u=t.fillGradientStops.slice();if(!u.length){const d=c.length+1;for(let f=1;f<d;++f)u.push(f/d)}if(c.unshift(s[0]),u.unshift(0),c.push(s[s.length-1]),u.push(1),t.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,l+o);const d=r.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const m=r.lineHeight*(f-1)+d,g=r.lineHeight*f;let y=g;f>0&&m>g&&(y=(g+m)/2);const b=g+d,x=r.lineHeight*(f+1);let _=b;f+1<e.length&&x<b&&(_=(b+x)/2);const w=(_-y)/l;for(let v=0;v<c.length;v++){let S=0;typeof u[v]=="number"?S=u[v]:S=v/c.length;let M=Math.min(1,Math.max(0,y/l+S*w));M=Number(M.toFixed(5)),n.addColorStop(M,c[v])}}}else{n=this.context.createLinearGradient(o,l/2,a+o,l/2);const d=c.length+1;let f=1;for(let m=0;m<c.length;m++){let g;typeof u[m]=="number"?g=u[m]:g=f/d,n.addColorStop(g,c[m]),f++}}return n}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},defaultDestroyOptions,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof TextStyle?this._style=t:this._style=new TextStyle(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Text=_Text;Text.experimentalLetterSpacing=!1;class CountLimiter{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(t,e){var s;let r=!1;if((s=t==null?void 0:t._textures)!=null&&s.length){for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof Texture){const i=t._textures[n].baseTexture;e.includes(i)||(e.push(i),r=!0)}}return r}function findBaseTexture(t,e){if(t.baseTexture instanceof BaseTexture){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function findTexture(t,e){if(t._texture&&t._texture instanceof Texture){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function drawText(t,e){return e instanceof Text?(e.updateText(!0),!0):!1}function calculateTextStyle(t,e){if(e instanceof TextStyle){const r=e.toFontString();return TextMetrics.measureFont(r),!0}return!1}function findText(t,e){if(t instanceof Text){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function findTextStyle(t,e){return t instanceof TextStyle?(e.includes(t)||e.push(t),!0):!1}class BasePrepare{constructor(e){this.limiter=new CountLimiter(settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let s=0,n=this.uploadHooks.length;s<n;s++)if(this.uploadHooks[s](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,s=e.length;r<s;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,s=this.addHooks.length;r<s&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Container)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function uploadBaseTextures(t,e){return e instanceof BaseTexture?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function uploadGraphics(t,e){if(!(e instanceof Graphics))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:s}=r;for(let n=0;n<s.length;n++){const{texture:i}=s[n].style;i&&uploadBaseTextures(t,i.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function findGraphics(t,e){return t instanceof Graphics?(e.push(t),!0):!1}class Prepare extends BasePrepare{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);const _Spritesheet=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof Texture?t:null,this.baseTexture=t instanceof BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const s=this.baseTexture.resource;this.resolution=this._updateResolution(r||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=getResolutionOfUrl(t,null);return r===null&&(r=parseFloat(e!=null?e:"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=_Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=_Spritesheet.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const s=this._frameKeys[e],n=this._frames[s],i=n.frame;if(i){let o=null,a=null;const l=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new Rectangle(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);n.rotated?o=new Rectangle(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):o=new Rectangle(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(a=new Rectangle(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[s]=new Texture(this.baseTexture,o,c,a,n.rotated?2:0,n.anchor),Texture.addToCache(this.textures[s],s)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const s=t[e][r];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*_Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*_Spritesheet.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Spritesheet=_Spritesheet;Spritesheet.BATCH_SIZE=1e3;const validImages=["jpg","png","jpeg","avif","webp"];function getCacheableAssets(t,e,r){const s={};if(t.forEach(n=>{s[n]=e}),Object.keys(e.textures).forEach(n=>{s[n]=e.textures[n]}),!r){const n=path.dirname(t[0]);e.linkedSheets.forEach((i,o)=>{const a=getCacheableAssets([`${n}/${e.data.meta.related_multi_packs[o]}`],i,!0);Object.assign(s,a)})}return s}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:t=>t instanceof Spritesheet,getCacheableAssets:(t,e)=>getCacheableAssets(t,e,!1)},resolver:{test:t=>{const r=t.split("?")[0].split("."),s=r.pop(),n=r.pop();return s==="json"&&validImages.includes(n)},parse:t=>{var r,s;const e=t.split(".");return{resolution:parseFloat((s=(r=settings.RETINA_PREFIX.exec(t))==null?void 0:r[1])!=null?s:"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(t,e){return path.extname(e.src).includes(".json")&&!!t.frames},async parse(t,e,r){var c,u;let s=path.dirname(e.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");const n=s+t.meta.image,o=(await r.load([n]))[n],a=new Spritesheet(o.baseTexture,t,e.src);await a.parse();const l=(c=t==null?void 0:t.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const d=[];for(const m of l){if(typeof m!="string")continue;const g=s+m;(u=e.data)!=null&&u.ignoreMultiPack||d.push(r.load({src:g,data:{ignoreMultiPack:!0}}))}const f=await Promise.all(d);a.linkedSheets=f,f.forEach(m=>{m.linkedSheets=[a].concat(a.linkedSheets.filter(g=>g!==m))})}return a},unload(t){t.destroy(!0)}}};extensions$1.add(spritesheetAsset);class AnimatedSprite extends Sprite{constructor(e,r=!0){super(e[0]instanceof Texture?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=this.animationSpeed*e,s=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=r/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s?this.onLoop():this.animationSpeed<0&&this.currentFrame>s&&this.onLoop()),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let s=0;s<e.length;++s)r.push(Texture.from(e[s]));return new AnimatedSprite(r)}static fromImages(e){const r=[];for(let s=0;s<e.length;++s)r.push(Texture.from(e[s]));return new AnimatedSprite(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}}new Point;var fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State$1.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,r),this.shader=e.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,r):Shader.from(gl1VertexSrc,gl1FragmentSrc,r)}render(e){const r=this.renderer,s=this.quad;let n=s.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;n=s.uvs,n[0]=n[6]=-i,n[1]=n[3]=-o,n[2]=n[4]=1-i,n[5]=n[7]=1-o,s.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,d=e.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[r.CONTEXT_UID]?f=l.wrapMode!==WRAP_MODES.CLAMP:l.wrapMode===WRAP_MODES.CLAMP&&(l.wrapMode=WRAP_MODES.REPEAT));const m=f?this.simpleShader:this.shader,g=a.width,y=a.height,b=e._width,x=e._height;tempMat.set(u.a*g/b,u.b*g/x,u.c*y/b,u.d*y/x,u.tx/b,u.ty/x),tempMat.invert(),f?tempMat.prepend(d.mapCoord):(m.uniforms.uMapCoord=d.mapCoord.toArray(!0),m.uniforms.uClampFrame=d.uClampFrame,m.uniforms.uClampOffset=d.uClampOffset),m.uniforms.uTransform=tempMat.toArray(!0),m.uniforms.uColor=premultiplyTintToRgba(e.tint,e.worldAlpha,m.uniforms.uColor,c),m.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),m.uniforms.uSampler=a,r.shader.bind(m),r.geometry.bind(s),this.state.blendMode=correctBlendMode(e.blendMode,c),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in r){const o=r[i].match(/^[a-z]+/gm)[0],a=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),d=u[0],f=u[1].replace(/"/gm,""),m=parseFloat(f),g=isNaN(m)?f:m;l[d]=g}s[o].push(l)}const n=new BitmapFontData;return s.info.forEach(i=>n.info.push({face:i.face,size:parseInt(i.size,10)})),s.common.forEach(i=>n.common.push({lineHeight:parseInt(i.lineHeight,10)})),s.page.forEach(i=>n.page.push({id:parseInt(i.id,10),file:i.file})),s.char.forEach(i=>n.char.push({id:parseInt(i.id,10),page:parseInt(i.page,10),x:parseInt(i.x,10),y:parseInt(i.y,10),width:parseInt(i.width,10),height:parseInt(i.height,10),xoffset:parseInt(i.xoffset,10),yoffset:parseInt(i.yoffset,10),xadvance:parseInt(i.xadvance,10)})),s.kerning.forEach(i=>n.kerning.push({first:parseInt(i.first,10),second:parseInt(i.second,10),amount:parseInt(i.amount,10)})),s.distanceField.forEach(i=>n.distanceField.push({distanceRange:parseInt(i.distanceRange,10),fieldType:i.fieldType})),n}}class XMLFormat{static test(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new BitmapFontData,s=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<s.length;c++)r.info.push({face:s[c].getAttribute("face"),size:parseInt(s[c].getAttribute("size"),10)});for(let c=0;c<n.length;c++)r.common.push({lineHeight:parseInt(n[c].getAttribute("lineHeight"),10)});for(let c=0;c<i.length;c++)r.page.push({id:parseInt(i[c].getAttribute("id"),10)||0,file:i[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];r.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)r.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)r.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return r}}class XMLStringFormat{static test(e){if(typeof e=="string"&&e.includes("<font>")){const r=new globalThis.DOMParser().parseFromString(e,"text/xml");return XMLFormat.test(r)}return!1}static parse(e){const r=new globalThis.DOMParser().parseFromString(e,"text/xml");return XMLFormat.parse(r)}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(t){for(let e=0;e<formats.length;e++)if(formats[e].test(t))return formats[e];return null}function generateFillStyle(t,e,r,s,n,i){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,u=t.width/s-l-c*2,d=t.height/s-l-c*2,f=o.slice(),m=r.fillGradientStops.slice();if(!m.length){const g=f.length+1;for(let y=1;y<g;++y)m.push(y/g)}if(f.unshift(o[0]),m.unshift(0),f.push(o[o.length-1]),m.push(1),r.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,d+c);let g=0;const b=(i.fontProperties.fontSize+r.strokeThickness)/d;for(let x=0;x<n.length;x++){const _=i.lineHeight*x;for(let w=0;w<f.length;w++){let v=0;typeof m[w]=="number"?v=m[w]:v=w/f.length;const S=_/d+v*b;let M=Math.max(g,S);M=Math.min(M,1),a.addColorStop(M,f[w]),g=M}}}else{a=e.createLinearGradient(c,d/2,u+c,d/2);const g=f.length+1;let y=1;for(let b=0;b<f.length;b++){let x;typeof m[b]=="number"?x=m[b]:x=y/g,a.addColorStop(x,f[b]),y++}}return a}function drawGlyph(t,e,r,s,n,i,o){const a=r.text,l=r.fontProperties;e.translate(s,n),e.scale(i,i);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=generateFillStyle(t,e,o,i,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,f=hex2rgb(typeof d=="number"?d:string2hex(d)),m=o.dropShadowBlur*i,g=o.dropShadowDistance*i;e.shadowColor=`rgba(${f[0]*255},${f[1]*255},${f[2]*255},${o.dropShadowAlpha})`,e.shadowBlur=m,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*g,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*g}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+r.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(t){return Array.from?Array.from(t):t.split("")}function resolveCharacters(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,s=t.length;r<s;r++){const n=t[r];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const i=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(let a=i,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...splitTextToCharacters(n))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function extractCharCode(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const _BitmapFont=class{constructor(t,e,r){var c,u;const[s]=t.info,[n]=t.common,[i]=t.page,[o]=t.distanceField,a=getResolutionOfUrl(i.file),l={};this._ownsTextures=r,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(let d=0;d<t.page.length;d++){const{id:f,file:m}=t.page[d];l[f]=e instanceof Array?e[d]:e[m],(o==null?void 0:o.fieldType)&&o.fieldType!=="none"&&(l[f].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,l[f].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let d=0;d<t.char.length;d++){const{id:f,page:m}=t.char[d];let{x:g,y,width:b,height:x,xoffset:_,yoffset:w,xadvance:v}=t.char[d];g/=a,y/=a,b/=a,x/=a,_/=a,w/=a,v/=a;const S=new Rectangle(g+l[m].frame.x/a,y+l[m].frame.y/a,b,x);this.chars[f]={xOffset:_,yOffset:w,xAdvance:v,kerning:{},texture:new Texture(l[m].baseTexture,S),page:m}}for(let d=0;d<t.kerning.length;d++){let{first:f,second:m,amount:g}=t.kerning[d];f/=a,m/=a,g/=a,this.chars[m]&&(this.chars[m].kerning[f]=g)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=(u=(c=o==null?void 0:o.fieldType)==null?void 0:c.toLowerCase())!=null?u:"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let s;if(t instanceof BitmapFontData)s=t;else{const i=autoDetectFormat(t);if(!i)throw new Error("Unrecognized data format for font.");s=i.parse(t)}e instanceof Texture&&(e=[e]);const n=new _BitmapFont(s,e,r);return _BitmapFont.available[n.font]=n,n}static uninstall(t){const e=_BitmapFont.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete _BitmapFont.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:i,textureWidth:o,textureHeight:a,...l}=Object.assign({},_BitmapFont.defaultOptions,r),c=resolveCharacters(s),u=e instanceof TextStyle?e:new TextStyle(e),d=o,f=new BitmapFontData;f.info[0]={face:u.fontFamily,size:u.fontSize},f.common[0]={lineHeight:u.fontSize};let m=0,g=0,y,b,x,_=0;const w=[];for(let S=0;S<c.length;S++){y||(y=settings.ADAPTER.createCanvas(),y.width=o,y.height=a,b=y.getContext("2d"),x=new BaseTexture(y,{resolution:i,...l}),w.push(new Texture(x)),f.page.push({id:w.length-1,file:""}));const M=c[S],C=TextMetrics.measureText(M,u,!1,y),A=C.width,X=Math.ceil(C.height),F=Math.ceil((u.fontStyle==="italic"?2:1)*A);if(g>=a-X*i){if(g===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${M}')`);--S,y=null,b=null,x=null,g=0,m=0,_=0;continue}if(_=Math.max(X+C.fontProperties.descent,_),F*i+m>=d){if(m===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${M}')`);--S,g+=_*i,g=Math.ceil(g),m=0,_=0;continue}drawGlyph(y,b,C,m,g,i,u);const O=extractCharCode(C.text);f.char.push({id:O,page:w.length-1,x:m/i,y:g/i,width:F,height:X,xoffset:0,yoffset:0,xadvance:Math.ceil(A-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),m+=(F+2*n)*i,m=Math.ceil(m)}for(let S=0,M=c.length;S<M;S++){const C=c[S];for(let A=0;A<M;A++){const X=c[A],F=b.measureText(C).width,O=b.measureText(X).width,k=b.measureText(C+X).width-(F+O);k&&f.kerning.push({first:extractCharCode(C),second:extractCharCode(X),amount:k})}}const v=new _BitmapFont(f,w,!0);return _BitmapFont.available[t]!==void 0&&_BitmapFont.uninstall(t),_BitmapFont.available[t]=v,v}};let BitmapFont=_BitmapFont;BitmapFont.ALPHA=[["a","z"],["A","Z"]," "];BitmapFont.NUMERIC=[["0","9"]];BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];BitmapFont.ASCII=[[" ","~"]];BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC};BitmapFont.available={};var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class extends Container{constructor(t,e={}){super(),this._tint=16777215;const{align:r,tint:s,maxWidth:n,letterSpacing:i,fontName:o,fontSize:a}=Object.assign({},_BitmapText.styleDefaults,e);if(!BitmapFont.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=s,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=i,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var F;const t=BitmapFont.available[this._fontName],e=this.fontSize,r=e/t.size,s=new Point,n=[],i=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=splitTextToCharacters(a),c=this._maxWidth*t.size/e,u=t.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let d=null,f=0,m=0,g=0,y=-1,b=0,x=0,_=0,w=0;for(let O=0;O<l.length;O++){const U=l[O],k=extractCharCode(U);if(/(?:\s)/.test(U)&&(y=O,b=f,w++),U==="\r"||U===`
`){i.push(f),o.push(-1),m=Math.max(m,f),++g,++x,s.x=0,s.y+=t.lineHeight,d=null,w=0;continue}const B=t.chars[k];if(!B)continue;d&&B.kerning[d]&&(s.x+=B.kerning[d]);const ie=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};ie.texture=B.texture,ie.line=g,ie.charCode=k,ie.position.x=s.x+B.xOffset+this._letterSpacing/2,ie.position.y=s.y+B.yOffset,ie.prevSpaces=w,n.push(ie),f=ie.position.x+Math.max(B.xAdvance-B.xOffset,B.texture.orig.width),s.x+=B.xAdvance+this._letterSpacing,_=Math.max(_,B.yOffset+B.texture.height),d=k,y!==-1&&c>0&&s.x>c&&(++x,removeItems(n,1+y-x,1+O-y),O=y,y=-1,i.push(b),o.push(n.length>0?n[n.length-1].prevSpaces:0),m=Math.max(m,b),g++,s.x=0,s.y+=t.lineHeight,d=null,w=0)}const v=l[l.length-1];v!=="\r"&&v!==`
`&&(/(?:\s)/.test(v)&&(f=b),i.push(f),m=Math.max(m,f),o.push(-1));const S=[];for(let O=0;O<=g;O++){let U=0;this._align==="right"?U=m-i[O]:this._align==="center"?U=(m-i[O])/2:this._align==="justify"&&(U=o[O]<0?0:(m-i[O])/o[O]),S.push(U)}const M=n.length,C={},A=[],X=this._activePagesMeshData;u.push(...X);for(let O=0;O<M;O++){const U=n[O].texture,k=U.baseTexture.uid;if(!C[k]){let B=u.pop();if(!B){const te=new MeshGeometry;let N,Q;t.distanceFieldType==="none"?(N=new MeshMaterial(Texture.EMPTY),Q=BLEND_MODES.NORMAL):(N=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Q=BLEND_MODES.NORMAL_NPM);const ce=new Mesh(te,N);ce.blendMode=Q,B={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:ce,vertices:null,uvs:null,indices:null}}B.index=0,B.indexCount=0,B.vertexCount=0,B.uvsCount=0,B.total=0;const{_textureCache:ie}=this;ie[k]=ie[k]||new Texture(U.baseTexture),B.mesh.texture=ie[k],B.mesh.tint=this._tint,A.push(B),C[k]=B}C[k].total++}for(let O=0;O<X.length;O++)A.includes(X[O])||this.removeChild(X[O].mesh);for(let O=0;O<A.length;O++)A[O].mesh.parent!==this&&this.addChild(A[O].mesh);this._activePagesMeshData=A;for(const O in C){const U=C[O],k=U.total;if(!(((F=U.indices)==null?void 0:F.length)>6*k)||U.vertices.length<Mesh.BATCHABLE_SIZE*2)U.vertices=new Float32Array(4*2*k),U.uvs=new Float32Array(4*2*k),U.indices=new Uint16Array(6*k);else{const B=U.total,ie=U.vertices;for(let te=B*4*2;te<ie.length;te++)ie[te]=0}U.mesh.size=6*k}for(let O=0;O<M;O++){const U=n[O];let k=U.position.x+S[U.line]*(this._align==="justify"?U.prevSpaces:1);this._roundPixels&&(k=Math.round(k));const B=k*r,ie=U.position.y*r,te=U.texture,N=C[te.baseTexture.uid],Q=te.frame,ce=te._uvs,L=N.index++;N.indices[L*6+0]=0+L*4,N.indices[L*6+1]=1+L*4,N.indices[L*6+2]=2+L*4,N.indices[L*6+3]=0+L*4,N.indices[L*6+4]=2+L*4,N.indices[L*6+5]=3+L*4,N.vertices[L*8+0]=B,N.vertices[L*8+1]=ie,N.vertices[L*8+2]=B+Q.width*r,N.vertices[L*8+3]=ie,N.vertices[L*8+4]=B+Q.width*r,N.vertices[L*8+5]=ie+Q.height*r,N.vertices[L*8+6]=B,N.vertices[L*8+7]=ie+Q.height*r,N.uvs[L*8+0]=ce.x0,N.uvs[L*8+1]=ce.y0,N.uvs[L*8+2]=ce.x1,N.uvs[L*8+3]=ce.y1,N.uvs[L*8+4]=ce.x2,N.uvs[L*8+5]=ce.y2,N.uvs[L*8+6]=ce.x3,N.uvs[L*8+7]=ce.y3}this._textWidth=m*r,this._textHeight=(s.y+t.lineHeight)*r;for(const O in C){const U=C[O];if(this.anchor.x!==0||this.anchor.y!==0){let te=0;const N=this._textWidth*this.anchor.x,Q=this._textHeight*this.anchor.y;for(let ce=0;ce<U.total;ce++)U.vertices[te++]-=N,U.vertices[te++]-=Q,U.vertices[te++]-=N,U.vertices[te++]-=Q,U.vertices[te++]-=N,U.vertices[te++]-=Q,U.vertices[te++]-=N,U.vertices[te++]-=Q}this._maxLineHeight=_*r;const k=U.mesh.geometry.getBuffer("aVertexPosition"),B=U.mesh.geometry.getBuffer("aTextureCoord"),ie=U.mesh.geometry.getIndex();k.data=U.vertices,B.data=U.uvs,ie.data=U.indices,k.update(),B.update(),ie.update()}for(let O=0;O<n.length;O++)charRenderDataPool.push(n[O]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:s}=BitmapFont.available[this._fontName];if(r!=="none"){const{a:n,b:i,c:o,d:a}=this.worldTransform,l=Math.sqrt(n*n+i*i),c=Math.sqrt(o*o+a*a),u=(Math.abs(l)+Math.abs(c))/2,d=this.fontSize/s,f=t._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=u*e*d*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=BitmapFont.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!BitmapFont.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){var t;return(t=this._fontSize)!=null?t:BitmapFont.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t==null?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,s=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;s.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],s.filter(n=>e[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=Texture.EMPTY});for(const n in e)e[n].destroy(),delete e[n];this._font=null,this._textureCache=null,super.destroy(t)}};let BitmapText=_BitmapText;BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},test(t){return validExtensions.includes(path.extname(t))},async testParse(t){return TextFormat.test(t)||XMLStringFormat.test(t)},async parse(t,e,r){const s=TextFormat.test(t)?TextFormat.parse(t):XMLStringFormat.parse(t),{src:n}=e,{page:i}=s,o=[];for(let c=0;c<i.length;++c){const u=i[c].file,d=path.join(path.dirname(n),u);o.push(d)}const a=await r.load(o),l=o.map(c=>a[c]);return BitmapFont.install(s,l,!0)},async load(t,e){return(await settings.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};extensions$1.add(loadBitmapFont);function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString:toString$4}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>e=>{const r=toString$4.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer$2(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction$1(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$4=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$4(t)&&isFunction$1(t.pipe),isFormData=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString$4.call(t)===e||isFunction$1(t.toString)&&t.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),isArray(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function findKey(t,e){e=e.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const _global=typeof self>"u"?typeof global>"u"?globalThis:global:self,isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge$3(){const{caseless:t}=isContextDefined(this)&&this||{},e={},r=(s,n)=>{const i=t&&findKey(e,n)||n;isPlainObject(e[i])&&isPlainObject(s)?e[i]=merge$3(e[i],s):isPlainObject(s)?e[i]=merge$3({},s):isArray(s)?e[i]=s.slice():e[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&forEach(arguments[s],r);return e}const extend$4=(t,e,r,{allOwnKeys:s}={})=>(forEach(e,(n,i)=>{r&&isFunction$1(n)?t[i]=bind(n,r):t[i]=n},{allOwnKeys:s}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject=(t,e,r,s)=>{let n,i,o;const a={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},toArray=t=>{if(!t)return null;if(isArray(t))return t;let e=t.length;if(!isNumber(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},isTypedArray=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},matchAll=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),hasOwnProperty$2=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};forEach(r,(n,i)=>{e(n,i,t)!==!1&&(s[i]=n)}),Object.defineProperties(t,s)},freezeMethods=t=>{reduceDescriptors(t,(e,r)=>{if(isFunction$1(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(!!isFunction$1(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet=(t,e)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return isArray(t)?s(t):s(String(t).split(e)),r},noop$1=()=>{},toFiniteNumber=(t,e)=>(t=+t,Number.isFinite(t)?t:e),toJSONObject=t=>{const e=new Array(10),r=(s,n)=>{if(isObject$4(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[n]=s;const i=isArray(s)?[]:{};return forEach(s,(o,a)=>{const l=r(o,n+1);!isUndefined(l)&&(i[a]=l)}),e[n]=void 0,i}}return s};return r(t,0)},utils={isArray,isArrayBuffer,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$4,isPlainObject,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$3,extend:extend$4,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$2,hasOwnProp:hasOwnProperty$2,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,toJSONObject};function AxiosError(t,e,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,e,r,s,n,i)=>{const o=Object.create(prototype$1);return utils.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),AxiosError.call(o,t.message,e,r,s,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};var browser$3=typeof self=="object"?self.FormData:window.FormData;const FormData$2=browser$3;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,r){return t?t.concat(e).map(function(n,i){return n=removeBrackets(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(e){return/^is[A-Z]/.test(e)});function isSpecCompliant(t){return t&&utils.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function toFormData(t,e,r){if(!utils.isObject(t))throw new TypeError("target must be an object");e=e||new(FormData$2||FormData),r=utils.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!utils.isUndefined(b[y])});const s=r.metaTokens,n=r.visitor||u,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(e);if(!utils.isFunction(n))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(utils.isDate(g))return g.toISOString();if(!l&&utils.isBlob(g))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(g)||utils.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,y,b){let x=g;if(g&&!b&&typeof g=="object"){if(utils.endsWith(y,"{}"))y=s?y:y.slice(0,-2),g=JSON.stringify(g);else if(utils.isArray(g)&&isFlatArray(g)||utils.isFileList(g)||utils.endsWith(y,"[]")&&(x=utils.toArray(g)))return y=removeBrackets(y),x.forEach(function(w,v){!(utils.isUndefined(w)||w===null)&&e.append(o===!0?renderKey([y],v,i):o===null?y:y+"[]",c(w))}),!1}return isVisitable(g)?!0:(e.append(renderKey(b,y,i),c(g)),!1)}const d=[],f=Object.assign(predicates,{defaultVisitor:u,convertValue:c,isVisitable});function m(g,y){if(!utils.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(g),utils.forEach(g,function(x,_){(!(utils.isUndefined(x)||x===null)&&n.call(e,x,utils.isString(_)?_.trim():_,y,f))===!0&&m(x,y?y.concat(_):[_])}),d.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return m(t),e}function encode$g(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,r){this._pairs.push([e,r])};prototype.toString=function(e){const r=e?function(s){return e.call(this,s,encode$g)}:encode$g;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function encode$f(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,r){if(!e)return t;const s=r&&r.encode||encode$f,n=r&&r.serialize;let i;if(n?i=n(e,r):i=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,r).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(s){s!==null&&e(s)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$3=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$3,FormData:FormData$1,Blob},isStandardBrowserEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,e){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(r,s,n,i){return platform.isNode&&utils.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],e[i]=t[i];return e}function formDataToJSON(t){function e(r,s,n,i){let o=r[i++];const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&utils.isArray(n)?n.length:o,l?(utils.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!utils.isObject(n[o]))&&(n[o]=[]),e(r,s,n[o],i)&&utils.isArray(n[o])&&(n[o]=arrayToObject(n[o])),!a)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const r={};return utils.forEachEntry(t,(s,n)=>{e(parsePropPath(s),n,r,0)}),r}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,e,r){if(utils.isString(t))try{return(e||JSON.parse)(t),utils.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const defaults$2={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(e,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=utils.isObject(e);if(i&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return n&&n?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((a=utils.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return toFormData(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const r=this.transitional||defaults$2.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(e&&utils.isString(e)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?AxiosError.from(a,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults$2.headers[e]={}});utils.forEach(["post","put","patch"],function(e){defaults$2.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$3=defaults$2,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=t=>{const e={};let r,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||e[r]&&ignoreDuplicateOf[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}function isValidHeaderName(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function matchHeaderValue(t,e,r,s){if(utils.isFunction(s))return s.call(this,e,r);if(!!utils.isString(e)){if(utils.isString(s))return e.indexOf(s)!==-1;if(utils.isRegExp(s))return s.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function buildAccessors(t,e){const r=utils.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,o){return this[s].call(this,e,n,i,o)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,r,s){const n=this;function i(a,l,c){const u=normalizeHeader(l);if(!u)throw new Error("header name must be a non-empty string");const d=utils.findKey(n,u);(!d||n[d]===void 0||c===!0||c===void 0&&n[d]!==!1)&&(n[d||l]=normalizeValue(a))}const o=(a,l)=>utils.forEach(a,(c,u)=>i(c,u,l));return utils.isPlainObject(e)||e instanceof this.constructor?o(e,r):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?o(parseHeaders$1(e),r):e!=null&&i(r,e,s),this}get(e,r){if(e=normalizeHeader(e),e){const s=utils.findKey(this,e);if(s){const n=this[s];if(!r)return n;if(r===!0)return parseTokens(n);if(utils.isFunction(r))return r.call(this,n,s);if(utils.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=normalizeHeader(e),e){const s=utils.findKey(this,e);return!!(s&&(!r||matchHeaderValue(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let n=!1;function i(o){if(o=normalizeHeader(o),o){const a=utils.findKey(s,o);a&&(!r||matchHeaderValue(s,s[a],a,r))&&(delete s[a],n=!0)}}return utils.isArray(e)?e.forEach(i):i(e),n}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,s={};return utils.forEach(this,(n,i)=>{const o=utils.findKey(s,i);if(o){r[o]=normalizeValue(n),delete r[i];return}const a=e?formatHeader(i):String(i).trim();a!==i&&delete r[i],r[a]=normalizeValue(n),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return utils.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=e&&utils.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[$internals]=this[$internals]={accessors:{}}).accessors,n=this.prototype;function i(o){const a=normalizeHeader(o);s[a]||(buildAccessors(n,o),s[a]=!0)}return utils.isArray(e)?e.forEach(i):i(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,e){const r=this||defaults$3,s=e||r,n=AxiosHeaders$1.from(s.headers);let i=s.data;return utils.forEach(t,function(a){i=a.call(r,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,e,r){AxiosError.call(this,t==null?"canceled":t,AxiosError.ERR_CANCELED,e,r),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});const httpAdapter=null;function settle(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new AxiosError("Request failed with status code "+r.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(r,s,n,i,o,a){const l=[];l.push(r+"="+encodeURIComponent(s)),utils.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),utils.isString(i)&&l.push("path="+i),utils.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){const s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e){return t&&!isAbsoluteURL(e)?combineURLs(t,e):e}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function n(i){let o=i;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(o){const a=utils.isString(o)?n(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[i];o||(o=c),r[n]=l,s[n]=c;let d=i,f=0;for(;d!==n;)f+=r[d++],d=d%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function progressEventReducer(t,e){let r=0;const s=speedometer(50,250);return n=>{const i=n.loaded,o=n.lengthComputable?n.total:void 0,a=i-r,l=s(a),c=i<=o;r=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:n};u[e?"download":"upload"]=!0,t(u)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(r,s){let n=t.data;const i=AxiosHeaders$1.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}utils.isFormData(n)&&platform.isStandardBrowserEnv&&i.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}const u=buildFullPath(t.baseURL,t.url);c.open(t.method.toUpperCase(),buildURL(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const m=AxiosHeaders$1.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:m,config:t,request:c};settle(function(x){r(x),l()},function(x){s(x),l()},y),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){!c||(s(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,c)),c=null)},c.onerror=function(){s(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),s(new AxiosError(g,y.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,c)),c=null},platform.isStandardBrowserEnv){const m=(t.withCredentials||isURLSameOrigin(u))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);m&&i.set(t.xsrfHeaderName,m)}n===void 0&&i.setContentType(null),"setRequestHeader"in c&&utils.forEach(i.toJSON(),function(g,y){c.setRequestHeader(y,g)}),utils.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=m=>{!c||(s(!m||m.type?new CanceledError(null,t,c):m),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const f=parseProtocol(u);if(f&&platform.protocols.indexOf(f)===-1){s(new AxiosError("Unsupported protocol "+f+":",AxiosError.ERR_BAD_REQUEST,t));return}c.send(n||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:e}=t;let r,s;for(let n=0;n<e&&(r=t[n],!(s=utils.isString(r)?knownAdapters[r.toLowerCase()]:r));n++);if(!s)throw s===!1?new AxiosError(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!utils.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$3.adapter)(t).then(function(s){return throwIfCancellationRequested(t),s.data=transformData.call(t,t.transformResponse,s),s.headers=AxiosHeaders$1.from(s.headers),s},function(s){return isCancel(s)||(throwIfCancellationRequested(t),s&&s.response&&(s.response.data=transformData.call(t,t.transformResponse,s.response),s.response.headers=AxiosHeaders$1.from(s.response.headers))),Promise.reject(s)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,e){e=e||{};const r={};function s(c,u,d){return utils.isPlainObject(c)&&utils.isPlainObject(u)?utils.merge.call({caseless:d},c,u):utils.isPlainObject(u)?utils.merge({},u):utils.isArray(u)?u.slice():u}function n(c,u,d){if(utils.isUndefined(u)){if(!utils.isUndefined(c))return s(void 0,c,d)}else return s(c,u,d)}function i(c,u){if(!utils.isUndefined(u))return s(void 0,u)}function o(c,u){if(utils.isUndefined(u)){if(!utils.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,d){if(d in e)return s(c,u);if(d in t)return s(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>n(headersToObject(c),headersToObject(u),!0)};return utils.forEach(Object.keys(t).concat(Object.keys(e)),function(u){const d=l[u]||n,f=d(t[u],e[u],u);utils.isUndefined(f)&&d!==a||(r[u]=f)}),r}const VERSION="1.2.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(e,r,s){function n(i,o){return"[Axios v"+VERSION+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new AxiosError(n(o," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};function assertOptions(t,e,r){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new AxiosError("option "+i+" must be "+l,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+i,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mergeConfig(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),n!==void 0&&validator.assertOptions(n,{encode:validators.function,serialize:validators.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o;o=i&&utils.merge(i.common,i[r.method]),o&&utils.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=AxiosHeaders$1.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,d=0,f;if(!l){const g=[dispatchRequest.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(r);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let m=r;for(d=0;d<f;){const g=a[d++],y=a[d++];try{m=g(m)}catch(b){y.call(this,b);break}}try{u=dispatchRequest.call(this,m)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=mergeConfig(this.defaults,e);const r=buildFullPath(e.baseURL,e.url);return buildURL(r,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(r,s){return this.request(mergeConfig(s||{},{method:e,url:r,data:(s||{}).data}))}});utils.forEach(["post","put","patch"],function(e){function r(s){return function(i,o,a){return this.request(mergeConfig(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Axios.prototype[e]=r(),Axios.prototype[e+"Form"]=r(!0)});const Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new CanceledError(i,o,a),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new CancelToken(function(n){e=n}),cancel:e}}}const CancelToken$1=CancelToken;function spread(t){return function(r){return t.apply(null,r)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}function createInstance(t){const e=new Axios$1(t),r=bind(Axios$1.prototype.request,e);return utils.extend(r,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return createInstance(mergeConfig(t,n))},r}const axios=createInstance(defaults$3);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.default=axios;const axios$1=axios;var Se;const BAER_URL={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_AXIOS_BASE_URL===void 0?"http://116.204.115.87:9090/":(Se={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_AXIOS_BASE_URL)==null?void 0:Se.toString(),instance=axios$1.create({baseURL:BAER_URL,timeout:6e3,withCredentials:!1,headers:{"Content-Type":"text/plain; charset=utf-8"}}),GET="get",POST="post";function req(t,e,r){if(t=t.toLowerCase(),t=="post")return console.log("post"),instance.post(e,r);if(t=="get")return instance.get(e,{params:r});if(t=="delete")return instance.delete(e,{params:r});if(t=="put")return instance.put(e,r);throw console.error("known method"+t),Error("known method")}axios$1.interceptors.response.use(null,t=>{const e=t.config;if(!e||!e.retryTimes)return Promise.reject(t);const{__retryCount:r=1,retryDelay:s=300,retryTimes:n}=e;return e.__retryCount=r,r>=n?Promise.reject(t):(e.__retryCount++,new Promise(o=>{setTimeout(()=>{o()},s)}).then(function(){return axios$1(e)}))});const Pixihttp={getspritedata(){return req(GET,"/spriteGetALL",{})},getspritebyname(t){return req(GET,"/spriteGetByname",{name:t})},postsprite(t){const e=new SpObj;e.name=t.name,e.url=t.url,e.x=t.mapx,e.y=t.mapy,e.width=t.mapwidth,e.height=t.mapheight,e.visable=t.spgroup.visible,console.log("postsprite:",e);const r=req(POST,"/spritePost",e);console.log(r)},updatasprite(t){const e=new SpObj,r=assist.getlocalpos(t.spgroup.position.x,t.spgroup.position.y);t.mapx=r[0],t.mapy=r[1],console.log("updata x y",r),e.name=t.name,e.url=t.url,e.x=t.mapx,e.y=t.mapy,e.width=t.mapwidth,e.height=t.mapheight,e.visable=t.spgroup.visible,console.log("updatasprite:",e);const s=req(POST,"/spriteUpdata",e);console.log(s)}},backgroundPath="/assets/background.4c6be2e2.png";let bgheigth,bgwidth,scwidth,scheight,wr$2=0,hr$1=0,PixiApp$1,background,backgroundlength,maxleftmovelenth,maxrightmovelenth,maxtopmovelenth,maxbottommovelenth,backgroundheightlength,poivlength,pohilength,dragFlag=!1,startPoint$1;const assist={initpardata(t,e){scwidth=t,scheight=e,bgheigth=t*3.6,bgwidth=t*1.2;const r=this.scalewh(scwidth,scheight);return wr$2=r[0],hr$1=r[1],[scwidth,scheight,bgheigth,bgwidth,wr$2,hr$1]},transcreentocenternpos(t,e){const n=t-207,i=e-896/2;console.log("\u8F6C\u6362\u524D\u5C4F\u5E55\u5927\u5C0Fx\uFF1A",414,"y:",896,"\u8F6C\u6362\u524D\u80CC\u666F\u56FE\u5927\u5C0Fx\uFF1A",414*1.2,"y\uFF1A",896*1.6633928571428573),console.log("\u8F6C\u6362\u540E\u5C4F\u5E55\u5927\u5C0Fx\uFF1A",scwidth,"y:",scheight,"\u8F6C\u6362\u540E\u80CC\u666F\u56FE\u5927\u5C0Fx\uFF1A",bgwidth,"y\uFF1A",bgheigth),console.log("\u8F6C\u6362\u524D\u5C4F\u5E55\u5750\u6807x:",t,"y:",e,"\u8F6C\u6362\u540E\u4E2D\u5FC3\u5750\u6807x:",n,"y:",i);const o=n*wr$2,a=i*hr$1;console.log("\u4E2D\u5FC3\u5750\u6807\u4F38\u524Dx:",n,"y:",i,"\u4E2D\u5FC3\u5750\u6807\u4F38\u540E\u4E2D\u5FC3\u5750\u6807x:",o,"y:",a);const l=o+scwidth/2,c=a+scheight/2;return console.log("\u4E2D\u5FC3\u5750\u6807\u4F38\u540E\u8F6C\u6362\u524Dx:",o,"y:",a,"\u4E2D\u5FC3\u5750\u6807\u4F38\u540E\u8F6C\u6362\u540Ex:",l,"y:",c),[l,c]},scalewh(t,e){let n=0,i=0;return n=bgwidth/(414*1.2),i=bgheigth/(896*1.6633928571428573),console.log("\u80CC\u666F\u5BBD\u5EA6\uFF1A",bgwidth,"\u9AD8\u5EA6\uFF1A",bgheigth,"\u6620\u5C04\u753B\u5E03\u5BBD\u5EA6\uFF1A",414,"\u9AD8\u5EA6\uFF1A",896,"\u6620\u5C04\u753B\u5E03\u7684\u80CC\u666F\u5BBD\u5EA6\uFF1A",414*1.2,"\u9AD8\u5EA6\uFF1A",896*1.6633928571428573),[n,i]},getcenterpos(t,e){const r=t-scwidth/2,s=e-scheight/2;return[r,s]},getlocalpos(t,e){const n=t-scwidth/2,i=e-scheight/2;console.log("\u8F6C\u6362\u524D\u5C4F\u5E55\u5927\u5C0Fx\uFF1A",414,"y:",896,"\u8F6C\u6362\u524D\u80CC\u666F\u56FE\u5927\u5C0Fx\uFF1A",414*1.2,"y\uFF1A",896*1.6633928571428573),console.log("\u8F6C\u6362\u540E\u5C4F\u5E55\u5927\u5C0Fx\uFF1A",scwidth,"y:",scheight,"\u8F6C\u6362\u540E\u80CC\u666F\u56FE\u5927\u5C0Fx\uFF1A",bgwidth,"y\uFF1A",bgheigth),console.log("\u8F6C\u6362\u524D\u5C4F\u5E55\u5750\u6807x:",t,"y:",e,"\u8F6C\u6362\u540E\u4E2D\u5FC3\u5750\u6807x:",n,"y:",i);const o=n/wr$2,a=i/hr$1;console.log("\u4E2D\u5FC3\u5750\u6807\u7F29\u524Dx:",n,"y:",i,"\u4E2D\u5FC3\u5750\u6807\u7F29\u540E\u4E2D\u5FC3\u5750\u6807x:",o,"y:",a);const l=o+414/2,c=a+896/2;return console.log("\u4E2D\u5FC3\u5750\u6807\u7F29\u540E\u8F6C\u6362\u524Dx:",o,"y:",a,"\u4E2D\u5FC3\u5750\u6807\u7F29\u540E\u8F6C\u6362\u540Ex:",l,"y:",c),[l,c]},spsetpos(t,e,r){console.log("\u5F00\u59CB\u8F6C\u6362\u7CBE\u7075\u5750\u6807-\u7CBE\u7075\uFF1A",r.name);const s=this.transcreentocenternpos(t,e);r.spgroup.position={x:s[0],y:s[1]}},spcontainersetpos(t,e,r){console.log("\u5F00\u59CB\u8F6C\u6362\u7CBE\u7075\u5750\u6807-\u7CBE\u7075\uFF1A",r.name);const s=this.transcreentocenternpos(t,e);r.position={x:s[0],y:s[1]}},backgroundinit(){PixiApp$1=PixiEngine.getPixiApp(),console.log("setup"),console.log("windowwidth:",scwidth),console.log("windowheight:",scheight),background=new Sprite(Texture.from(backgroundPath)),background.name="background",background.angle=90,background.width=bgheigth,background.height=bgwidth,backgroundlength=background.width,backgroundheightlength=background.height;const t=scwidth/2,e=backgroundheightlength-t,r=scheight/2,s=backgroundlength-r;pohilength=e-backgroundheightlength/2,maxtopmovelenth=pohilength,maxbottommovelenth=pohilength,background.width/2,poivlength=s-backgroundlength/2,maxleftmovelenth=poivlength,maxrightmovelenth=poivlength,background.height/2,background.position={x:background.height-pohilength,y:-poivlength},console.log("x\u9700\u8981\u504F\u79FB\u91CF:",pohilength,"y\u9700\u8981\u504F\u79FB\u91CF:",poivlength),PixiApp$1.stage.addChild(background),background.interactive=!0,background.on("touchstart",n=>{dragFlag=!0,startPoint$1={x:n.data.global.x,y:n.data.global.y}}),background.on("touchmove",n=>{if(dragFlag){const i=n.data.global.x-startPoint$1.x,o=n.data.global.y-startPoint$1.y;if(PixiApp$1.stage.position.x+=i,PixiApp$1.stage.position.y+=o,maxleftmovelenth+=o,maxrightmovelenth-=o,maxtopmovelenth+=i,maxbottommovelenth-=i,console.log("maxleftmovelenth:",maxleftmovelenth,"maxrightmovelenth:",maxrightmovelenth),startPoint$1={x:n.data.global.x,y:n.data.global.y},maxleftmovelenth<0){dragFlag=!1,maxleftmovelenth=0,maxrightmovelenth=2*poivlength;for(let a=0;a<=3;a++)PixiApp$1.stage.position.y=-poivlength+a,console.log(" PixiApp.stage.position.y:",PixiApp$1.stage.position.y),maxrightmovelenth=maxrightmovelenth-a,maxleftmovelenth=maxleftmovelenth+a;console.log("maxleftmovelenth reset"),console.log("maxleftmovelenth:",maxleftmovelenth,"maxrightmovelenth",maxrightmovelenth)}if(maxrightmovelenth<0){dragFlag=!1,maxrightmovelenth=0,maxleftmovelenth=2*poivlength;for(let a=0;a<=3;a++)PixiApp$1.stage.position.y=poivlength-a,maxrightmovelenth=maxrightmovelenth+a,maxleftmovelenth=maxleftmovelenth-a;console.log("maxrightmovelenth reset"),console.log("maxleftmovelenth:",maxleftmovelenth,"maxrightmovelenth",maxrightmovelenth)}if(maxtopmovelenth<0){dragFlag=!1,maxtopmovelenth=0,maxbottommovelenth=2*pohilength;for(let a=0;a<=3;a++)PixiApp$1.stage.position.x=-pohilength+a,maxtopmovelenth=maxtopmovelenth+a,maxbottommovelenth=maxbottommovelenth-a;console.log("maxtopmovelenth reset"),console.log("maxtopmovelenth:",maxtopmovelenth,"maxbottommovelenth",maxbottommovelenth)}if(maxbottommovelenth<0){dragFlag=!1,maxbottommovelenth=0,maxtopmovelenth=2*pohilength;for(let a=0;a<=3;a++)PixiApp$1.stage.position.x=pohilength-a,maxbottommovelenth=maxbottommovelenth+a,maxtopmovelenth=maxtopmovelenth-a;console.log("maxbottommovelenth reset"),console.log("maxtopmovelenth:",maxtopmovelenth,"maxbottommovelenth",maxbottommovelenth)}console.log("stagecenturex:",PixiApp$1.stage.position.x),console.log("stagecenturey:",PixiApp$1.stage.position.y)}}),background.on("touchend",()=>{console.log("touchend"),dragFlag=!1})},toloadsp(t){const e=Pixihttp.getspritebyname(t.name),r=new HttpMsg;console.log("http-get-sprite:",t.name,"return:",e),e.then(s=>{if(r.data=s.data.data,r.msg=s.data.msg,r.data=="null")console.log(r),Pixihttp.postsprite(t);else{console.log(r.data);const n=JSON.parse(JSON.stringify(r.data)),i=PixiApp$1.stage.getChildByName(n.name);this.spcontainersetpos(n.x,n.y,i),i.width=n.width*wr$2,i.height=n.height*wr$2,i.visible=n.visable}})},sprebackregister(t){let e="null";const r=this.getcenterpos(t.position.x,t.position.y),s=r[0],n=r[1],i=bgheigth/2-20,o=bgwidth/2-20;if(s>o&&(e="bottom"),-s>o&&(e="top"),n>i&&(e="left"),-n>i&&(e="right"),e!="null")for(let a=0;a<=10;a++)e=="right"&&(t.position.y=t.position.y+a),e=="left"&&(t.position.y=t.position.y-a),e=="top"&&(t.position.x=t.position.x+a),e=="bottom"&&(t.position.x=t.position.x-a)}},rightPath="/assets/right.1dc121b3.png",closepath="/assets/close.d3792760.png";let startPoint,wr$1=0;class HttpMsg{constructor(){me(this,"data","null");me(this,"msg","null")}}class SpObj{constructor(){me(this,"name","asdad3");me(this,"url","Blue Train");me(this,"width",1);me(this,"height",1);me(this,"x",1);me(this,"y",1);me(this,"visable",!0)}}class SpriteEntry{constructor(e,r,s,n,i,o,a){me(this,"spgroup",new Container);me(this,"sprite");me(this,"name","");me(this,"url","");me(this,"spriteset",!1);me(this,"rectangle",new Graphics);me(this,"mapx",0);me(this,"mapy",0);me(this,"mapwidth",0);me(this,"mapheight",0);me(this,"isDragging",!1);me(this,"isscaleing",!1);this.sprite=e,this.spgroup.addChild(this.sprite),this.spgroup.visible=!1,this.name=s,this.spgroup.name=s,this.url=r,this.mapx=n,this.mapy=i,this.mapwidth=o,this.mapheight=a,this.spriteset=!1,this.init_drag(),e.anchor.x=.5,e.anchor.y=.5,this.initinfo()}setspedit(e){this.spriteset=e,e?(this.spgroup.visible=!0,this.rectangle.visible=!0,this.sprite.interactive=!0):this.rectangle.visible=!1}load(){this.editframeinit()}move(e,r){this.sprite!==void 0?this.spgroup.position={x:e,y:r}:console.log("err with undefined sprite: ",this.name)}editframeinit(){console.log("\u77E9\u5F62\u6846\u521D\u59CB\u5316\uFF0C\u7CBE\u7075\uFF1A",this.sprite);const e=this.spgroup,r=this.sprite.width,s=this.sprite.height;console.log("\u77E9\u5F62\u6846\uFF1A","\u5BBD\u5EA6\uFF1A",r,"\u9AD8\u5EA6\uFF1A",s),this.rectangle.beginFill(16777215,.1),this.rectangle.lineStyle(1,16777215,1),this.rectangle.drawRect(this.sprite.position._x-r/2,this.sprite.position._y-s/2,r,s),this.rectangle.endFill();const n=new Sprite(Texture.from(rightPath));n.anchor.x=.5,n.anchor.y=.5,n.width=r/4,n.height=r/4,n.interactive=!0,n.position={x:this.sprite.position._x-r/2,y:this.sprite.position._y-s/2},n.on("tap",o=>{console.log("tap"),this.rectangle.visible=!1,this.setspedit(!1),this.sprite.interactive=!1,Pixihttp.updatasprite(this)});const i=new Sprite(Texture.from(closepath));i.anchor.x=.5,i.anchor.y=.5,i.width=r/4,i.height=r/4,i.interactive=!0,i.position={x:this.sprite.position._x+r/2,y:this.sprite.position._y-s/2},i.on("tap",o=>{e.visible=!1}),this.rectangle.addChild(n),this.rectangle.addChild(i),e.addChild(this.sprite),e.addChild(this.rectangle),PixiEngine.getPixiApp().stage.addChild(e),console.log("\u77E9\u5F62\u6846\u548C\u7CBE\u7075\u521D\u59CB\u5316"),this.rectangle.visible=!1}init_drag(){this.sprite&&(console.log("\u76D1\u542C\u7CBE\u7075\u62D6\u52A8\u4E8B\u4EF6"),this.spgroup.on("touchstart",e=>{console.log("touchstart"),this.spriteset&&(this.isDragging=!0,startPoint={x:e.data.global.x,y:e.data.global.y})}).on("touchmove",e=>{var r,s;if(this.spriteset&&this.isDragging){const n=e.data.global.x-startPoint.x,i=e.data.global.y-startPoint.y,o=(r=this.spgroup)==null?void 0:r.position.x,a=(s=this.spgroup)==null?void 0:s.position.y;console.log("\u7CBE\u7075\u5F53\u524D\u4F4D\u7F6E-x:",o,"y:",a),o!=null&&a!=null&&this.move(o+n,a+i),startPoint={x:e.data.global.x,y:e.data.global.y}}}).on("touchend",()=>{this.isDragging=!1}).on("touchendoutside",()=>{this.isDragging=!1}))}initinfo(){wr$1=PixiEngine.getwr(),console.log("beforeinitinfo:",this),this.spgroup.angle=90,this.sprite.width=this.mapwidth*wr$1,this.sprite.height=this.mapheight*wr$1,this.spgroup.width=this.mapwidth*wr$1,this.spgroup.height=this.mapheight*wr$1,assist.spsetpos(this.mapx,this.mapy,this),console.log("afterinitinfo:",this)}}const fireplacePath="/assets/fireplace.260bae8d.png",biluPath="/assets/bilu.ae666ddd.png",frames$c={"fireplace_wps\u56FE\u7247_62.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"fireplace_wps\u56FE\u7247_63.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"fireplace_wps\u56FE\u7247_70.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"fireplace_wps\u56FE\u7247_71.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$c={fireplace_wps\u56FE\u7247:["fireplace_wps\u56FE\u7247_62.png","fireplace_wps\u56FE\u7247_63.png","fireplace_wps\u56FE\u7247_70.png","fireplace_wps\u56FE\u7247_71.png"]},meta$c={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"fireplace.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:12bb8f0fd573f67ac6ec5e1a64a547d1:6711ac4bcc571b314df1a50ff32ab516:1e1371bc0bf0eedc609662f2facd3bdd$"},fireplacePathJS={frames:frames$c,animations:animations$c,meta:meta$c},guiziPath="/assets/guizi.3c78986d.png",xiaomihuPath="/assets/xiaomihu.af5294bc.png",xiaosongshuPath="/assets/xiaosongshu.50f53e0c.png",bedPath="/assets/bed.706ca269.png",qiaokeliPath="/assets/qiaokeli.e65282dd.png",doudouPath="/assets/doudou.5ad68eb4.png",rabbitPath="/assets/rabbit.280c8a42.png",wendujiPath="/assets/wenduji.9710b729.png",wendujiPathgif="/assets/wenduji.866b5d33.gif",frames$b={"0ee4442ef715642a383c7e1055887d7d2.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0ee4442ef715642a383c7e1055887d7d21.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0ee4442ef715642a383c7e1055887d7d46.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0ee4442ef715642a383c7e1055887d7d65.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}}},animations$b={"0ee4442ef715642a383c7e1055887d7d":["0ee4442ef715642a383c7e1055887d7d2.png","0ee4442ef715642a383c7e1055887d7d21.png","0ee4442ef715642a383c7e1055887d7d46.png","0ee4442ef715642a383c7e1055887d7d65.png"]},meta$b={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"wenduji.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:efea1e2b2a82624507f5bd6035c0a4d9:e088c8d223d037e22f5c9a1cbdfa02cd:3d41c4ff0394aebe3cae6320296fb881$"},wendujiPathJS={frames:frames$b,animations:animations$b,meta:meta$b},luohuaPath="/assets/luohua.a283580b.png",luohuaPathGIF="/assets/luohua.01152a2a.gif",frames$a={"0fb2d1232966ba7925141896913d3a8552.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0fb2d1232966ba7925141896913d3a8561.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0fb2d1232966ba7925141896913d3a8570.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"0fb2d1232966ba7925141896913d3a8579.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}}},animations$a={"0fb2d1232966ba7925141896913d3a":["0fb2d1232966ba7925141896913d3a8552.png","0fb2d1232966ba7925141896913d3a8561.png","0fb2d1232966ba7925141896913d3a8570.png","0fb2d1232966ba7925141896913d3a8579.png"]},meta$a={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"luohua.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:9488b109b37c5ba912170520a0d8fe7b:c15d28a317b46ed6bd4190dafb92d24e:c7be61d6a451e9e59d5d3a1a17d45387$"},luohuaPathJS={frames:frames$a,animations:animations$a,meta:meta$a},yinghuashuPath="/assets/yinghuashu.c6216ded.png",yinghuashuPathGIF="/assets/yinghuashu.9172dad7.gif",frames$9={"0fce7ce5942b91467435bcbbeeae7cbe2.png":{frame:{x:0,y:0,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349}},"0fce7ce5942b91467435bcbbeeae7cbe21.png":{frame:{x:0,y:349,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349}},"0fce7ce5942b91467435bcbbeeae7cbe54.png":{frame:{x:0,y:698,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349}},"0fce7ce5942b91467435bcbbeeae7cbe63.png":{frame:{x:0,y:1047,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349}}},animations$9={"0fce7ce5942b91467435bcbbeeae7cbe":["0fce7ce5942b91467435bcbbeeae7cbe2.png","0fce7ce5942b91467435bcbbeeae7cbe21.png","0fce7ce5942b91467435bcbbeeae7cbe54.png","0fce7ce5942b91467435bcbbeeae7cbe63.png"]},meta$9={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"yinghuashu.png",format:"RGBA8888",size:{w:620,h:1396},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:cf8ce04299b02306e5b3c08936ae7818:218889ca8349e90909bea56eb045a12c:f4bf2cc55f523dec9a51f7f3d2bc06b6$"},yinghuashuPathJS={frames:frames$9,animations:animations$9,meta:meta$9},huaPath="/assets/hua.63bbcb9d.png",huaPathGIF="/assets/hua.6793065a.gif",frames$8={"2a4437fb90f7169cb29a9ad86cfee13f3.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2a4437fb90f7169cb29a9ad86cfee13f12.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2a4437fb90f7169cb29a9ad86cfee13f21.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2a4437fb90f7169cb29a9ad86cfee13f30.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$8={"2a4437fb90f7169cb29a9ad86cfee13f":["2a4437fb90f7169cb29a9ad86cfee13f3.png","2a4437fb90f7169cb29a9ad86cfee13f12.png","2a4437fb90f7169cb29a9ad86cfee13f21.png","2a4437fb90f7169cb29a9ad86cfee13f30.png"]},meta$8={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"hua.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a020e8632f7725e535b4bd79261aba9c:ba6080d856e561e4d65575c24cd0c2b9:a949fe36d2b3a034b9a98ddd779a0448$"},huaPathJS={frames:frames$8,animations:animations$8,meta:meta$8},heyePath="/assets/heye.1416c5db.png",heyePathGIF="/assets/heye.0d2025f9.gif",frames$7={"3d6cb1337a4516bbd5d425f2f7a05b405.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"3d6cb1337a4516bbd5d425f2f7a05b406.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"3d6cb1337a4516bbd5d425f2f7a05b4013.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"3d6cb1337a4516bbd5d425f2f7a05b4014.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}}},animations$7={"3d6cb1337a4516bbd5d425f2f7a05b":["3d6cb1337a4516bbd5d425f2f7a05b405.png","3d6cb1337a4516bbd5d425f2f7a05b406.png","3d6cb1337a4516bbd5d425f2f7a05b4013.png","3d6cb1337a4516bbd5d425f2f7a05b4014.png"]},meta$7={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"heye.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:c8a0a64ea6c52407910e261a25e15341:dccb73d40e9a951a5a06936b4b5feade:6897b987ed060e0a8115038c391c1cb8$"},heyePathJS={frames:frames$7,animations:animations$7,meta:meta$7},xiaocaoPath="/assets/xiaocao.8c5b6504.png",xiaocaoPathGIF="/assets/xiaocao.485554c8.gif",frames$6={"3e72d2305d5b8bb138068391c68452b41.png":{frame:{x:0,y:0,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349},anchor:{x:.5,y:.5}},"3e72d2305d5b8bb138068391c68452b421.png":{frame:{x:0,y:349,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349},anchor:{x:.5,y:.5}},"3e72d2305d5b8bb138068391c68452b454.png":{frame:{x:0,y:698,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349},anchor:{x:.5,y:.5}},"3e72d2305d5b8bb138068391c68452b486.png":{frame:{x:0,y:1047,w:620,h:349},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:349},sourceSize:{w:620,h:349},anchor:{x:.5,y:.5}}},animations$6={"3e72d2305d5b8bb138068391c68452b":["3e72d2305d5b8bb138068391c68452b41.png","3e72d2305d5b8bb138068391c68452b421.png","3e72d2305d5b8bb138068391c68452b454.png","3e72d2305d5b8bb138068391c68452b486.png"]},meta$6={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"xiaocao.png",format:"RGBA8888",size:{w:620,h:1396},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:9794bf62a2fcc400211ea56d3798a698:ce1644d0711bb1213b5dafde1cfd841e:1306e82edf5a2f970359d7e0596a5706$"},xiaocaoPathJS={frames:frames$6,animations:animations$6,meta:meta$6},caocongPath="/assets/caocong.dd0e26c5.png",caocongPathGIF="/assets/caocong.5ca14a3b.gif",frames$5={"5e3b4c18753c3b6f9125bc6ca3d5f79c12.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5e3b4c18753c3b6f9125bc6ca3d5f79c13.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5e3b4c18753c3b6f9125bc6ca3d5f79c14.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5e3b4c18753c3b6f9125bc6ca3d5f79c15.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$5={"5e3b4c18753c3b6f9125bc6ca3d5f79c":["5e3b4c18753c3b6f9125bc6ca3d5f79c12.png","5e3b4c18753c3b6f9125bc6ca3d5f79c13.png","5e3b4c18753c3b6f9125bc6ca3d5f79c14.png","5e3b4c18753c3b6f9125bc6ca3d5f79c15.png"]},meta$5={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"caocong.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:725f09e743667c86ffd05d261aefae82:e67e53fe980a1bc635c2ea94cddc5e19:87d0a4e12fceb06a191c5ea53813c272$"},caocongPathJS={frames:frames$5,animations:animations$5,meta:meta$5},shizhongPath="/assets/shizhong.79f27a9c.png",shizhongPathGIF="/assets/shizhong.0aa81210.gif",frames$4={"568c24782fd06ec7702575a324caccf420.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"568c24782fd06ec7702575a324caccf456.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"568c24782fd06ec7702575a324caccf483.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"568c24782fd06ec7702575a324caccf4140.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}}},animations$4={"568c24782fd06ec7702575a324caccf":["568c24782fd06ec7702575a324caccf420.png","568c24782fd06ec7702575a324caccf456.png","568c24782fd06ec7702575a324caccf483.png","568c24782fd06ec7702575a324caccf4140.png"]},meta$4={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"shizhong.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:0f7ebb92717ca4a0c32bc24ee93e366f:8cc97a8cf8c50a04ab53188a41bf0b3a:5af8e19e330fdee4be63f82329d4eaf0$"},shizhongPathJS={frames:frames$4,animations:animations$4,meta:meta$4},guoPath="/assets/guo.2eb4ed8b.png",guoPathGIF="/assets/guo.e25f0799.gif",frames$3={"2424c7ec7ae01964a42dd618c0ce5aa54.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2424c7ec7ae01964a42dd618c0ce5aa521.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2424c7ec7ae01964a42dd618c0ce5aa538.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"2424c7ec7ae01964a42dd618c0ce5aa562.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$3={"2424c7ec7ae01964a42dd618c0ce5aa":["2424c7ec7ae01964a42dd618c0ce5aa54.png","2424c7ec7ae01964a42dd618c0ce5aa521.png","2424c7ec7ae01964a42dd618c0ce5aa538.png","2424c7ec7ae01964a42dd618c0ce5aa562.png"]},meta$3={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"guo.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:8ab514e07a689ae04f93d199ae5aaa8d:cb446c9205f2922bc5bfa005462be32c:c5b6fc1e57a2196df9831fdba28ffb22$"},guoPathJS={frames:frames$3,animations:animations$3,meta:meta$3},shafaPath="/assets/shafa.3378c86b.png",axiPath="/assets/axi.701da703.png",bingxiangPath="/assets/bingxiang.8f384ae2.png",chuguiPath="/assets/chugui.6b788982.png",shujiaPath="/assets/shujia.5a2c168d.png",topguiPath="/assets/topgui.f1b258d5.png",matongPath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAA3CAYAAACVSbMgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAOVklEQVRoga2aW4xk11WGv7X2Pqequrp72j2OY+OYxMbO1ZnENnYUHBJMEhsSUJSLkiCBlJAHROCJJ97gBSHEAzzwEiIBskSQg0xAKIpEIMEhwooJuZhggic3x9jjy3T3THfX7ey91+Lh1Kmu7unpGUFWa6uqTp06+99rr/Wvy275wqNfRcKUm152A6+47uWoKikl6roGoJTChQsXAAghcJKUUhARRARVJedMXdesra1hZogq09lUBr2+p1mDqhJiBAHHEFfcjFKclBIahaqq2NraQoIiM3OsJESEXohMJhNijKjqYtKdnR0A3P1EsMACrIhQSqGua1ZXV3F3MiKAB3HEQRBySog6Zkb0gFQVCIz29+n1ekybGSkVAGINmIaFJgaDAQAppYUm3R13v6Jmu/uWR3ddRCAVj1XA3BEBw0QqQSW44CIE3xvtymAwYGVtxc2BBjCn0kD0nFFxUspUvRozA0BVUVWapt2uUgqllBPBdosRkQVQESHnTAiBKgRKykgl8syL52791n89cf/2zs5Nht+mqpaNC/1B/cZSig37g8dvvunm33/1zbd978KL51hfW0MunN9i/dSAi/sT6rrPeDwmhECv1yPnjLuzvr7OZDJZ2PHlxMxwd1R18b7bJQCaTG+1z6P//pU3fP5LX/jc088/c0M96BND7WYGKoIKOTekpmFzuDF765t++oF33Xf/I9EDsre9jzNhakYV6oVTmBlN0xBjZHNzEzNDVU8Ee5xZ5JzZ3d3FzFhdXeU/n/zW6z718EOPjPP49MZLTjMejwGlChF3J5WMhHZnrTHKKJ3/8Hs/eOeb73rz05pzoSkZreICkJmRUqLf76OqTKdTVPVYmzw6cs4LLXdm0MkLe9tn/u0/vvHQOE9PDzbW2N2/SPFMVCFNZ8h05pISsX0C2RKhX51+5F+//MdJSh2nPiH2+tTZKXJ4K1NqWaKu66tigtbZW+2Lg3kmlSQWGf7TI1/8oyd/cPajF8f7IQ4qZpMptUSCVqRZIvT6lDQVDzUpC6EU+rFiRpGd6e57n3/u2YFWsYeIHNjVYl45Bs3JYsbCVDraq6qKGILvXbg4OXfunFKsvRYjJi03d0x0JVFXwb0cS0vLnHklacGBagvA3Sml0DQNOWfH9XN1qPdzzsxmacEsZobEgKgv5rnMfKIAAqjEE8FdDvDR+xeUFZQY22cO6t70zjvueOyB++9//NTaxgxzQqgIISAimNnCxk8SFRECTlOuvA1XXMBS8Gg1pwRRL6X4K3/i1p277rjrT9TZh5aTO7NZBI0TxN3R4IZbQUP1/wPaPXBusx1HiwQmo6lbditNOru/u7+lMqeplDA5sO+TgAKoW8YsE6qTwV4VG3BAWVVVIdImIv1+v/0ul61+v596VeUigsYDP7lSdATQgBNDoMl2KJ6fJJfbMlVwL4f4ejabtUlNyqjrMzHGMpvNaJrmkFNfjRNrkYhZTZTm0HZ0jtPZ09Uwg7ugGhdAu/wipUSoIu5lpcFu62mcIoK5U7vQYCiCBUHMUXMsCEVBDSrRpgg3xuXJuq3ojL4F4MdGo+PkcnbcPUNVfb5gP2qj7o4cec4yBnfnENgY46EfLzvM1eQFHbEv36uq1HV9CIC7L1bl7nQoW3DH06aIHAa7HEXMrL0hxkWUuZI9Ly+2ky617H5bSpnvlMyBz8EgFCuI6yG8y6YXj5Jxp5XO+KuqWoC9muS7qxC6z6WUNrSaEVvdiC+rc0k60EfFzNrnbG5uHlp1V850NwGMx2NyzleM38vlTBedVJXhcIiqsjdyCyF4d71blIjg5mhQsDlgP1BAKUWapglxWc3H2aW7M5vNgOO3eVmWk5JuoSEEBoNBx7l+1AkP5j8wseUqgzkjlVIkLoe6zk6Xr4UQFhR0NRzcmUtHX4tJ2+98zgzifqlizGyhWcdRUZibhrujRyfq+FEOVrQ0oQKKSLhkqEYkoEbBxaR4DkZBAhhFHMNV1iuX7zbi/extqjiyRLS5hl0Rc8DmJhQxDy31Ud4SlylFRA450XI53m5X54yXatgdtGCqgrq6iBSAikggOg5N04Qux3Wc6XTK6uoqs8l0PqFQ130sZRzn4sWLnFq/hpqQVPWwZrMVihvt2ry1F6C4MUsNLnbi6MxlOfqZGZQCZsQYZTKZ1E3T4O7UVcVkND5kcru7uxAUjYH19XX29vYIIXhuypcPBwVdSizygUdXIUIAs8uzgbsztYyiuLuoKChIECwqgri4aF3XZbUSkjULWiulEKpIMaM36LdcjBNDTa+qybNmtLYy/B/tSLpLNnKTwEFpDdtyObhuctkhrsQYJYSwIiI3ATcBp4C+u/eBOsZ4y5kzZ8ILzz3X1nbxINPryip3p6oqLBfEQV3SSn/46A3XXz+Jy8mLVkqTGgkSXKLgGB5cQi9IG21ao12mn/l7AQjF34/z5wFdxXFgEo1vB6MP9gMJ8q577rmHrz/xOFsXthgMBqTpjKrfI6jQpES/12MymVBpwHL2Mmsu/sIHfv43SD6WLgdIKTGR2b1PPfXULaWUXs65F0IwoIQQrKqqtExpc7tUIMxfV3ta/6HOV96VNFVVMRwOcXePUaWI8Mz2czz4lw+yc36Lfr/P7mifwXCl9ZWUWen1Ge3t+/r6xuz++97xu2981Zk/0GyIe+uVu7u78tef/7vzZ8+eXTEzUVUPIfjSe0SstwT0krSxSNDlMqV77Zoma0QmqaF/asiFvQuMdvfae2Ig27wD6eBNZmNjwz72kY/91fWnb/j10c7uXihOdIwnfvDtjz78t5/5vb3pxc0QAlWlbePMEi5GcSgZkEuLuqsJFF0v4nxo/VlG80WG+ULFifNFxrpi6kbV6/vG2qm/CYW9nDNa9YnPnnu2evjhhz9+7oXn18I1QzwXzNLyVh/E/LwcIC4vxy1ARJHZyRVsKIUUG5om+zSMvu2Nfd5jIbiAO3FlZcXvvffer1XDwStI/g/ufr27b4rIUERqMws5Z8k5H0I4B3wKCIABMyDOP0t3j2pbkocQJLo4MAF685xWlxcmFRhus2nz2dOnNh4axHq/jpEqBHJOSLak+3nyq1U1eGrF5auI3A68A7gbuMnN+tPptNc0jXYZE23c/bFul4EdWoqqReR5oA9EEdEQglRVJRqCzGH1lhZ4KOcc5wkx1jj+zkj8ZzXLzTQxHo/RGJDvfv879ac+8+l/iSv9M26m8wd0kU26KOTzBvBJW72k8UWl0YVwVSW5wUGslqPmtBb7pJJpmub82nD9oV/+4Id/e7U33B9NxqSUiCIi29vbm7ML3kvabvXRjvVyYrMsx31eZodlwCJC8AMFHCc2K6CKmZ++duOaj1zc3f2dwbWD/dXVVUQDcWNjw157++vyY9/8OivD3iXaOQTqCtXych56nBNq6W44dPng08agbZsmk/X19TIej4N425EMgA6HQ7vxxhtfrOu6zZZM8Ox4dihkMTH19k/MlwfqLA+PogQEdRDzxaAYngslihwz6EZKM4yCUxiPR73V4WBVEdQcCuj+/rjc+bo7f+6G9et+q5QkOTeIOFUVMLOIqmczL4IQVEyQgour4CqYQHYju0n2bio/lDp093qxEwce8QJeMpWGUSm+k80hRix4Sx29qp787Nt+5sFSCvWgj6uwPxkjUUh5FrwkXYmxLNtwl5h3Z19deD3OBK629XRE1jmSOKs4lJT89le/Zufuu+7ZmY6mjgRCXRGq2BZ74swmo9CV1B3g5Yr3anpVx4XpEzo9l+SjGkKgmc7wYv6u+9553x2vPfOl6f7IxZWUM1sXt+ivDkl+cACynFZ2TLF8OvMjktElYAF6VU1JmRWvvvm+B37x7Xe//o5/JBcXV9ZWTzErCelXdA4EB7X8/EiIULVx/7jm3tU03a5GtMvWoeW5fuyVD73nA+9+99sf+GQoTGejGdPxjDg/dnJvT/u6lma2Kx/m/ahEl4+DksIsJSajaXrbm97y8d/86K/d9JOvPfP31/TWX2x2pykEmbc0M2CEIIg47gX3srDj5UYJ/J8d7JIfxRhje1ypykyMXojELIx3x+Wl15w+/6H3fOB9O3u7px997CvvefzsNz6xt7fHZDJB4ly7KgeOZocBLke9q2nFX0lka2trGfmiidZ1EN2dzc1NSinsTyfhmXPPDp/87pPvf+rpH96/fWHrraPp5JpZmvVTSqAqlrOL47GuxIJLiBE3o47VlTXsSioZy4Xrr71u71fe/0s3v/T0dVsrgxVyNuLyars2Uef1y1pRVdaHq2X91lfuvurWV/6FkT89Go+rF7Zf+OCz587dvb29fW1xu7k06axZeUnBX/7f3/vOj+/PRmpOG8GO6Tcsi1liMBgwmyai6I6KZMwpTaKqq8Mtz85pOirq2j+Lc9sCbWbnHkRHGyurnFpZ/dPbXnbLJ49MG0Zp+oZPPPhnX9p5emclxkjQtjN+koi0Z7eT6YiU1lfANusqXFSADPGoJy83KKA1jYX9AaJ6kISa43aQ9i1OVQK5jtUzaTrbM7MVjYFpM0X15MaeBqV4pjfoE+pq6O5uZlR1DwRid5KyLMvZUwihPQIyw3wp4nC46da2LeddGJyijF21r/PDOdWIyslg2zrBcYMmZY+D3utNeGp/PHIJShwOh5f10i4q7e21VWimbf2J+6Fiyr39NxJHiaEtAvam+1aa8jWb5Z/KolVA8a64u5yIV1ErmtKg5s8NqsEXY4xcvLiFxvpwItwlJXD4EKT7Hxn0aBkmiB94jaNYSa15BOF7P/z+ZlHeHILcEpwncP3WiVDdCXX10mzl+mA8dvurX3OhpOzb29v0VwbHZ+1HWWB7e3veDs1HduEwa4gImBNE2oxfobfSi5WGEjVcOTK4kiwT5yX7bDxBvDBpZoiq/i8T6UgXt7jmswAAAABJRU5ErkJggg==",xishoupenPath="/assets/xishoupen.ca6bb815.png",chuanghuPath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAIAAABK/LdUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMIUlEQVRYhQXBV3dc13kA0O/0e26bhkIMCgESBEUqKrHlSEkUrzzmIX84L3nxylq2o1iyKkmABEkQBAaDKXduO/1kb3T55tXl+TmlGBFo2xYhRAlxkTIUUfTWRxsRAcIBSHBG5tyHRV89O37UdvW6b7F2RErJcKeMCUCZwASCcxR5TpGO0nQtY4wzttls0qygl5dvJqPB5//4h7ZuPcJlnjXLBWOlIq2jPSNUQIodd8EaZLEXDIXb2fV8dmOM+ddv/6iNB8qIdpwyhKLyVkVPCUkiEBt6ydKAfbAh+LZav7y8pIyQvBxFylcUHGUr7XE29BHvJlsDBNbDxz50yA84G3NMEGYI+P2MMcbTjIpiEV3vIZOZ0RpHXTA64nnAdOOhYlGoRZ6NAUlGIc3S11fvqDM2MrIG+NvtTUsoBp8y8tmk7D1edehyvbl1qiyYpII4dOepZCQrS3X1liASAH65vlGOtcxm3p0U5TCbrIM/v/k46/oo5ZfDtHWxwUBxnGgXraOMcYSxB4gISUonRfFwVE46+6qtz/sKE3Q2GJwMSsDwwTYXN7Ozk33ea8aYYIwAACUuosG2fC639gBua/PD5qYG+3A8OOVDVjLr4MXNjNHwL6NtQROqvXPWcIDc+enO+KRk/Wz23zoz1o6ofLpdHKWi782btbnqYW2dQgRFiD5Ea0gESuK4zP8d04XV3zXth3WTMPHVZO8w5dyoi/VmPe9n0ew/2PGAggs0CSARyiMcf3KY9fDrrHmxRploDgv0ZKtMsTxf1+/WugnRo3g8KU88rEJ0AhEcAMzvRyMByc+V+9B3K+93BulnYzFh6K7Tbyv3rqmymO2LwSnOEO5roajmtgsNtrCszOu6qXw9HGVfsuHWKGlc/GFW3ajQOb8t/ZNpXoaUxxjBBRcxZx7x18bM9GpF6oTET7Lyk/FEYHh9u3zV6oomeYpPOXmQcyk9dL6wGaUAKQiP4bKpAIX9Mn823hoAuZi3b5StrEmQ/Xx3cFLm1MH7vi54RikjQBimHuC2rm6tn0ryfG94JLJla79b9ncWMcYOqX0+PhpQPOvrRa12eQqUUGoxRFlbENh8Ptk5zKXq4X+aatX2wbqTYXI22UoRvV/Z2Tr8ZK6zg1MCHABscN6aiTPTfPDF9nhj4Od5/XrTViFsZ8mng+JI0pXC5xt4sWgnCUy3weGOdiF2yOxz+P323hSx67X68/2s9vyhRJ/uFuM0Xfb4Za1mqjZRD7I04VQhCyREsAmBxzsPEio/tJvLNr5rnET0qwl/NEx6Cz8vut9sZTe+FOXxYMhVjZSlGAOlCmPXU/Kn27uFqZNM/k4Wg0HeW/jLvJ53RludC/NoLPfT0ZjEa6+AAriAEDccLpbtR9VCdCdD+Wg8FgG9nC/fdN2akiFVZ+NsWiSJhL7FGiVUEsIj6yz6/m6mrT7IyydbO7xfv/wwv45cBSdj83y3PBpNvYG7bjUQaQjgbQgR6wDvlov3VTfMto4GsCXcoppfrP3S01TKwyQ8ZXsjJha+Wym9lSSYUdoapWPmKJEWf719mAl6cXN3HSgKWAb1OKcno13v7dXN/dLQC7saHo3SZMTCDZcSSHS2fbgzPsyS9ab95U4tHXjOD0txxMkuwcsovlvU71V7OkhPUxhGT4NBzLoUw+Myu3VmOb9DPjDOdnKyKxMI5PU8zHvoKCbSTyyNBExQw4RG7BGgSTrSPvlxVqlgHNWjhO7LoqByrdRfm+re+TQrC8SYjw3HIZG088YhbwB+vb9qZcITnke6x5h27ctV3VrnIyckoRHhxlkSTHDI+QC00yYA3PfrWXPLQyZSPkyHDMX7rn9vqhZ5RdCQQvSN62rIhy46izyVjBJGUgj/cfw0UhIIAEDuwJPcol0XI0GIAHgPxkWAkBOyIqwjlAmOIfzu4FA5xwgVCCgAAdAWOm8CxYRSFEKIWBw9YACh3+SU0w7Dj+9eRUa4RqCDQc5zNHcGKEeYx+CwUygG4EmkSaK04ezt9dVwa/Lx47VgHLRJRbJiGlkPNgJgoARRgmMgEVCgiIn7ruMU981ms9mgi9cv3r0+T7LUhjgaDVS7KQTzPuqIHKKUYYYCOONtACCeYsaE7vqD3f3V/aLuasDRRJ8owJhGjCxGjmHAiLqAjAsoaGuklIQQjIGKhF7+ci4FPZ0et9Y45yaTMliFU+mVC9YBwpjiIAKggCPoiLmgbxfLut1Um9X+9NBCwJxziwChgIP3LoTAgBCEKaKKI4xB9x2npO3V9c0tbcHtPjwRB1NJExcgAKAIOpgJ40mEALB2YDAkJEpwwjIgQImoqvVke/fh2fPOBB2RSpAHn4ArASeAQoAOiMZorIIgiGKHIVrjgkc0cWEUGQL+Xy9exslWdVftpcXzctDlsQrqzap61/ZSpJ+UxUnCZtYnAkfMnLbaR43gL7fX9z5ynSDwO0VyPB7mGF1vmlfd5hb5PyTZdGuMfSTgIoSl6ilyoKLOKOa81C05m2T/NImO+cv77rICC/K4yJ6P8kyghXY/NVcnbFJGEJxpYzmAT/KNig8LdTZJdxOyUJu/LuNso7cz+p/74xEmpO8umrrD6FkyGURJLepzCgjAeX02HJwWw7UJf7/pOq8lNZ8Oi4eDwgCc39d3i+aepV+Oi+juFepTIoODJLaf4/hkd2od+fXOvFnfA/NfHG4dppzo7mNI3i6729o93ho4pELSUceow7gA+HpvLyPiemX+b7NhOh7vlo9LNkRh0Ta/rKvrXguZDqLICVTexhgi9gTDwWg0BLTuwm/r9V2IO2XxJCX7nAULtzX81qyaGHOZHZS590trNRUkrxUaxd478+O6vazrIuff7MltljiP/t6qy95ZS3ckHeX8tBxgBJRIHkVvFYSgNf5Zhdv1SrPu4Yh+kYsSiQ8qnlf9bNlmSf0Po61pnmYiuJ7SkFLUmYxSg+Sf7993pDgcFV8VKcv89aa+rMMHHVj0T/Pi6TBNGbzt1p5x51z0gKkEgm+b/n1rHuTsbLBzIJCy9m/N4mWtALEHO8Nn43QHpevgZqbbRylHjHrhHFYaIDrxz9u7pzlRGH5b2fP13Dj3NMufpoM846vgXs03l33/x50sTUjUkRthA3S+OU7p852kDOlNFX5oVRXCbqSPCjHdTmKQb1f6p74rBZlmyIWWBkodoBHAvx0e7KXk46r9Xm3qJR4O+KOd8XGSeGVfrlaXpl87mxqKELERTPAoGobg8c54V8i6aa765nWtG++eDPPPhzl27vru/rZDax175A+ygUM2okCll9wkHDSj1XdVvFgb4vnpVD6SXET7a1W90ND2ZBL507Q43OGZxHc2OBdCbCDabeDzlb6o0W2/3Mr4t5NxjuFSLd+3qFNpA81RIZ7x5GDIvWohMkpyiRISvPj5g3/r+50i/WI4FhRuNv2HSi8McEE/yeijjO5x/M5QZSISJDoPhLWYvdysfqk22zz7ZntvmrCVbr/Xy3sfmROlg29GcW8wvAb/TrWPA1jXUGcrB1szokzovh0djUt2uZq/tTZCYNQeS3GQlwWTlVL/u2ze+6tv9g6SEFC1EYMiRQHWm7Ni8KxkC6u+qzbzzoKjexwfD/Jpnr4JdjHfvG/X46E8zkvAnGIUXQw5JNPd6Uq5d9crhxyzfJSQnYJzCTPb/LC4653grOgBcCIjxplIGGIo4q3hqOby++W8xaB9yCnfLwaTTFTe/Gk520SRGtxEOgQWMXMuUiApw5m0MJ/dX3EghGxpOMkSx9BMm2rdeu8ZTbKI+s06dxg0NB5tIsk86lurIvl1dpPgnIDdlnRScgjd+f39QntFBIOOMimCI9qgCAgIZVREbSOBx9PJWZJyDDyAJaF3duwTMRkRD9FGQoBL5DUMOdwQjCXDUsiMjYL/+snRUPlMEBqhNlC7vtxJnhJKIAbKkfVKsXEqOURGEPWmu51/GE0HmTJ87gKCDoMHnyFKfDQhOk5wIpzzaqYMilik66s3VtdXq9u97XGigS7BZ35x57DHkucjRnXsQ1SUIuuENzaXwpv6/HZedy2aXb+/uHxDg+MAdVe31ubFQKjYgrE0EkK4B2R9wAQx7lnAnfPKPPrs03VT66oSEQOElhDGiY9OG+O954QmiGEbIuPGW0QgxthrJ2X2//AycqMYKK21AAAAAElFTkSuQmCC",xiaoguiziPath="/assets/xiaoguizi.bc8dc76f.png",yiguiPath="/assets/yigui.d87e6579.png",maojingPath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAqCAYAAAA51uKRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAL70lEQVRYhZ1Ya4xd11X+1tr7nHNfc2fGnrFnPDZ2bOdRx2ODU+I4UyelpS00bqJYraqWIFWCEBEhVUgoSEjAH/gREKhCQgjxA5BS2qZq1FR1oCU0VpImriOw83Ds2E7i2pnE8/Cd8TzuPefsvdfix73nzp3xQAJrdDV3NOfs9e31/Naiubk5iAiYGd571Ot1xHEMVUUhRIT1RFW7/xMREBEajQapqjLzDe+tPbPQOzg4CADgdbV8RBERhBAgIl0FcRwT9aAgIhARVHXVZz2AHwlM7wuFBOdBChhjwMwQEagqgvOiQQCAet9fC6TA22s9+5FMgNUuAQBjLSSEtmWgALUPtta2HycYAKKqWgAtlBeWWgvm/+Sm3ptJCAATwERKVAYzBIo0z6gDPABgEaG1QHrB9Mr/K2ZUFUoAM0OJ/pWY/4iIIwUZVeUoiQvgQVUJaD9bBHVh5eJTyEd2042AAr957tzxM+fO3hQnydD+/ftr27ZsvcqWnsjz9AOApXN7obboWvestQ4XmRBCgDEGIQQAgGAlRqjzE0JoH0CEp350rPHN73z7wOjo6FQefPiX7z1536LLYG183QpLCIGAdoD3ZtMNFu7NJiLqZkSvybqxIQLvHIL3sNaCmXF16urtp149Hf3BHz527NDBQ99/8Mj9/1SJS62XXvzpXcwsXkL3/Y5CWptRhRF6xfYC6H2AmSmEoMYYgA2kYxXnHJaWlo6MjIxcL5fK51yeHU/i5MUvPXi0LAGR974UVJvGmlUxUrimAFgUvVXZFDrp2XVBRwikvRYqXBnHMUZHR3c3Gg06f+H89iRObkpbLYxtGvnu6PCmx0WkYUvxWtewqpKIoDfNizMLMY899lg30pkZ1lpYaxFUYI1p36IAyAQi+jKIUK3X3DPHjt194eKF2/fvHc+Y6MXgBbl3SPMclk37Th2jo5Ms6xW9crncdlOtVlvlJlWlZrOpXgJiG0FVybJR1XYNIaJ+E9nWL+7bf3xk0+Y3n3zyyaOT01e3jG0aobSZ6YbBQTTzDEYB7WjuKPbFn50wuKGQ2iRJVoFptVraarXA1mApzRBC4MhYqOqgEnbHcdzK8zwyCJicnBzJgsOrZ8+M12q136za8htpmr6VlEuRBc2tV2UB3FjtCssXPmRu179Wq4WlpSVESQyIQlUtRA8A2FGpVZebzWbfufNvHTx58sSnMojbfuvuN95/b3Jr89r88Mf3HfjPiYmJf6vUqsukeFFEgqou9QZyb8ErwBa6SVUhPoCNAQAsLi3COUepCWMxY4OK32mjpC9z4k6dfmPfqVOn7rHQ6GO7dl2YmJj4VhzHC865+s+vXDr8womXfmV+caFv7/j463cdOPyd0Q2DLjD8cu5/WrdYAAlaxFuNd+8bisV0dHYtE0IAEcF7D2MM0jyj5eXlalWrS5W+8r5rMx9MvPLa6YlTZ9/Y40jDxCcOPn/LzTtfHihtPJdlWS4iUqlUkOd5v4l4YPra7G0/Of7cgwuNa5u3Dg43D3/mc0+MjIzOWye/oKJ/jsSAfDuc18YMFSnNxiB3OWU+GxXVweX55sjLLz3/9fMXzu3dPDIydevePSfuuOOOHy/NN6oGOgPtv0gK7733RJQy8wYwqgMDdU8G296+en7iZy+8/GvvvHd5y+bRkebnJj791vZtOyJV/WNq+lebRjhJEmHilWwNKnDOgYwxzGQvXb70qROvnPzauSsX92zaMJjefefB/9ixfddJ0vhac6EpA5XalG81IZEXY8xVVV1SVUTG7syyNKr21a4kSTLRIvN8BJvPLEz91k9eOP7QuxevjI2MDsV3/tK47L95368KzHsSvAtBpRS3k4hc8CA2tNxaHH/6Bz/403cv//yWsbGxa3ceuPv7e27dddZnzapLM5v6kKuaawAWKqWkGRRpCEGMMZPiAwGyyxgz1VevL6rIOCm/LmkAV/WLQn54cl4+OP3aqaOnXjl+3+bBre6uQwdo78duH2PAU4c8UJpnxBFv+t5TT/3V/Pz8jiNHjnyrr69vKUJ5Nl+a3Xn17Ve/dPHN/xpPIoZzGRNrgEgIKl5VnwXw98pUT2z0jTRNnwPku6UkeThB/IDTSkbUSj5+z+HLAzdNfMWDb0ZYPvDMM88ffvPd1/c8+juPPlQtVX5owAoANo6sNhbm+y+cP7/3kUce+cuNgxsb07PTuwPn2WBJ+l84/vShxqUz1vglkLZ7l/ceBlUEkYei2BxVoNJqtVAul2+OrP2qc67W1Axq+hMKi5ieurj7y18fd2pL346Mf+ULX/j1U5f/8dLjM3Mzf202bj5RjSszAMDOOx6oDyxv2bLl8rPPPnt0rnFtQyUpzdST/kut+fQvNFWUbRmlqIZybRhUGkLUP4ZSvY5SvQ5NyhWu1pAMDML21ZAz11AqIerbiod/70/mfvnOz8jU9LKYeGDccwlA/PaZdy4NzczMxMPDw9OlOJ7rVmBDVhg8eeS++//uh88c++1//uYTjy62Fvu3bBi99MD9n/9bcrM2TedgkjriPENkE+R5E77TtwwREDwsFOo8LDNCCNg8PCgD2/fNy8/+vdLMryXf+Ie/+bPUR48GXRxevD4z9OCnv3iibmuf9953KZ4NIcAFbzZtHHr/N77y1ccn37+y89z5swdHNo6eVlUWkS5BAlZI2IdJ2sxgjNU4LsXMjHs/cXhyfkEukkmnt20dvb5j0/avreU11loLIgqttHWmVCoNbdo4NDd2zydPB4crjbnpTwJQIipIdqd1rE+oe6VaKkurmW0OCpSTEsZv2/O0UPIjCa5JRAvGGLRarWKaaIMp+lJkrGfQVZfls83lbEu10t/03osxBiSKQAJ0SLgLDpb/dy6/vLRg48SmzAxihWW9CYrXhA0xs3rvu9ShEDbGdE0lPqBSLntDPJXnOZVKpYUVa7RbvvL6o+5aiaxCJGS5eI3iEgC9qN6DJajLclhrUZCtrmVmZ2etMcZHUQTnHOr1GgY2DLrgSeKIThYPG2Mg2qYZxhhAA9psoADX+12QuybmFq43BbY/ywM1l7MzLm2h3l/GcqtFcShps9mEMcYMDg4GAGBmDqpq8jyHc64YxjWJE1hrA6QdG0GlO8b+T4uAXvHeI0t9IyDJ8hBLlsqs4QRLi8twwXOe5wAQGWO6prHOOY3jWMhwZAjOSyBLsUIB770puEjuHMqJgTgHVcKHwYlNDFD03qFD9y7s2XNbFMXVqz7NEMgzxzHEC5g5iEg3E2zHd2qIAkRhyCq0nbpGEawTGCUQLLI8oBTFoJDDGQBEK7St5zvZdhx6v+ySWw7+/lg6U6O0MZUql2xSCrFXFwgsItqblb2jigArhDklJCGi7ZnxUBuASKAIcBJACOCwehhdu3vJQwvw+e9K8JszF15LwBLZJAMRO5eD4+iGwcn20D9CDz8lQc6UvEMSQT2DgU5vsoishYNfNQet4rsEVJMyYpY+Fn/ZQ7cEE80pk4EGscZ09har+fCq6/VOgQmgTrzETAjMKEURIihSB1gy0GC6ytfMWyAQ5pcW4fK0Fhud9MQLXhhgKAFgshBa4cLrglllbm7apVZj96JLZXp+3gSbomwC8gCYKIbV1ool1nFVHg9p7sJ1hqYA5oK0tycGqnnwsMbcUMK7g1UnkpiIBAC8xN70b3v73gcePuhda48mteFEWlHmFUF1o1F+rgDTu9frrNXEheZnh0a2Xs6zTAFOoygC1KtqSNiUsk6IrhJqNBrdQua9p3q9rlEUwTvAxcQV5wQ2gieQlaAgAxAQIL39oD0KQ03u8sg5h74IaZ5GupwugwxgTQUhNI0gh7WDQSXrLhgHBgZWLNMzanYnwChaRh4qgsiTqCLTmEhyJWMoBCGLkhTVuZh7vPc+pMG7zGHKCCcwakwEQXuLYUgDG4PcCyzduCLpgmFm5Hm+EgNURdUAQFmZgCqgsGUAUDbQEALYdhaL1K7KUWKx1HRgSyiRFSDvNAnDoKABViGApbyrcxWYorx3m2Xn94dRhILTrMdtuv2rvaZTrBMgxfahF5AtDis2ld1R80P6j3Nu1SahaBvMTD0XuTFKC8X2xg3efwP0oy5oxFrLMgAAAABJRU5ErkJggg==",shengdanshuPath="/assets/shengdanshu.368d93b2.png",shengdanshuPathGIF="/assets/shengdanshu.189a0250.gif",frames$2={"5b7e1c57461cad9bcb5007d070c101a41.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5b7e1c57461cad9bcb5007d070c101a416.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5b7e1c57461cad9bcb5007d070c101a450.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"5b7e1c57461cad9bcb5007d070c101a465.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$2={"5b7e1c57461cad9bcb5007d070c101a":["5b7e1c57461cad9bcb5007d070c101a41.png","5b7e1c57461cad9bcb5007d070c101a416.png","5b7e1c57461cad9bcb5007d070c101a450.png","5b7e1c57461cad9bcb5007d070c101a465.png"]},meta$2={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"shendanshu.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:7e9c84f9b86e439bb71612bec6372cb3:ec0344722fca4014f958de912f818093:44d583eed4e17ad05d6a8952f2e07d95$"},shengdanshuPathJS={frames:frames$2,animations:animations$2,meta:meta$2},shuPath="/assets/shu.17bf9ded.png",shuPathGIF="/assets/shu.a2e087f8.gif",frames$1={"f31b4a9dae7041e171ce5a56dda5d8a91.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"f31b4a9dae7041e171ce5a56dda5d8a92.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"f31b4a9dae7041e171ce5a56dda5d8a93.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}},"f31b4a9dae7041e171ce5a56dda5d8a94.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620},anchor:{x:.5,y:.5}}},animations$1={f31b4a9dae7041e171ce5a56dda5d8a:["f31b4a9dae7041e171ce5a56dda5d8a91.png","f31b4a9dae7041e171ce5a56dda5d8a92.png","f31b4a9dae7041e171ce5a56dda5d8a93.png","f31b4a9dae7041e171ce5a56dda5d8a94.png"]},meta$1={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"shu.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:8606dabc83be1929ae9e15f38f6b4816:87b6632b11a229b3421f0aa278d7ae9d:78d9ce5490c3fdb47b00af3f18e93e81$"},shuPathJS={frames:frames$1,animations:animations$1,meta:meta$1},huapenPath="/assets/huapen.393f21a8.png",huapenPathGIF="/assets/huapen.0e627e97.gif",frames={"24afb299ff52c2481dfd0c991cb8d57a3.png":{frame:{x:0,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"24afb299ff52c2481dfd0c991cb8d57a21.png":{frame:{x:620,y:0,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"24afb299ff52c2481dfd0c991cb8d57a30.png":{frame:{x:0,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}},"24afb299ff52c2481dfd0c991cb8d57a50.png":{frame:{x:620,y:620,w:620,h:620},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:620,h:620},sourceSize:{w:620,h:620}}},animations={"24afb299ff52c2481dfd0c991cb8d57a":["24afb299ff52c2481dfd0c991cb8d57a3.png","24afb299ff52c2481dfd0c991cb8d57a21.png","24afb299ff52c2481dfd0c991cb8d57a30.png","24afb299ff52c2481dfd0c991cb8d57a50.png"]},meta={app:"https://www.codeandweb.com/texturepacker",version:"1.0",image:"huapen.png",format:"RGBA8888",size:{w:1240,h:1240},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:da773b61d24d93139f4f11e038f86f13:9845213ea2a2a358e6e4db74fa946728:323398429be66a633f7738713c0499c4$"},huapenPathJS={frames,animations,meta},LOAD_BASE=t=>Promise.reject(new Error(`No base found for "${t}"`));class Multibases{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||LOAD_BASE;for(const r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const LOAD_CODEC=t=>Promise.reject(new Error(`No codec found for "${t}"`));class Multicodecs{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||LOAD_CODEC;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];const s=await this._loadCodec(e);return r[e]==null&&this.addCodec(s),s}listCodecs(){return Object.values(this._codecsByName)}}const LOAD_HASHER=t=>Promise.reject(new Error(`No hasher found for "${t}"`));class Multihashes{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||LOAD_HASHER;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];const s=await this._loadHasher(e);return r[e]==null&&this.addHasher(s),s}listHashers(){return Object.values(this._hashersByName)}}var encode_1$1=encode$e,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$e(t,e,r){e=e||[],r=r||0;for(var s=r;t>=INT$1;)e[r++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[r++]=t&255|MSB$2,t>>>=7;return e[r]=t|0,encode$e.bytes=r-s+1,e}var decode$f=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,s){var r=0,s=s||0,n=0,i=s,o,a=t.length;do{if(i>=a)throw read$1.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=n<28?(o&REST$1$1)<<n:(o&REST$1$1)*Math.pow(2,n),n+=7}while(o>=MSB$1$1);return read$1.bytes=i-s,r}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$f,encodingLength:length$1},_brrp_varint=varint$1;const decode$e=(t,e=0)=>[_brrp_varint.decode(t,e),_brrp_varint.decode.bytes],encodeTo=(t,e,r=0)=>(_brrp_varint.encode(t,e,r),e),encodingLength=t=>_brrp_varint.encodingLength(t),equals$2=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$3=t=>new TextEncoder().encode(t),toString$3=t=>new TextDecoder().decode(t),create$3=(t,e)=>{const r=e.byteLength,s=encodingLength(t),n=s+encodingLength(r),i=new Uint8Array(n+r);return encodeTo(t,i,0),encodeTo(r,i,s),i.set(e,n),new Digest(t,r,e,i)},decode$d=t=>{const e=coerce(t),[r,s]=decode$e(e),[n,i]=decode$e(e.subarray(s)),o=e.subarray(s+i);if(o.byteLength!==n)throw new Error("Incorrect length");return new Digest(r,n,o,e)},equals$1=(t,e)=>{if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&equals$2(t.bytes,r.bytes)}};class Digest{constructor(e,r,s,n){this.code=e,this.size=r,this.digest=s,this.bytes=n}}function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=n}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var y=0,b=0,x=0,_=g.length;x!==_&&g[x]===0;)x++,y++;for(var w=(_-x)*u+1>>>0,v=new Uint8Array(w);x!==_;){for(var S=g[x],M=0,C=w-1;(S!==0||M<b)&&C!==-1;C--,M++)S+=256*v[C]>>>0,v[C]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=M,x++}for(var A=w-b;A!==w&&v[A]===0;)A++;for(var X=l.repeat(y);A<w;++A)X+=t.charAt(v[A]);return X}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var y=0;if(g[y]!==" "){for(var b=0,x=0;g[y]===l;)b++,y++;for(var _=(g.length-y)*c+1>>>0,w=new Uint8Array(_);g[y];){var v=r[g.charCodeAt(y)];if(v===255)return;for(var S=0,M=_-1;(v!==0||S<x)&&M!==-1;M--,S++)v+=a*w[M]>>>0,w[M]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");x=S,y++}if(g[y]!==" "){for(var C=_-x;C!==_&&w[C]===0;)C++;for(var A=new Uint8Array(b+(_-C)),X=b;C!==_;)A[X++]=w[C++];return A}}}function m(g){var y=f(g);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:m}}var src$1=base$1,_brrp__multiformats_scope_baseX=src$1;class Encoder{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,r,s,n){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=n,this.encoder=new Encoder(e,r,s),this.decoder=new Decoder(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:t,prefix:e,encode:r,decode:s})=>new Codec(t,e,r,s),baseX=({prefix:t,name:e,alphabet:r})=>{const{encode:s,decode:n}=_brrp__multiformats_scope_baseX(r,e);return from$1({prefix:t,name:e,encode:s,decode:i=>coerce(n(i))})},decode$c=(t,e,r,s)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,l=0,c=0;for(let u=0;u<i;++u){const d=n[t[u]];if(d===void 0)throw new SyntaxError(`Non-${s} character`);l=l<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},encode$d=(t,e,r)=>{const s=e[e.length-1]==="=",n=(1<<r)-1;let i="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,i+=e[n&a>>o];if(o&&(i+=e[n&a<<r-o]),s)for(;i.length*r&7;)i+="=";return i},rfc4648=({name:t,prefix:e,bitsPerChar:r,alphabet:s})=>from$1({prefix:e,name:t,encode(n){return encode$d(n,s,r)},decode(n){return decode$c(n,s,r,t)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"})),format$3=(t,e)=>{const{bytes:r,version:s}=t;switch(s){case 0:return toStringV0(r,baseCache(t),e||base58btc.encoder);default:return toStringV1(r,baseCache(t),e||base32.encoder)}},cache=new WeakMap,baseCache=t=>{const e=cache.get(t);if(e==null){const r=new Map;return cache.set(t,r),r}return e};class CID{constructor(e,r,s,n){this.code=r,this.version=e,this.multihash=s,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,s=create$3(e,r);return CID.createV1(this.code,s)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,r){const s=r;return s&&e.code===s.code&&e.version===s.version&&equals$1(e.multihash,s.multihash)}toString(e){return format$3(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof CID)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:s,code:n,multihash:i,bytes:o}=r;return new CID(s,n,i,o||encodeCID$1(s,n,i.bytes))}else if(r[cidSymbol]===!0){const{version:s,multihash:n,code:i}=r,o=decode$d(n);return CID.create(s,i,o)}else return null}static create(e,r,s){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(s.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,r,s,s.bytes)}case 1:{const n=encodeCID$1(e,r,s.bytes);return new CID(e,r,s,n)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,r){return CID.create(1,e,r)}static decode(e){const[r,s]=CID.decodeFirst(e);if(s.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=CID.inspectBytes(e),s=r.size-r.multihashSize,n=coerce(e.subarray(s,s+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");const i=n.subarray(r.multihashSize-r.digestSize),o=new Digest(r.multihashCode,r.digestSize,i,n);return[r.version===0?CID.createV0(o):CID.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const s=()=>{const[d,f]=decode$e(e.subarray(r));return r+=f,d};let n=s(),i=DAG_PB_CODE;if(n===18?(n=0,r=0):i=s(),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);const o=r,a=s(),l=s(),c=r+l,u=c-o;return{version:n,codec:i,multihashCode:a,digestSize:l,multihashSize:u,size:c}}static parse(e,r){const[s,n]=parseCIDtoBytes(e,r),i=CID.decode(n);return baseCache(i).set(s,e),i}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const r=e||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${t}`)]}case base58btc.prefix:{const r=e||base58btc;return[base58btc.prefix,r.decode(t)]}case base32.prefix:{const r=e||base32;return[base32.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,r)=>{const{prefix:s}=r;if(s!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const n=e.get(s);if(n==null){const i=r.encode(t).slice(1);return e.set(s,i),i}else return n},toStringV1=(t,e,r)=>{const{prefix:s}=r,n=e.get(s);if(n==null){const i=r.encode(t);return e.set(s,i),i}else return n},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID$1=(t,e,r)=>{const s=encodingLength(t),n=s+encodingLength(e),i=new Uint8Array(n+r.byteLength);return encodeTo(t,i,0),encodeTo(e,i,s),i.set(r,n),i},cidSymbol=Symbol.for("@ipld/js-cid/CID"),textDecoder$2=new TextDecoder;function decodeVarint(t,e){let r=0;for(let s=0;;s+=7){if(s>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const n=t[e++];if(r+=s<28?(n&127)<<s:(n&127)*2**s,n<128)break}return[r,e]}function decodeBytes(t,e){let r;[r,e]=decodeVarint(t,e);const s=e+r;if(r<0||s<0)throw new Error("protobuf: invalid length");if(s>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,s),s]}function decodeKey(t,e){let r;return[r,e]=decodeVarint(t,e),[r&7,r>>3,e]}function decodeLink(t){const e={},r=t.length;let s=0;for(;s<r;){let n,i;if([n,i,s]=decodeKey(t,s),i===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,s]=decodeBytes(t,s)}else if(i===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,s]=decodeBytes(t,s),e.Name=textDecoder$2.decode(o)}else if(i===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(n!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,s]=decodeVarint(t,s)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(s>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let r=0,s,n=!1,i;for(;r<e;){let a,l;if([a,l,r]=decodeKey(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(l===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,r]=decodeBytes(t,r),s&&(n=!0)}else if(l===2){if(n)throw new Error("protobuf: (PBNode) duplicate Links section");s||(s=[]);let c;[c,r]=decodeBytes(t,r),s.push(decodeLink(c))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${l}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return i&&(o.Data=i),o.Links=s||[],o}const textEncoder$3=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const s=textEncoder$3.encode(t.Name);r-=s.length,e.set(s,r),r=encodeVarint(e,r,s.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=encodeVarint(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function encodeNode(t){const e=sizeNode(t),r=new Uint8Array(e);let s=e;if(t.Data&&(s-=t.Data.length,r.set(t.Data,s),s=encodeVarint(r,s,t.Data.length)-1,r[s]=10),t.Links)for(let n=t.Links.length-1;n>=0;n--){const i=encodeLink(t.Links[n],r.subarray(0,s));s-=i,s=encodeVarint(r,s,i)-1,r[s]=18}return r}function sizeLink(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+sov(r)}if(typeof t.Name=="string"){const r=textEncoder$3.encode(t.Name).length;e+=1+r+sov(r)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+sov(r)}if(t.Links)for(const r of t.Links){const s=sizeLink(r);e+=1+s+sov(s)}return e}function encodeVarint(t,e,r){e-=sov(r);const s=e;for(;r>=maxUInt32;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,s}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$2=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const r=t.Name?textEncoder$2.encode(t.Name):[],s=e.Name?textEncoder$2.encode(e.Name):[];let n=r.length,i=s.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(r[o]!==s[o]){n=r[o],i=s[o];break}return n<i?-1:i<n?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function asLink(t){if(typeof t.asCID=="object"){const r=CID.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=CID.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=CID.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=CID.decode(t.Hash)))}catch(s){throw new TypeError(`Invalid DAG-PB form: ${s.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=textEncoder$2.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(t,e=[]){return prepare({Data:t,Links:e})}function createLink(t,e,r){return asLink({Hash:r,Name:t,Tsize:e})}const name$d="dag-pb",code$6=112;function encode$c(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const s={};return r.Hash&&(s.Hash=r.Hash.bytes),r.Name!==void 0&&(s.Name=r.Name),r.Tsize!==void 0&&(s.Tsize=r.Tsize),s})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$b(t){const e=decodeNode(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(s=>{const n={};try{n.Hash=CID.decode(s.Hash)}catch{}if(!n.Hash)throw new Error("Invalid Hash field found in link, expected CID");return s.Name!==void 0&&(n.Name=s.Name),s.Tsize!==void 0&&(n.Tsize=s.Tsize),n})),r}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,name:name$d,code:code$6,encode:encode$c,decode:decode$b,prepare,validate,createNode,createLink},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$1(t))return"Buffer";const r=getObjectType(t);return r||"Object"}function isBuffer$1(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,r,s){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=s}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,r,s){this.type=e,this.value=r,this.encodedLength=s,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$1=new TextEncoder;function isBuffer(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$2=useBuffer?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):utf8Slice(t,e,r):(t,e,r)=>r-e>64?textDecoder$1.decode(t.subarray(e,r)):utf8Slice(t,e,r),fromString$2=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$1.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,r)=>isBuffer(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),concat$1=useBuffer?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let s=0;for(let n of t)s+n.length>r.length&&(n=n.subarray(0,r.length-s)),r.set(n,s),s+=n.length;return r},alloc=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare(t,e){if(isBuffer(t)&&isBuffer(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let r;const s=t.length;let n=null;const i=[];for(let o=0;o<s;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===s){(e-=3)>-1&&i.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&i.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function utf8Slice(t,e,r){const s=[];for(;e<r;){const n=t[e];let i=null,o=n>239?4:n>223?3:n>191?2:1;if(e+o<=r){let a,l,c,u;switch(o){case 1:n<128&&(i=n);break;case 2:a=t[e+1],(a&192)===128&&(u=(n&31)<<6|a&63,u>127&&(i=u));break;case 3:a=t[e+1],l=t[e+2],(a&192)===128&&(l&192)===128&&(u=(n&15)<<12|(a&63)<<6|l&63,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:a=t[e+1],l=t[e+2],c=t[e+3],(a&192)===128&&(l&192)===128&&(c&192)===128&&(u=(n&15)<<18|(a&63)<<12|(l&63)<<6|c&63,u>65535&&u<1114112&&(i=u))}}i===null?(i=65533,o=1):i>65535&&(i-=65536,s.push(i>>>10&1023|55296),i=56320|i&1023),s.push(i),e+=o}return decodeCodePointsArray(s)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let r="",s=0;for(;s<e;)r+=String.fromCharCode.apply(String,t.slice(s,s+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=r.length-(this.maxCursor-this.cursor)-1;r.set(e,n)}else{if(r){const n=r.length-(this.maxCursor-this.cursor)-1;n<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=alloc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const s=this.chunks[0];e&&this.cursor>s.length/2?(r=this.cursor===s.length?s:s.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=slice(s,0,this.cursor)}else r=concat$1(this.chunks,this.cursor);return e&&this.reset(),r}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,r){if(t.length-e<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,r){assertEnoughData(t,e,1);const s=t[e];if(r.strict===!0&&s<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint16(t,e,r){assertEnoughData(t,e,2);const s=t[e]<<8|t[e+1];if(r.strict===!0&&s<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint32(t,e,r){assertEnoughData(t,e,4);const s=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&s<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return s}function readUint64(t,e,r){assertEnoughData(t,e,8);const s=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],n=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(s)<<BigInt(32))+BigInt(n);if(r.strict===!0&&i<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,r,s){return new Token(Type.uint,readUint8(t,e+1,s),2)}function decodeUint16(t,e,r,s){return new Token(Type.uint,readUint16(t,e+1,s),3)}function decodeUint32(t,e,r,s){return new Token(Type.uint,readUint32(t,e+1,s),5)}function decodeUint64(t,e,r,s){return new Token(Type.uint,readUint64(t,e+1,s),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,r){if(r<uintBoundaries[0]){const s=Number(r);t.push([e|s])}else if(r<uintBoundaries[1]){const s=Number(r);t.push([e|24,s])}else if(r<uintBoundaries[2]){const s=Number(r);t.push([e|25,s>>>8,s&255])}else if(r<uintBoundaries[3]){const s=Number(r);t.push([e|26,s>>>24&255,s>>>16&255,s>>>8&255,s&255])}else{const s=BigInt(r);if(s<uintBoundaries[4]){const n=[e|27,0,0,0,0,0,0,0];let i=Number(s&BigInt(4294967295)),o=Number(s>>BigInt(32)&BigInt(4294967295));n[8]=i&255,i=i>>8,n[7]=i&255,i=i>>8,n[6]=i&255,i=i>>8,n[5]=i&255,n[4]=o&255,o=o>>8,n[3]=o&255,o=o>>8,n[2]=o&255,o=o>>8,n[1]=o&255,t.push(n)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function decodeNegint8(t,e,r,s){return new Token(Type.negint,-1-readUint8(t,e+1,s),2)}function decodeNegint16(t,e,r,s){return new Token(Type.negint,-1-readUint16(t,e+1,s),3)}function decodeNegint32(t,e,r,s){return new Token(Type.negint,-1-readUint32(t,e+1,s),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,r,s){const n=readUint64(t,e+1,s);if(typeof n!="bigint"){const i=-1-n;if(i>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,i,9)}if(s.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(n),9)}function encodeNegint(t,e){const r=e.value,s=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;encodeUintValue(t,e.type.majorEncoded,s)}encodeNegint.encodedSize=function(e){const r=e.value,s=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;return s<uintBoundaries[0]?1:s<uintBoundaries[1]?2:s<uintBoundaries[2]?3:s<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function toToken$3(t,e,r,s){assertEnoughData(t,e,r+s);const n=slice(t,e+r,e+r+s);return new Token(Type.bytes,n,r+s)}function decodeBytesCompact(t,e,r,s){return toToken$3(t,e,1,r)}function decodeBytes8(t,e,r,s){return toToken$3(t,e,2,readUint8(t,e+1,s))}function decodeBytes16(t,e,r,s){return toToken$3(t,e,3,readUint16(t,e+1,s))}function decodeBytes32(t,e,r,s){return toToken$3(t,e,5,readUint32(t,e+1,s))}function decodeBytes64(t,e,r,s){const n=readUint64(t,e+1,s);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,n)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$2(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const r=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,r.length),t.push(r)}encodeBytes.encodedSize=function(e){const r=tokenBytes(e);return encodeUintValue.encodedSize(r.length)+r.length};encodeBytes.compareTokens=function(e,r){return compareBytes(tokenBytes(e),tokenBytes(r))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare(t,e)}function toToken$2(t,e,r,s,n){const i=r+s;assertEnoughData(t,e,i);const o=new Token(Type.string,toString$2(t,e+r,e+i),i);return n.retainStringBytes===!0&&(o.byteValue=slice(t,e+r,e+i)),o}function decodeStringCompact(t,e,r,s){return toToken$2(t,e,1,r,s)}function decodeString8(t,e,r,s){return toToken$2(t,e,2,readUint8(t,e+1,s),s)}function decodeString16(t,e,r,s){return toToken$2(t,e,3,readUint16(t,e+1,s),s)}function decodeString32(t,e,r,s){return toToken$2(t,e,5,readUint32(t,e+1,s),s)}function decodeString64(t,e,r,s){const n=readUint64(t,e+1,s);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,n,s)}const encodeString=encodeBytes;function toToken$1(t,e,r,s){return new Token(Type.array,s,r)}function decodeArrayCompact(t,e,r,s){return toToken$1(t,e,1,r)}function decodeArray8(t,e,r,s){return toToken$1(t,e,2,readUint8(t,e+1,s))}function decodeArray16(t,e,r,s){return toToken$1(t,e,3,readUint16(t,e+1,s))}function decodeArray32(t,e,r,s){return toToken$1(t,e,5,readUint32(t,e+1,s))}function decodeArray64(t,e,r,s){const n=readUint64(t,e+1,s);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,n)}function decodeArrayIndefinite(t,e,r,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,r,s){return new Token(Type.map,s,r)}function decodeMapCompact(t,e,r,s){return toToken(t,e,1,r)}function decodeMap8(t,e,r,s){return toToken(t,e,2,readUint8(t,e+1,s))}function decodeMap16(t,e,r,s){return toToken(t,e,3,readUint16(t,e+1,s))}function decodeMap32(t,e,r,s){return toToken(t,e,5,readUint32(t,e+1,s))}function decodeMap64(t,e,r,s){const n=readUint64(t,e+1,s);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,n)}function decodeMapIndefinite(t,e,r,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,r,s){return new Token(Type.tag,r,1)}function decodeTag8(t,e,r,s){return new Token(Type.tag,readUint8(t,e+1,s),2)}function decodeTag16(t,e,r,s){return new Token(Type.tag,readUint16(t,e+1,s),3)}function decodeTag32(t,e,r,s){return new Token(Type.tag,readUint32(t,e+1,s),5)}function decodeTag64(t,e,r,s){return new Token(Type.tag,readUint64(t,e+1,s),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,r,s){if(s.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return s.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,r,s){if(s.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,r,s){return createToken(readFloat16(t,e+1),3,s)}function decodeFloat32(t,e,r,s){return createToken(readFloat32(t,e+1),5,s)}function decodeFloat64(t,e,r,s){return createToken(readFloat64(t,e+1),9,s)}function encodeFloat(t,e,r){const s=e.value;if(s===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(s===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(s===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(s===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let n,i=!1;(!r||r.float64!==!0)&&(encodeFloat16(s),n=readFloat16(ui8a,1),s===n||Number.isNaN(s)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),i=!0):(encodeFloat32(s),n=readFloat32(ui8a,1),s===n&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),i=!0))),i||(encodeFloat64(s),n=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,r){const s=e.value;if(s===!1||s===!0||s===null||s===void 0)return 1;if(!r||r.float64!==!0){encodeFloat16(s);let n=readFloat16(ui8a,1);if(s===n||Number.isNaN(s))return 3;if(encodeFloat32(s),n=readFloat32(ui8a,1),s===n)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),r=(e&2139095040)>>23,s=e&8388607;if(r===255)dataView.setUint16(0,31744,!1);else if(r===0)dataView.setUint16(0,(t&2147483648)>>16|s>>13,!1);else{const n=r-127;n<-24?dataView.setUint16(0,0):n<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+n,!1):dataView.setUint16(0,(e&2147483648)>>16|n+15<<10|s>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const s=r>>10&31,n=r&1023;let i;return s===0?i=n*2**-24:s!==31?i=(n+1024)*2**(s-25):i=n===0?1/0:NaN,r&32768?-i:i}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(r,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,r,s){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,r,s){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,r,s){return new Token(Type.bytes,t)},string(t,e,r,s){return new Token(Type.string,t)},boolean(t,e,r,s){return t?simpleTokens.true:simpleTokens.false},null(t,e,r,s){return simpleTokens.null},undefined(t,e,r,s){return simpleTokens.undefined},ArrayBuffer(t,e,r,s){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,r,s){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,s){if(!t.length)return r.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;s=Ref.createCheck(s,t);const n=[];let i=0;for(const o of t)n[i++]=objectToTokens(o,r,s);return r.addBreakTokens?[new Token(Type.array,t.length),n,new Token(Type.break)]:[new Token(Type.array,t.length),n]},Object(t,e,r,s){const n=e!=="Object",i=n?t.keys():Object.keys(t),o=n?t.size:i.length;if(!o)return r.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;s=Ref.createCheck(s,t);const a=[];let l=0;for(const c of i)a[l++]=[objectToTokens(c,r,s),objectToTokens(n?t.get(c):t[c],r,s)];return sortMapEntries(a,r),r.addBreakTokens?[new Token(Type.map,o),a,new Token(Type.break)]:[new Token(Type.map,o),a]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},r){const s=is$1(t),n=e&&e.typeEncoders&&e.typeEncoders[s]||typeEncoders[s];if(typeof n=="function"){const o=n(t,s,e,r);if(o!=null)return o}const i=typeEncoders[s];if(!i)throw new Error(`${encodeErrPrefix} unsupported type: ${s}`);return i(t,s,e,r)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter$1(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],s=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==s.type)return r.type.compare(s.type);const n=r.type.major,i=cborEncoders[n].compareTokens(r,s);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function tokensToEncoded(t,e,r,s){if(Array.isArray(e))for(const n of e)tokensToEncoded(t,n,r,s);else r[e.type.major](t,e,s)}function encodeCustom(t,e,r){const s=objectToTokens(t,r);if(!Array.isArray(s)&&r.quickEncodeToken){const n=r.quickEncodeToken(s);if(n)return n;const i=e[s.type.major];if(i.encodedSize){const o=i.encodedSize(s,r),a=new Bl(o);if(i(a,s,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${s} was wrong`);return asU8A(a.chunks[0])}}return buf.reset(),tokensToEncoded(buf,s,e,r),buf.toBytes(!0)}function encode$b(t,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let r=quick[e];if(r===void 0){const s=jump[e];if(!s)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const n=e&31;r=s(this.data,this.pos,n,this.options)}return this.pos+=r.encodedLength,r}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,r){const s=[];for(let n=0;n<t.value;n++){const i=tokensToObject(e,r);if(i===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(i===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${n}, expected ${t.value})`);s[n]=i}return s}function tokenToMap(t,e,r){const s=r.useMaps===!0,n=s?void 0:{},i=s?new Map:void 0;for(let o=0;o<t.value;o++){const a=tokensToObject(e,r);if(a===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(a===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(s!==!0&&typeof a!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof a})`);const l=tokensToObject(e,r);if(l===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${o} [no value], expected ${t.value})`);s?i.set(a,l):n[a]=l}return s?i:n}function tokensToObject(t,e){if(t.done())return DONE;const r=t.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,t,e);if(r.type===Type.map)return tokenToMap(r,t,e);if(r.type===Type.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const s=tokensToObject(t,e);return e.tags[r.value](s)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode$a(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const r=e.tokenizer||new Tokeniser(t,e),s=tokensToObject(r,e);if(s===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(s===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return s}const CID_CBOR_TAG=42;function cidEncoder$1(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG]=cidDecoder;const name$c="dag-cbor",code$5=113,encode$a=t=>encode$b(t,encodeOptions$1),decode$9=t=>decode$a(t,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$c,code:code$5,encode:encode$a,decode:decode$9},Symbol.toStringTag,{value:"Module"})),from=({name:t,code:e,encode:r})=>new Hasher(t,e,r);class Hasher{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?create$3(this.code,r):r.then(s=>create$3(this.code,s))}else throw Error("Unknown type, must be binary type")}}const base64$2=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"}));class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===Type.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===Type.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,r){this.prefix(e);const s=String(r.value),n=[];for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);e.push(n)}[Type.negint.major](e,r){this[Type.uint.major](e,r)}[Type.bytes.major](e,r){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,r){this.prefix(e);const s=fromString$2(JSON.stringify(r.value));e.push(s.length>32?asU8A(s):s)}[Type.array.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,r){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,r){}[Type.float.major](e,r){if(r.type.name==="break"){const o=this.inRecursive.pop();if(o){if(o.type===Type.array)e.push([93]);else if(o.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const s=String(r.value),n=[];let i=!1;for(let o=0;o<s.length;o++)n[o]=s.charCodeAt(o),!i&&(n[o]===46||n[o]===101||n[o]===69)&&(i=!0);i||(n.push(46),n.push(48)),e.push(n)}}function mapSorter(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const r=t[0],s=e[0];if(r.type!==Type.string||s.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(r<s)return-1;if(r>s)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$9(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,new JSONEncoder,e)}class Tokenizer{constructor(e,r={}){this.pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let r=0;r<e.length;r++)if(this.data[this.pos++]!==e[r])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let r=!1,s=!1;const n=a=>{for(;!this.done();){const l=this.ch();if(a.includes(l))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,s=!0;else return new Token(Type.uint,0,this.pos-e);if(n([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(s)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);s=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(s=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,n([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),o=parseFloat(i);return s?new Token(Type.float,o,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new Token(o>=0?Type.uint:Type.negint,o,this.pos-e):new Token(o>=0?Type.uint:Type.negint,BigInt(i),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let i=this.pos,o=0;i<this.data.length&&o<65536;i++,o++){const a=this.data[i];if(a===92||a<32||a>=128)break;if(a===34){const l=String.fromCharCode.apply(null,this.data.subarray(this.pos,i));return this.pos=i+1,new Token(Type.string,l,o)}}const e=this.pos,r=[],s=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let i=0;for(let o=0;o<4;o++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);i=i*16+a,this.pos++}return i},n=()=>{const i=this.ch();let o=null,a=i>239?4:i>223?3:i>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let l,c,u,d;switch(a){case 1:i<128&&(o=i);break;case 2:l=this.data[this.pos+1],(l&192)===128&&(d=(i&31)<<6|l&63,d>127&&(o=d));break;case 3:l=this.data[this.pos+1],c=this.data[this.pos+2],(l&192)===128&&(c&192)===128&&(d=(i&15)<<12|(l&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:l=this.data[this.pos+1],c=this.data[this.pos+2],u=this.data[this.pos+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(d=(i&15)<<18|(l&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(o=d))}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),this.pos+=a};for(;!this.done();){const i=this.ch();let o;switch(i){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(o=this.ch(),this.pos++,o){case 34:case 39:case 92:case 47:r.push(o);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(s());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(r),this.pos-e);default:if(i<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);i<128?(r.push(i),this.pos++):n()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$8(t,e){return e=Object.assign({tokenizer:new Tokenizer(t,e)},e),decode$a(t,e)}function cidEncoder(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID.asCID(t);if(!e)return null;const r=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1)]}function bytesEncoder(t){const e=base64$2.encode(t).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const r=this._next();if(r.type===Type.string&&r.value==="/"){const s=this._next();if(s.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(s),new Token(Type.tag,42,0)}if(s.type===Type.map){const n=this._next();if(n.type===Type.string&&n.value==="bytes"){const i=this._next();if(i.type===Type.string){for(let a=0;a<2;a++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const o=base64$2.decode(`m${i.value}`);return new Token(Type.bytes,o,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(s)}this.tokenBuffer.push(r)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[42]=CID.parse;const name$b="dag-json",code$4=297,encode$8=t=>encode$9(t,encodeOptions),decode$7=t=>{const e=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(t,decodeOptions)});return decode$8(t,e)},dagJSON=Object.freeze(Object.defineProperty({__proto__:null,name:name$b,code:code$4,encode:encode$8,decode:decode$7},Symbol.toStringTag,{value:"Module"}));function toBase64url(t){return base64url.encode(t).slice(1)}function fromBase64url(t){return base64url.decode(`u${t}`)}function fromSplit$1(t){const[e,r,s]=t;return{payload:r,signatures:[{protected:e,signature:s}],link:CID.decode(fromBase64url(r))}}function encodeSignature(t){const e={signature:fromBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=fromBase64url(t.protected)),e}function encode$7(t){const e=fromBase64url(t.payload);try{CID.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(encodeSignature)}}function decodeSignature(t){const e={signature:toBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=toBase64url(t.protected)),e}function decode$6(t){const e={payload:toBase64url(t.payload),signatures:t.signatures.map(decodeSignature)};return e.link=CID.decode(new Uint8Array(t.payload)),e}function fromSplit(t){const[e,r,s,n,i]=t,o={ciphertext:n,iv:s,protected:e,tag:i};return r&&(o.recipients=[{encrypted_key:r}]),o}function encodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=fromBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function encode$6(t){const e={ciphertext:fromBase64url(t.ciphertext),protected:fromBase64url(t.protected),iv:fromBase64url(t.iv),tag:fromBase64url(t.tag)};return t.aad&&(e.aad=fromBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(encodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}function decodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=toBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function decode$5(t){const e={ciphertext:toBase64url(t.ciphertext),protected:toBase64url(t.protected),iv:toBase64url(t.iv),tag:toBase64url(t.tag)};return t.aad&&(e.aad=toBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(decodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}const name$a="dag-jose",code$3=133;function isDagJWS(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWS(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWE(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function isDagJWE(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function toGeneral(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return fromSplit$1(e);if(e.length===5)return fromSplit(e);throw new Error("Not a valid JOSE string")}if(isDagJWS(t)||isDagJWE(t))return t;throw new Error("Not a valid unencoded JOSE object")}function encode$5(t){typeof t=="string"&&(t=toGeneral(t));let e;if(isDagJWS(t))e=encode$7(t);else if(isDagJWE(t))e=encode$6(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(encode$a(e))}function decode$4(t){let e;try{e=decode$9(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(isEncodedJWS(e))return decode$6(e);if(isEncodedJWE(e))return decode$5(e);throw new Error("Not a valid DAG-JOSE object")}const dagJOSE=Object.freeze(Object.defineProperty({__proto__:null,name:name$a,code:code$3,toGeneral,encode:encode$5,decode:decode$4},Symbol.toStringTag,{value:"Module"})),code$2=0,name$9="identity",encode$4=coerce,digest=t=>create$3(code$2,encode$4(t)),identity$1={code:code$2,name:name$9,encode:encode$4,digest},identity$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"})),identity=from$1({prefix:"\0",name:"identity",encode:t=>toString$3(t),decode:t=>fromString$3(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((t,e,r)=>(t[r]=e,t),[]),alphabetCharsToBytes=alphabet.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function encode$3(t){return t.reduce((e,r)=>(e+=alphabetBytesToChars[r],e),"")}function decode$3(t){const e=[];for(const r of t){const s=alphabetCharsToBytes[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"\u{1F680}",name:"base256emoji",encode:encode$3,decode:decode$3}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256,sha512},Symbol.toStringTag,{value:"Module"})),name$8="raw",code$1=85,encode$2=t=>coerce(t),decode$2=t=>coerce(t),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$8,code:code$1,encode:encode$2,decode:decode$2},Symbol.toStringTag,{value:"Module"})),textEncoder=new TextEncoder,textDecoder=new TextDecoder,name$7="json",code=512,encode$1=t=>textEncoder.encode(JSON.stringify(t)),decode$1=t=>JSON.parse(textDecoder.decode(t)),json=Object.freeze(Object.defineProperty({__proto__:null,name:name$7,code,encode:encode$1,decode:decode$1},Symbol.toStringTag,{value:"Module"})),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$3,...base256emoji$1},hashes={...sha2,...identity$2},codecs={raw,json};class Parser{constructor(){me(this,"index",0);me(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,s=e();return s===void 0&&(this.index=r),s}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,s){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return s()})}readNumber(e,r,s,n){return this.readAtomically(()=>{let i=0,o=0;const a=this.peekChar();if(a===void 0)return;const l=a==="0",c=2**(8*n)-1;for(;;){const u=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const f=Number.parseInt(d,e);if(!Number.isNaN(f))return f});if(u===void 0)break;if(i*=e,i+=u,i>c||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!s&&l&&o>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const s=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(s===void 0)return;e[r]=s}return e})}readIPv6Addr(){const e=r=>{for(let s=0;s<r.length/2;s++){const n=s*2;if(s<r.length-3){const o=this.readSeparator(":",s,()=>this.readIPv4Addr());if(o!==void 0)return r[n]=o[0],r[n+1]=o[1],r[n+2]=o[2],r[n+3]=o[3],[n+4,!0]}const i=this.readSeparator(":",s,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[n,!1];r[n]=i>>8,r[n+1]=i&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[s,n]=e(r);if(s===16)return r;if(n||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),o=16-(s+2),[a]=e(i.subarray(0,o));return r.set(i.subarray(0,a),16-a),r})}readIPAddr(){var e;return(e=this.readIPv4Addr())!=null?e:this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(t){if(!(t.length>MAX_IPV4_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv6Addr())}function parseIP(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPAddr())}function isIPv4(t){return Boolean(parseIPv4(t))}function isIPv6(t){return Boolean(parseIPv6(t))}function isIP(t){return Boolean(parseIP(t))}function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){var e;return((e=globalThis.Buffer)==null?void 0:e.allocUnsafe)!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec(t,e,r,s){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:s}}}const string=createCodec("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$1(t,e="utf8"){const r=BASES[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const isV4=isIPv4,isV6=isIPv6,toBytes$1=function(t){let e=0;if(t=t.toString().trim(),isV4(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(s=>{r[e++]=parseInt(s,10)&255}),r}if(isV6(t)){const r=t.split(":",8);let s;for(s=0;s<r.length;s++){const i=isV4(r[s]);let o;i&&(o=toBytes$1(r[s]),r[s]=toString$1(o.slice(0,2),"base16")),o!=null&&++s<8&&r.splice(s,0,toString$1(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(s=0;s<r.length&&r[s]!=="";s++);const i=[s,1];for(s=9-r.length;s>0;s--)i.push("0");r.splice.apply(r,i)}const n=new Uint8Array(e+16);for(s=0;s<r.length;s++){const i=parseInt(r[s],16);n[e++]=i>>8&255,n[e++]=i&255}return n}throw new Error("invalid ip address")},toString=function(t,e=0,r){e=~~e,r=r!=null?r:t.length-e;const s=new DataView(t.buffer);if(r===4){const n=[];for(let i=0;i<r;i++)n.push(t[e+i]);return n.join(".")}if(r===16){const n=[];for(let i=0;i<r;i+=2)n.push(s.getUint16(e+i).toString(16));return n.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(t=>{const e=createProtocol(...t);codes[e.code]=e,names[e.name]=e});function createProtocol(t,e,r,s,n){return{code:t,size:e,name:r,resolvable:Boolean(s),path:Boolean(n)}}function getProtocol(t){if(typeof t=="number"){if(codes[t]!=null)return codes[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(names[t]!=null)return names[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var encode_1=encode,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var s=r;t>=INT;)e[r++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[r++]=t&255|MSB$1,t>>>=7;return e[r]=t|0,encode.bytes=r-s+1,e}var decode=read,MSB=128,REST=127;function read(t,s){var r=0,s=s||0,n=0,i=s,o,a=t.length;do{if(i>=a||n>49)throw read.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=n<28?(o&REST)<<n:(o&REST)*Math.pow(2,n),n+=7}while(o>=MSB);return read.bytes=i-s,r}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1,decode,encodingLength:length};function fromString$1(t,e="utf8"){const r=BASES[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function concat(t,e){e==null&&(e=t.reduce((n,i)=>n+i.length,0));const r=allocUnsafe(e);let s=0;for(const n of t)r.set(n,s),s+=n.length;return asUint8Array(r)}function convertToString(t,e){switch(getProtocol(t).code){case 4:case 41:return bytes2ip(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$1(e,"base16")}}function convertToBytes(t,e){switch(getProtocol(t).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$1(e,"base16")}}const decoders=Object.values(bases).map(t=>t.decoder),anybaseDecoder=function(){let t=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>t=t.or(e)),t}();function ip2bytes(t){if(!isIP(t))throw new Error("invalid ip address");return toBytes$1(t)}function bytes2ip(t){const e=toString(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=fromString$1(t),r=Uint8Array.from(varint.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2str(t){const e=varint.decode(t);if(t=t.slice(varint.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return toString$1(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=decode$d(base58btc.decode(`z${t}`)).bytes:e=CID.parse(t).multihash.bytes;const r=Uint8Array.from(varint.encode(e.length));return concat([r,e],r.length+e.length)}function mb2bytes(t){const e=anybaseDecoder.decode(t),r=Uint8Array.from(varint.encode(e.length));return concat([r,e],r.length+e.length)}function bytes2mb(t){const e=varint.decode(t),r=t.slice(varint.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+toString$1(r,"base64url")}function bytes2mh(t){const e=varint.decode(t),r=t.slice(varint.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return toString$1(r,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=base32.decode("b"+e[0]),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const n=port2bytes(s);return concat([r,n],r.length+n.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=base32.decode(`b${e[0]}`),s=parseInt(e[1],10);if(s<1||s>65536)throw new Error("Port number is not in range(1, 65536)");const n=port2bytes(s);return concat([r,n],r.length+n.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),s=toString$1(e,"base32"),n=bytes2port(r);return`${s}:${n}`}function stringToStringTuples(t){const e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let s=0;s<r.length;s++){const n=r[s],i=getProtocol(n);if(i.size===0){e.push([n]);continue}if(s++,s>=r.length)throw ParseError("invalid address: "+t);if(i.path===!0){e.push([n,cleanPath(r.slice(s).join("/"))]);break}e.push([n,r[s]])}return e}function stringTuplesToString(t){const e=[];return t.map(r=>{const s=protoFromTuple(r);return e.push(s.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const r=protoFromTuple(e);return e.length>1?[r.code,convertToBytes(r.code,e[1])]:[r.code]})}function tuplesToStringTuples(t){return t.map(e=>{const r=protoFromTuple(e);return e[1]!=null?[r.code,convertToString(r.code,e[1])]:[r.code]})}function tuplesToBytes(t){return fromBytes(concat(t.map(e=>{const r=protoFromTuple(e);let s=Uint8Array.from(varint.encode(r.code));return e.length>1&&e[1]!=null&&(s=concat([s,e[1]])),s})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint.decode(e)+varint.decode.bytes}function bytesToTuples(t){const e=[];let r=0;for(;r<t.length;){const s=varint.decode(t,r),n=varint.decode.bytes,i=getProtocol(s),o=sizeForAddr(i,t.slice(r+n));if(o===0){e.push([s]),r+=n;continue}const a=t.slice(r+n,r+n+o);if(r+=o+n,r>t.length)throw ParseError("Invalid address Uint8Array: "+toString$1(t,"base16"));e.push([s,a])}return e}function bytesToString(t){const e=bytesToTuples(t),r=tuplesToStringTuples(e);return stringTuplesToString(r)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),r=stringTuplesToTuples(e);return tuplesToBytes(r)}function fromString(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e!=null)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return getProtocol(t[0])}function assign(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function createError(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return assign(t,r)}catch{r.message=t.message,r.stack=t.stack;const n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),assign(new n,r)}}var errCode=createError;function equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var __classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)},__classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],P2P_CODES=[getProtocol("p2p").code,getProtocol("ipfs").code],resolvers=new Map,symbol$1=Symbol.for("@multiformats/js-multiaddr/multiaddr");function isMultiaddr(t){return Boolean(t==null?void 0:t[symbol$1])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),r=this.toString().split("/").slice(1);let s,n;if(r.length>2)DNS_CODES.includes(e[0])&&P2P_CODES.includes(e[1])?(s=getProtocol("tcp").name,n=443):(s=getProtocol(r[2]).name,n=parseInt(r[3]));else if(DNS_CODES.includes(e[0]))s=getProtocol("tcp").name,n=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:r[1],transport:s,port:n}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],r=this.bytes;let s=0;for(;s<r.length;){const n=varint.decode(r,s),i=varint.decode.bytes,o=getProtocol(n),a=sizeForAddr(o,r.slice(s+i));s+=a+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),s=this.toString(),n=s.lastIndexOf(r);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(s.slice(0,n))}decapsulateCode(e){const r=this.tuples();for(let s=r.length-1;s>=0;s--)if(r[s][0]===e)return new DefaultMultiaddr(tuplesToBytes(r.slice(0,s)));return this}getPeerId(){try{const r=this.stringTuples().filter(s=>s[0]===names.ipfs.code).pop();if((r==null?void 0:r[1])!=null){const s=r[1];return s[0]==="Q"||s[0]==="1"?toString$1(base58btc.decode(`z${s}`),"base58btc"):toString$1(CID.parse(s).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>getProtocol(r[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(i=>i.resolvable);if(r==null)return[this];const s=resolvers.get(r.name);if(s==null)throw errCode(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await s(this,e)).map(i=>new DefaultMultiaddr(i))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e!=null?e:this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a=symbol$1,inspect)](){return this.inspect()}inspect(){return"<Multiaddr "+toString$1(this.bytes,"base16")+" - "+bytesToString(this.bytes)+">"}}function multiaddr(t){return new DefaultMultiaddr(t)}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function isElectron$1(){return typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}var isElectron_1=isElectron$1;const isElectron=isElectron_1,IS_ENV_WITH_DOM=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,IS_ELECTRON=isElectron(),IS_BROWSER=IS_ENV_WITH_DOM&&!IS_ELECTRON,IS_ELECTRON_MAIN=IS_ELECTRON&&!IS_ENV_WITH_DOM,IS_ELECTRON_RENDERER=IS_ELECTRON&&IS_ENV_WITH_DOM,IS_NODE=typeof commonjsRequire=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!IS_ELECTRON,IS_WEBWORKER=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,IS_TEST=typeof process<"u"&&typeof process.env<"u"&&!1,IS_REACT_NATIVE=typeof navigator<"u"&&navigator.product==="ReactNative";var env={isTest:IS_TEST,isElectron:IS_ELECTRON,isElectronMain:IS_ELECTRON_MAIN,isElectronRenderer:IS_ELECTRON_RENDERER,isNode:IS_NODE,isBrowser:IS_BROWSER,isWebWorker:IS_WEBWORKER,isEnvWithDom:IS_ENV_WITH_DOM,isReactNative:IS_REACT_NATIVE};let durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;parse.nanosecond=parse.ns=1/1e6;parse.\u00B5s=parse.\u03BCs=parse.us=parse.microsecond=1/1e3;parse.millisecond=parse.ms=parse[""]=1;parse.second=parse.sec=parse.s=parse.ms*1e3;parse.minute=parse.min=parse.m=parse.s*60;parse.hour=parse.hr=parse.h=parse.m*60;parse.day=parse.d=parse.h*24;parse.week=parse.wk=parse.w=parse.d*7;parse.month=parse.b=parse.d*(365.25/12);parse.year=parse.yr=parse.y=parse.d*365.25;function parse(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(durationRE,function(s,n,i){i=unitRatio(i),i&&(r=(r||0)+parseFloat(n,10)*i)}),r&&r/(unitRatio(e)||1)}function unitRatio(t){return parse[t]||parse[t.toLowerCase().replace(/s$/,"")]}var browser$2={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,e=t*60,r=e*60,s=r*24,n=s*7,i=s*365.25;ms=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return o(u);if(f==="number"&&isFinite(u))return d.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(!!d){var f=parseFloat(d[1]),m=(d[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*s;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function a(u){var d=Math.abs(u);return d>=s?Math.round(u/s)+"d":d>=r?Math.round(u/r)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var d=Math.abs(u);return d>=s?c(u,d,s,"day"):d>=r?c(u,d,r,"hour"):d>=e?c(u,d,e,"minute"):d>=t?c(u,d,t,"second"):u+" ms"}function c(u,d,f,m){var g=d>=f*1.5;return Math.round(u/f)+" "+m+(g?"s":"")}return ms}function setup(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=n,r.enabled=o,r.humanize=requireMs(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let f=0;f<u.length;f++)d=(d<<5)-d+u.charCodeAt(f),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,f=null,m,g;function y(...b){if(!y.enabled)return;const x=y,_=Number(new Date),w=_-(d||_);x.diff=w,x.prev=d,x.curr=_,d=_,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let v=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(M,C)=>{if(M==="%%")return"%";v++;const A=r.formatters[C];if(typeof A=="function"){const X=b[v];M=A.call(x,X),b.splice(v,1),v--}return M}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=s,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(u)),g),set:b=>{f=b}}),typeof r.init=="function"&&r.init(y),y}function s(u,d){const f=r(this.namespace+(typeof d>"u"?":":d)+u);return f.log=this.log,f}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d;const f=(typeof u=="string"?u:"").split(/[\s,]+/),m=f.length;for(d=0;d<m;d++)!f[d]||(u=f[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){const u=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,f;for(d=0,f=r.skips.length;d<f;d++)if(r.skips[d].test(u))return!1;for(d=0,f=r.names.length;d<f;d++)if(r.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var common=setup;(function(t,e){e.formatArgs=s,e.save=n,e.load=i,e.useColors=r,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,d=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(d=u))}),l.splice(d,0,c)}e.log=console.debug||console.log||(()=>{});function n(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function i(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=common(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(browser$2,browser$2.exports);const debug=browser$2.exports;debug.formatters.b=t=>t==null?"undefined":base58btc.baseEncode(t);debug.formatters.t=t=>t==null?"undefined":base32.baseEncode(t);debug.formatters.m=t=>t==null?"undefined":base64$2.baseEncode(t);debug.formatters.p=t=>t==null?"undefined":t.toString();debug.formatters.c=t=>t==null?"undefined":t.toString();debug.formatters.k=t=>t==null?"undefined":t.toString();function logger(t){return Object.assign(debug(t),{error:debug(`${t}:error`),trace:debug(`${t}:trace`)})}var error={};class TimeoutError$2 extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}error.TimeoutError=TimeoutError$2;class AbortError$1 extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}error.AbortError=AbortError$1;class HTTPError$1 extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}error.HTTPError=HTTPError$1;var fetch_browser$1={exports:{}},src={exports:{}},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(t,e){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof s<"u")return s;throw new Error("unable to locate global object")},s=r();t.exports=e=s.fetch,s.fetch&&(e.default=s.fetch.bind(s)),e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response}(browser$1,browser$1.exports)),browser$1.exports}globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src.exports={default:requireBrowser().default,Headers:requireBrowser().Headers,Request:requireBrowser().Request,Response:requireBrowser().Response};(function(t){t.exports=src.exports})(fetch_browser$1);const{TimeoutError:TimeoutError$1,AbortError}=error,{Response:Response$1,Request:Request$1,Headers:Headers$1,default:fetch$2}=fetch_browser$1.exports,fetchWithProgress=(t,e={})=>{const r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);const{timeout:s,headers:n}=e;if(s&&s>0&&s<1/0&&(r.timeout=s),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),n)for(const[i,o]of new Headers$1(n))r.setRequestHeader(i,o);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((i,o)=>{const a=l=>{switch(l.type){case"error":{i(Response$1.error());break}case"load":{i(new ResponseWithURL(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:parseHeaders(r.getAllResponseHeaders())}));break}case"timeout":{o(new TimeoutError$1);break}case"abort":{o(new AbortError);break}}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},fetchWithStreaming=fetch$2,fetchWith=(t,e={})=>e.onUploadProgress!=null?fetchWithProgress(t,e):fetchWithStreaming(t,e),parseHeaders=t=>{const e=new Headers$1;for(const r of t.trim().split(/[\r\n]+/)){const s=r.indexOf(": ");s>0&&e.set(r.slice(0,s),r.slice(s+1))}return e};class ResponseWithURL extends Response$1{constructor(e,r,s){super(r,s),Object.defineProperty(this,"url",{value:e})}}var fetch_browser={fetch:fetchWith,Request:Request$1,Headers:Headers$1},isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$1}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const r in t)hasOwnProperty$1.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const s of r)propertyIsEnumerable.call(t,s)&&e.push(s)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(r=>{defineProperty(e,r,clone(t[r]))}),e}const mergeKeys=(t,e,r,s)=>(r.forEach(n=>{typeof e[n]>"u"&&s.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?defineProperty(t,n,merge$2(t[n],e[n],s)):defineProperty(t,n,clone(e[n])))}),t),concatArrays=(t,e,r)=>{let s=t.slice(0,0),n=0;return[t,e].forEach(i=>{const o=[];for(let a=0;a<i.length;a++)!hasOwnProperty$1.call(i,a)||(o.push(String(a)),i===t?defineProperty(s,n++,i[a]):defineProperty(s,n++,clone(i[a])));s=mergeKeys(s,i,getEnumerableOwnPropertyKeys(i).filter(a=>!o.includes(a)),r)}),s};function merge$2(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,r):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),r)}var mergeOptions=function(...t){const e=merge$2(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const s of t)if(s!==void 0){if(!isOptionObject(s))throw new TypeError("`"+s+"` is not an Option Object");r=merge$2(r,{_:s},e)}return r._};const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$2=self.URL,defaultBase$1=getDefaultBase();class URLWithLegacySupport$2{constructor(e="",r=defaultBase$1){this.super=new URL$2(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$2.createObjectURL(e)}static revokeObjectURL(e){URL$2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function format$2(t){if(typeof t=="string")return new URL$2(t).toString();if(!(t instanceof URL$2)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",s=t.port?":"+t.port:"",n=t.protocol?t.protocol+"//":"",i=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),l=t.hash||"",c=t.pathname||"",u=t.path||c+a;return`${n}${e||r}${i||o+s}${u}${l}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$2};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$1}=urlBrowser;var relative$1=(t,e={},r={},s)=>{let n=e.protocol?e.protocol.replace(":",""):"http";n=(r[n]||s||n)+":";let i;try{i=new URLWithLegacySupport$1(t)}catch{i={}}const o=Object.assign({},e,{protocol:n||i.protocol,host:e.host||i.host});return new URLWithLegacySupport$1(t,format$1(o)).toString()};const{URLWithLegacySupport,format,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format,relative,defaultBase},anySignal$2={exports:{}};function anySignal$1(t){const e=new globalThis.AbortController;function r(){e.abort();for(const s of t)!s||!s.removeEventListener||s.removeEventListener("abort",r)}for(const s of t)if(!(!s||!s.addEventListener)){if(s.aborted){r();break}s.addEventListener("abort",r)}return e.signal}anySignal$2.exports=anySignal$1;var anySignal_2=anySignal$2.exports.anySignal=anySignal$1;const{fetch:fetch$1,Request,Headers}=fetch_browser,{TimeoutError,HTTPError}=error,merge$1=mergeOptions.bind({ignoreUndefined:!0}),{URL:URL$1,URLSearchParams:URLSearchParams$1}=isoUrl,anySignal=anySignal$2.exports,timeout=(t,e,r)=>{if(e===void 0)return t;const s=Date.now(),n=()=>Date.now()-s>=e;return new Promise((i,o)=>{const a=setTimeout(()=>{n()&&(o(new TimeoutError),r.abort())},e),l=c=>d=>{if(clearTimeout(a),n()){o(new TimeoutError);return}c(d)};t.then(l(i),l(o))})},defaults$1={throwHttpErrors:!0,credentials:"same-origin"};class HTTP{constructor(e={}){this.opts=merge$1(defaults$1,e)}async fetch(e,r={}){const s=merge$1(this.opts,r),n=new Headers(s.headers);if(typeof e!="string"&&!(e instanceof URL$1||e instanceof Request))throw new TypeError("`resource` must be a string, URL, or Request");const i=new URL$1(e.toString(),s.base),{searchParams:o,transformSearchParams:a,json:l}=s;o&&(typeof a=="function"?i.search=a(new URLSearchParams$1(s.searchParams)):i.search=new URLSearchParams$1(s.searchParams)),l&&(s.body=JSON.stringify(s.json),n.set("content-type","application/json"));const c=new AbortController,u=anySignal([c.signal,s.signal]),d=await timeout(fetch$1(i.toString(),{...s,signal:u,timeout:void 0,headers:n}),s.timeout,c);if(!d.ok&&s.throwHttpErrors)throw s.handleError&&await s.handleError(d),new HTTPError(d);return d.iterator=async function*(){yield*fromStream(d.body)},d.ndjson=async function*(){for await(const f of ndjson(d.iterator()))r.transform?yield r.transform(f):yield f},d}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}}const ndjson=async function*(t){const e=new TextDecoder;let r="";for await(const s of t){r+=e.decode(s,{stream:!0});const n=r.split(/\r?\n/);for(let i=0;i<n.length-1;i++){const o=n[i].trim();o.length>0&&(yield JSON.parse(o))}r=n[n.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},fromStream=t=>{if(isNodeReadableStream(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(isWebReadableStream(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:r,value:s}=await e.read();if(r)return;s&&(yield s)}}finally{e.releaseLock()}}()}if(isAsyncIterable(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},isAsyncIterable=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",isWebReadableStream=t=>t&&typeof t.getReader=="function",isNodeReadableStream=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");HTTP.HTTPError=HTTPError;HTTP.TimeoutError=TimeoutError;HTTP.streamToAsyncIterator=fromStream;HTTP.post=(t,e)=>new HTTP(e).post(t,e);HTTP.get=(t,e)=>new HTTP(e).get(t,e);HTTP.put=(t,e)=>new HTTP(e).put(t,e);HTTP.delete=(t,e)=>new HTTP(e).delete(t,e);HTTP.options=(t,e)=>new HTTP(e).options(t,e);var http=HTTP;const reduceValue=(t,e)=>e,tcpUri=(t,e,r,s)=>{if(s!=null&&s.assumeHttp===!1)return`tcp://${t}:${e}`;let n="tcp",i=`:${e}`;return r[r.length-1].protocol==="tcp"&&(n=e==="443"?"https":"http",i=e==="443"||e==="80"?"":i),`${n}://${t}${i}`},Reducers={ip4:reduceValue,ip6:(t,e,r,s)=>s.length===1&&s[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,s,n)=>s.some(i=>["http","https","ws","wss"].includes(i.protocol))?`${t}:${e}`:tcpUri(t,e,s,n),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:reduceValue,dns4:reduceValue,dns6:reduceValue,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};function multiaddrToUri(t,e){const r=multiaddr(t),s=r.toString().split("/").slice(1);return r.tuples().map(n=>{var i,o;return{protocol:(i=s.shift())!=null?i:"",content:n[1]!=null&&(o=s.shift())!=null?o:""}}).reduce((n,i,o,a)=>{const l=Reducers[i.protocol];if(l==null)throw new Error(`Unsupported protocol ${i.protocol}`);return l(n,i.content,o,a,e)},"")}function toUrlString(t){try{t=multiaddrToUri(multiaddr(t))}catch{}return t=t.toString(),t}const getAgent=()=>{},log$1=logger("ipfs-http-client:lib:error-handler"),merge=mergeOptions.bind({ignoreUndefined:!0}),DEFAULT_PROTOCOL=env.isBrowser||env.isWebWorker?location.protocol:"http",DEFAULT_HOST=env.isBrowser||env.isWebWorker?location.hostname:"localhost",DEFAULT_PORT=env.isBrowser||env.isWebWorker?location.port:"5001",normalizeOptions=(t={})=>{let e,r={},s;if(typeof t=="string"||isMultiaddr(t))e=new URL(toUrlString(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||isMultiaddr(t.url))e=new URL(toUrlString(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};const n=(r.protocol||DEFAULT_PROTOCOL).replace(":",""),i=(r.host||DEFAULT_HOST).split(":")[0],o=r.port||DEFAULT_PORT;e=new URL(`${n}://${i}:${o}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),env.isNode){const n=getAgent();s=r.agent||new n({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:s}},errorHandler=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){const s=await t.json();log$1(s),e=s.Message||s.message}else e=await t.text()}catch(s){log$1("Failed to parse error response",s),e=s.message}let r=new http.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new http.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new http.TimeoutError)),e&&e.includes("request timed out")&&(r=new http.TimeoutError),e&&(r.message=e),r},KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kebabCase$1=t=>t.replace(KEBAB_REGEX,function(e){return"-"+e.toLowerCase()}),parseTimeout=t=>typeof t=="string"?parse(t):t;class Client extends http{constructor(e={}){const r=normalizeOptions(e);super({timeout:parseTimeout(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:errorHandler,transformSearchParams:n=>{const i=new URLSearchParams;for(const[o,a]of n)a!=="undefined"&&a!=="null"&&o!=="signal"&&i.append(kebabCase$1(o),a),o==="timeout"&&!isNaN(a)&&i.append(kebabCase$1(o),a);return i},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const s=this.fetch;this.fetch=(n,i={})=>(typeof n=="string"&&!n.startsWith("/")&&(n=`${r.url}/${n}`),s.call(this,n,merge(i,{method:"POST"})))}}const configure=t=>e=>t(new Client(e),e);function modeToString$1(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}function parseMtime$1(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const r=t.getTime(),s=Math.floor(r/1e3);e={secs:s,nsecs:(r-s*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function toUrlSearchParams({arg:t,searchParams:e,hashAlg:r,mtime:s,mode:n,...i}={}){e&&(i={...i,...e}),r&&(i.hash=r),s!=null&&(s=parseMtime$1(s),i.mtime=s.secs,i.mtimeNsecs=s.nsecs),n!=null&&(i.mode=modeToString$1(n)),i.timeout&&!isNaN(i.timeout)&&(i.timeout=`${i.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(i);return t.forEach(a=>o.append("arg",a)),o}const createWantlist=configure(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(n=>CID.parse(n["/"]))}return e}),createWantlistForPeer=configure(t=>{async function e(r,s={}){return((await(await t.post("bitswap/wantlist",{signal:s.signal,searchParams:toUrlSearchParams({...s,peer:r.toString()}),headers:s.headers})).json()).Keys||[]).map(i=>CID.parse(i["/"]))}return e}),symbol=Symbol.for("@libp2p/peer-id"),baseDecoder=Object.values(bases).map(t=>t.decoder).reduce((t,e)=>t.or(e),bases.identity.decoder),LIBP2P_KEY_CODE=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH=37;class PeerIdImpl{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[symbol](){return!0}toString(){return this.string==null&&(this.string=base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID.createV1(LIBP2P_KEY_CODE,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var r;if(e instanceof Uint8Array)return equals(this.multihash.bytes,e);if(typeof e=="string")return peerIdFromString(e).equals(this);if(((r=e==null?void 0:e.multihash)==null?void 0:r.bytes)!=null)return equals(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}}class RSAPeerIdImpl extends PeerIdImpl{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}}class Ed25519PeerIdImpl extends PeerIdImpl{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}}class Secp256k1PeerIdImpl extends PeerIdImpl{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}}function peerIdFromString(t,e){if(t.charAt(0)==="1"||t.charAt(0)==="Q"){const r=decode$d(base58btc.decode(`z${t}`));return t.startsWith("12D")?new Ed25519PeerIdImpl({multihash:r}):t.startsWith("16U")?new Secp256k1PeerIdImpl({multihash:r}):new RSAPeerIdImpl({multihash:r})}return peerIdFromBytes(baseDecoder.decode(t))}function peerIdFromBytes(t){try{const e=decode$d(t);if(e.code===identity$1.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:e});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:e})}if(e.code===sha256.code)return new RSAPeerIdImpl({multihash:e})}catch{return peerIdFromCID(CID.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==LIBP2P_KEY_CODE)throw new Error("Supplied PeerID CID is invalid");const e=t.multihash;if(e.code===sha256.code)return new RSAPeerIdImpl({multihash:t.multihash});if(e.code===identity$1.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:t.multihash});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}const createStat$4=configure(t=>{async function e(r={}){const s=await t.post("bitswap/stat",{searchParams:toUrlSearchParams(r),signal:r.signal,headers:r.headers});return toCoreInterface$4(await s.json())}return e});function toCoreInterface$4(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>CID.parse(e["/"])),peers:(t.Peers||[]).map(e=>peerIdFromString(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}const createUnwant=configure(t=>{async function e(r,s={}){return(await t.post("bitswap/unwant",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers})).json()}return e});function createBitswap(t){return{wantlist:createWantlist(t),wantlistForPeer:createWantlistForPeer(t),unwant:createUnwant(t),stat:createStat$4(t)}}const createGet$5=configure(t=>{async function e(r,s={}){const n=await t.post("block/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers});return new Uint8Array(await n.arrayBuffer())}return e});function peekableIterator(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],s=[];return{peek:()=>e.next(),push:n=>{s.push(n)},next:()=>s.length>0?{done:!1,value:s.shift()}:e.next(),[r](){return this}}}async function*browserReadableStreamToIt(t,e={}){const r=t.getReader();try{for(;;){const s=await r.read();if(s.done)return;yield s.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}async function all(t){const e=[];for await(const r of t)e.push(r);return e}function isBytes(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function isBlob(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function isFileObject(t){return typeof t=="object"&&(t.path||t.content)}const isReadableStream=t=>t&&typeof t.getReader=="function";async function normaliseContent$1(t){if(isBytes(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(isBlob(t))return t;if(isReadableStream(t)&&(t=browserReadableStreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=peekableIterator(t),{value:r,done:s}=await e.peek();if(s)return itToBlob(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await all(e))]);if(isBytes(r)||typeof r=="string"||r instanceof String)return itToBlob(e)}throw errCode(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function itToBlob(t){const e=[];for await(const r of t)e.push(r);return new Blob(e)}async function*map(t,e){for await(const r of t)yield e(r)}var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(t,e){for(var r=new Array(arguments.length-1),s=0,n=2,i=!0;n<arguments.length;)r[s++]=arguments[n++];return new Promise(function(a,l){r[s]=function(u){if(i)if(i=!1,u)l(u);else{for(var d=new Array(arguments.length-1),f=0;f<d.length;)d[f++]=arguments[f];a.apply(null,d)}};try{t.apply(e||null,r)}catch(c){i&&(i=!1,l(c))}})}var base64$1={};(function(t){var e=t;e.length=function(a){var l=a.length;if(!l)return 0;for(var c=0;--l%4>1&&a.charAt(l)==="=";)++c;return Math.ceil(a.length*3)/4-c};for(var r=new Array(64),s=new Array(123),n=0;n<64;)s[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;e.encode=function(a,l,c){for(var u=null,d=[],f=0,m=0,g;l<c;){var y=a[l++];switch(m){case 0:d[f++]=r[y>>2],g=(y&3)<<4,m=1;break;case 1:d[f++]=r[g|y>>4],g=(y&15)<<2,m=2;break;case 2:d[f++]=r[g|y>>6],d[f++]=r[y&63],m=0;break}f>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,d)),f=0)}return m&&(d[f++]=r[g],d[f++]=61,m===1&&(d[f++]=61)),u?(f&&u.push(String.fromCharCode.apply(String,d.slice(0,f))),u.join("")):String.fromCharCode.apply(String,d.slice(0,f))};var i="invalid encoding";e.decode=function(a,l,c){for(var u=c,d=0,f,m=0;m<a.length;){var g=a.charCodeAt(m++);if(g===61&&d>1)break;if((g=s[g])===void 0)throw Error(i);switch(d){case 0:f=g,d=1;break;case 1:l[c++]=f<<2|(g&48)>>4,f=g,d=2;break;case 2:l[c++]=(f&15)<<4|(g&60)>>2,f=g,d=3;break;case 3:l[c++]=(f&3)<<6|g,d=0;break}}if(d===1)throw Error(i);return c-u},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,r,s){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:s||this}),this};EventEmitter.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var s=this._listeners[e],n=0;n<s.length;)s[n].fn===r?s.splice(n,1):++n;return this};EventEmitter.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var s=[],n=1;n<arguments.length;)s.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,s)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),s=r[3]===128;function n(l,c,u){e[0]=l,c[u]=r[0],c[u+1]=r[1],c[u+2]=r[2],c[u+3]=r[3]}function i(l,c,u){e[0]=l,c[u]=r[3],c[u+1]=r[2],c[u+2]=r[1],c[u+3]=r[0]}t.writeFloatLE=s?n:i,t.writeFloatBE=s?i:n;function o(l,c){return r[0]=l[c],r[1]=l[c+1],r[2]=l[c+2],r[3]=l[c+3],e[0]}function a(l,c){return r[3]=l[c],r[2]=l[c+1],r[1]=l[c+2],r[0]=l[c+3],e[0]}t.readFloatLE=s?o:a,t.readFloatBE=s?a:o}():function(){function e(s,n,i,o){var a=n<0?1:0;if(a&&(n=-n),n===0)s(1/n>0?0:2147483648,i,o);else if(isNaN(n))s(2143289344,i,o);else if(n>34028234663852886e22)s((a<<31|2139095040)>>>0,i,o);else if(n<11754943508222875e-54)s((a<<31|Math.round(n/1401298464324817e-60))>>>0,i,o);else{var l=Math.floor(Math.log(n)/Math.LN2),c=Math.round(n*Math.pow(2,-l)*8388608)&8388607;s((a<<31|l+127<<23|c)>>>0,i,o)}}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE);function r(s,n,i){var o=s(n,i),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}t.readFloatLE=r.bind(null,readUintLE),t.readFloatBE=r.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),s=r[7]===128;function n(l,c,u){e[0]=l,c[u]=r[0],c[u+1]=r[1],c[u+2]=r[2],c[u+3]=r[3],c[u+4]=r[4],c[u+5]=r[5],c[u+6]=r[6],c[u+7]=r[7]}function i(l,c,u){e[0]=l,c[u]=r[7],c[u+1]=r[6],c[u+2]=r[5],c[u+3]=r[4],c[u+4]=r[3],c[u+5]=r[2],c[u+6]=r[1],c[u+7]=r[0]}t.writeDoubleLE=s?n:i,t.writeDoubleBE=s?i:n;function o(l,c){return r[0]=l[c],r[1]=l[c+1],r[2]=l[c+2],r[3]=l[c+3],r[4]=l[c+4],r[5]=l[c+5],r[6]=l[c+6],r[7]=l[c+7],e[0]}function a(l,c){return r[7]=l[c],r[6]=l[c+1],r[5]=l[c+2],r[4]=l[c+3],r[3]=l[c+4],r[2]=l[c+5],r[1]=l[c+6],r[0]=l[c+7],e[0]}t.readDoubleLE=s?o:a,t.readDoubleBE=s?a:o}():function(){function e(s,n,i,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)s(0,a,l+n),s(1/o>0?0:2147483648,a,l+i);else if(isNaN(o))s(0,a,l+n),s(2146959360,a,l+i);else if(o>17976931348623157e292)s(0,a,l+n),s((c<<31|2146435072)>>>0,a,l+i);else{var u;if(o<22250738585072014e-324)u=o/5e-324,s(u>>>0,a,l+n),s((c<<31|u/4294967296)>>>0,a,l+i);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),u=o*Math.pow(2,-d),s(u*4503599627370496>>>0,a,l+n),s((c<<31|d+1023<<20|u*1048576&1048575)>>>0,a,l+i)}}}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0);function r(s,n,i,o,a){var l=s(o,a+n),c=s(o,a+i),u=(c>>31)*2+1,d=c>>>20&2047,f=4294967296*(c&1048575)+l;return d===2047?f?NaN:u*(1/0):d===0?u*5e-324*f:u*Math.pow(2,d-1075)*(f+4503599627370496)}t.readDoubleLE=r.bind(null,readUintLE,0,4),t.readDoubleBE=r.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function writeUintBE(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(s){for(var n=0,i=0,o=0;o<s.length;++o)i=s.charCodeAt(o),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(s.charCodeAt(o+1)&64512)===56320?(++o,n+=4):n+=3;return n},e.read=function(s,n,i){var o=i-n;if(o<1)return"";for(var a=null,l=[],c=0,u;n<i;)u=s[n++],u<128?l[c++]=u:u>191&&u<224?l[c++]=(u&31)<<6|s[n++]&63:u>239&&u<365?(u=((u&7)<<18|(s[n++]&63)<<12|(s[n++]&63)<<6|s[n++]&63)-65536,l[c++]=55296+(u>>10),l[c++]=56320+(u&1023)):l[c++]=(u&15)<<12|(s[n++]&63)<<6|s[n++]&63,c>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,l)),c=0);return a?(c&&a.push(String.fromCharCode.apply(String,l.slice(0,c))),a.join("")):String.fromCharCode.apply(String,l.slice(0,c))},e.write=function(s,n,i){for(var o=i,a,l,c=0;c<s.length;++c)a=s.charCodeAt(c),a<128?n[i++]=a:a<2048?(n[i++]=a>>6|192,n[i++]=a&63|128):(a&64512)===55296&&((l=s.charCodeAt(c+1))&64512)===56320?(a=65536+((a&1023)<<10)+(l&1023),++c,n[i++]=a>>18|240,n[i++]=a>>12&63|128,n[i++]=a>>6&63|128,n[i++]=a&63|128):(n[i++]=a>>12|224,n[i++]=a>>6&63|128,n[i++]=a&63|128);return i-o}})(utf8$2);var pool_1=pool;function pool(t,e,r){var s=r||8192,n=s>>>1,i=null,o=s;return function(l){if(l<1||l>n)return t(l);o+l>s&&(i=t(s),o=0);var c=e.call(i,o,o+=l);return o&7&&(o=(o|7)+1),c}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(i,o){this.lo=i>>>0,this.hi=o>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var s=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(o){if(o===0)return r;var a=o<0;a&&(o=-o);var l=o>>>0,c=(o-l)/4294967296>>>0;return a&&(c=~c>>>0,l=~l>>>0,++l>4294967295&&(l=0,++c>4294967295&&(c=0))),new e(l,c)},e.from=function(o){if(typeof o=="number")return e.fromNumber(o);if(t.isString(o))if(t.Long)o=t.Long.fromString(o);else return e.fromNumber(parseInt(o,10));return o.low||o.high?new e(o.low>>>0,o.high>>>0):r},e.prototype.toNumber=function(o){if(!o&&this.hi>>>31){var a=~this.lo+1>>>0,l=~this.hi>>>0;return a||(l=l+1>>>0),-(a+l*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(o){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(o)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(o)}};var n=String.prototype.charCodeAt;return e.fromHash=function(o){return o===s?r:new e((n.call(o,0)|n.call(o,1)<<8|n.call(o,2)<<16|n.call(o,3)<<24)>>>0,(n.call(o,4)|n.call(o,5)<<8|n.call(o,6)<<16|n.call(o,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var o=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^o)>>>0,this.lo=(this.lo<<1^o)>>>0,this},e.prototype.zzDecode=function(){var o=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^o)>>>0,this.hi=(this.hi>>>1^o)>>>0,this},e.prototype.length=function(){var o=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,l=this.hi>>>24;return l===0?a===0?o<16384?o<128?1:2:o<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:l<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},e.isString=function(i){return typeof i=="string"||i instanceof String},e.isObject=function(i){return i&&typeof i=="object"},e.isset=e.isSet=function(i,o){var a=i[o];return a!=null&&i.hasOwnProperty(o)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},e.Buffer=function(){try{var n=e.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(i){return typeof i=="number"?e.Buffer?e._Buffer_allocUnsafe(i):new e.Array(i):e.Buffer?e._Buffer_from(i):typeof Uint8Array>"u"?i:new Uint8Array(i)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(i){return i?e.LongBits.from(i).toHash():e.LongBits.zeroHash},e.longFromHash=function(i,o){var a=e.LongBits.fromHash(i);return e.Long?e.Long.fromBits(a.lo,a.hi,o):a.toNumber(Boolean(o))};function r(n,i,o){for(var a=Object.keys(i),l=0;l<a.length;++l)(n[a[l]]===void 0||!o)&&(n[a[l]]=i[a[l]]);return n}e.merge=r,e.lcFirst=function(i){return i.charAt(0).toLowerCase()+i.substring(1)};function s(n){function i(o,a){if(!(this instanceof i))return new i(o,a);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&r(this,a)}return i.prototype=Object.create(Error.prototype,{constructor:{value:i,writable:!0,enumerable:!1,configurable:!0},name:{get(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),i}e.newError=s,e.ProtocolError=s("ProtocolError"),e.oneOfGetter=function(i){for(var o={},a=0;a<i.length;++a)o[i[a]]=1;return function(){for(var l=Object.keys(this),c=l.length-1;c>-1;--c)if(o[l[c]]===1&&this[l[c]]!==void 0&&this[l[c]]!==null)return l[c]}},e.oneOfSetter=function(i){return function(o){for(var a=0;a<i.length;++a)i[a]!==o&&delete this[i[a]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var n=e.Buffer;if(!n){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=n.from!==Uint8Array.from&&n.from||function(o,a){return new n(o,a)},e._Buffer_allocUnsafe=n.allocUnsafe||function(o){return new n(o)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function t(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function t(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function t(e,r,s){return this.tail=this.tail.next=new Op(e,r,s),this.len+=r,this};function writeByte(t,e,r){e[r]=t&255}function writeVarint32(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Writer$1.prototype.uint64=function t(e){var r=LongBits$1.from(e);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var r=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var r=LongBits$1.from(e);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function t(e,r,s){r.set(e,s)}:function t(e,r,s){for(var n=0;n<e.length;++n)r[s+n]=e[n]};Writer$1.prototype.bytes=function t(e){var r=e.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(e)){var s=Writer$1.alloc(r=base64.length(e));base64.decode(e,s,0),e=s}return this.uint32(r)._push(writeBytes,r,e)};Writer$1.prototype.string=function t(e){var r=utf8$1.length(e);return r?this.uint32(r)._push(utf8$1.write,r,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,r=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=e.next,this.tail=r,this.len+=s),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,r=this.constructor.alloc(this.len),s=0;e;)e.fn(e.val,r,s),s+=e.len,e=e.next;return r};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,r,s){r.set(e,s)}:function(e,r,s){if(e.copy)e.copy(r,s,0,e.length);else for(var n=0;n<e.length;)r[s++]=e[n++]}};BufferWriter.prototype.bytes=function t(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,e),this};function writeStringBuffer(t,e,r){t.length<40?util$3.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}BufferWriter.prototype.string=function t(e){var r=util$3.Buffer.byteLength(e);return this.uint32(r),r&&this._push(writeStringBuffer,r,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function t(){return util$2.Buffer?function(r){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(r)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),r=this.pos,s=this.pos+e;if(s>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,s):r===s?new this.buf.constructor(0):this._slice.call(this.buf,r,s)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$1(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function t(e,r,s,n,i){if(!n)throw TypeError("request must be specified");var o=this;if(!i)return util.asPromise(t,o,e,r,s,n);if(!o.rpcImpl){setTimeout(function(){i(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(l,c){if(l)return o.emit("error",l,e),i(l);if(c===null){o.end(!0);return}if(!(c instanceof s))try{c=s[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(u){return o.emit("error",u,e),i(u)}return o.emit("data",c,e),i(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){i(a)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service})(rpc);var roots={};(function(t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()})(indexMinimal);(function(t){t.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimal$1.exports),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots["ipfs-unixfs"]||($protobuf.roots["ipfs-unixfs"]={});$root.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),s=0;s<r.length;++s)e[r[s]]!=null&&(this[r[s]]=e[r[s]])}return t.prototype.Type=0,t.prototype.Data=$util.newBuffer([]),t.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=$util.emptyArray,t.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,s){if(s||(s=$Writer.create()),s.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&s.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&s.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var n=0;n<r.blocksizes.length;++n)s.uint32(32).uint64(r.blocksizes[n]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&s.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&s.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&s.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&$root.UnixTime.encode(r.mtime,s.uint32(66).fork()).ldelim(),s},t.decode=function(r,s){r instanceof $Reader||(r=$Reader.create(r));for(var n=s===void 0?r.len:r.pos+s,i=new $root.Data;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:i.Type=r.int32();break;case 2:i.Data=r.bytes();break;case 3:i.filesize=r.uint64();break;case 4:if(i.blocksizes&&i.blocksizes.length||(i.blocksizes=[]),(o&7)===2)for(var a=r.uint32()+r.pos;r.pos<a;)i.blocksizes.push(r.uint64());else i.blocksizes.push(r.uint64());break;case 5:i.hashType=r.uint64();break;case 6:i.fanout=r.uint64();break;case 7:i.mode=r.uint32();break;case 8:i.mtime=$root.UnixTime.decode(r,r.uint32());break;default:r.skipType(o&7);break}}if(!i.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:i});return i},t.fromObject=function(r){if(r instanceof $root.Data)return r;var s=new $root.Data;switch(r.Type){case"Raw":case 0:s.Type=0;break;case"Directory":case 1:s.Type=1;break;case"File":case 2:s.Type=2;break;case"Metadata":case 3:s.Type=3;break;case"Symlink":case 4:s.Type=4;break;case"HAMTShard":case 5:s.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?$util.base64.decode(r.Data,s.Data=$util.newBuffer($util.base64.length(r.Data)),0):r.Data.length&&(s.Data=r.Data)),r.filesize!=null&&($util.Long?(s.filesize=$util.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?s.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?s.filesize=r.filesize:typeof r.filesize=="object"&&(s.filesize=new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");s.blocksizes=[];for(var n=0;n<r.blocksizes.length;++n)$util.Long?(s.blocksizes[n]=$util.Long.fromValue(r.blocksizes[n])).unsigned=!0:typeof r.blocksizes[n]=="string"?s.blocksizes[n]=parseInt(r.blocksizes[n],10):typeof r.blocksizes[n]=="number"?s.blocksizes[n]=r.blocksizes[n]:typeof r.blocksizes[n]=="object"&&(s.blocksizes[n]=new $util.LongBits(r.blocksizes[n].low>>>0,r.blocksizes[n].high>>>0).toNumber(!0))}if(r.hashType!=null&&($util.Long?(s.hashType=$util.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?s.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?s.hashType=r.hashType:typeof r.hashType=="object"&&(s.hashType=new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&($util.Long?(s.fanout=$util.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?s.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?s.fanout=r.fanout:typeof r.fanout=="object"&&(s.fanout=new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(s.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");s.mtime=$root.UnixTime.fromObject(r.mtime)}return s},t.toObject=function(r,s){s||(s={});var n={};if((s.arrays||s.defaults)&&(n.blocksizes=[]),s.defaults){if(n.Type=s.enums===String?"Raw":0,s.bytes===String?n.Data="":(n.Data=[],s.bytes!==Array&&(n.Data=$util.newBuffer(n.Data))),$util.Long){var i=new $util.Long(0,0,!0);n.filesize=s.longs===String?i.toString():s.longs===Number?i.toNumber():i}else n.filesize=s.longs===String?"0":0;if($util.Long){var i=new $util.Long(0,0,!0);n.hashType=s.longs===String?i.toString():s.longs===Number?i.toNumber():i}else n.hashType=s.longs===String?"0":0;if($util.Long){var i=new $util.Long(0,0,!0);n.fanout=s.longs===String?i.toString():s.longs===Number?i.toNumber():i}else n.fanout=s.longs===String?"0":0;n.mode=0,n.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=s.enums===String?$root.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=s.bytes===String?$util.base64.encode(r.Data,0,r.Data.length):s.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?n.filesize=s.longs===String?String(r.filesize):r.filesize:n.filesize=s.longs===String?$util.Long.prototype.toString.call(r.filesize):s.longs===Number?new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)typeof r.blocksizes[o]=="number"?n.blocksizes[o]=s.longs===String?String(r.blocksizes[o]):r.blocksizes[o]:n.blocksizes[o]=s.longs===String?$util.Long.prototype.toString.call(r.blocksizes[o]):s.longs===Number?new $util.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0):r.blocksizes[o]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?n.hashType=s.longs===String?String(r.hashType):r.hashType:n.hashType=s.longs===String?$util.Long.prototype.toString.call(r.hashType):s.longs===Number?new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?n.fanout=s.longs===String?String(r.fanout):r.fanout:n.fanout=s.longs===String?$util.Long.prototype.toString.call(r.fanout):s.longs===Number?new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(n.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(n.mtime=$root.UnixTime.toObject(r.mtime,s)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t.DataType=function(){const e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})();$root.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),s=0;s<r.length;++s)e[r[s]]!=null&&(this[r[s]]=e[r[s]])}return t.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,s){return s||(s=$Writer.create()),s.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&s.uint32(21).fixed32(r.FractionalNanoseconds),s},t.decode=function(r,s){r instanceof $Reader||(r=$Reader.create(r));for(var n=s===void 0?r.len:r.pos+s,i=new $root.UnixTime;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:i.Seconds=r.int64();break;case 2:i.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}if(!i.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:i});return i},t.fromObject=function(r){if(r instanceof $root.UnixTime)return r;var s=new $root.UnixTime;return r.Seconds!=null&&($util.Long?(s.Seconds=$util.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?s.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?s.Seconds=r.Seconds:typeof r.Seconds=="object"&&(s.Seconds=new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(s.FractionalNanoseconds=r.FractionalNanoseconds>>>0),s},t.toObject=function(r,s){s||(s={});var n={};if(s.defaults){if($util.Long){var i=new $util.Long(0,0,!1);n.Seconds=s.longs===String?i.toString():s.longs===Number?i.toNumber():i}else n.Seconds=s.longs===String?"0":0;n.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?n.Seconds=s.longs===String?String(r.Seconds):r.Seconds:n.Seconds=s.longs===String?$util.Long.prototype.toString.call(r.Seconds):s.longs===Number?new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=r.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();$root.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),s=0;s<r.length;++s)e[r[s]]!=null&&(this[r[s]]=e[r[s]])}return t.prototype.MimeType="",t.encode=function(r,s){return s||(s=$Writer.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&s.uint32(10).string(r.MimeType),s},t.decode=function(r,s){r instanceof $Reader||(r=$Reader.create(r));for(var n=s===void 0?r.len:r.pos+s,i=new $root.Metadata;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:i.MimeType=r.string();break;default:r.skipType(o&7);break}}return i},t.fromObject=function(r){if(r instanceof $root.Metadata)return r;var s=new $root.Metadata;return r.MimeType!=null&&(s.MimeType=String(r.MimeType)),s},t.toObject=function(r,s){s||(s={});var n={};return s.defaults&&(n.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(n.MimeType=r.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},t})();function parseMode(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function parseMtime(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const r=t.getTime(),s=Math.floor(r/1e3);e={secs:s,nsecs:(r-s*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}async function*normaliseCandidateMultiple(t,e){if(typeof t=="string"||t instanceof String||isBytes(t)||isBlob(t)||t._readableState)throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(t)&&(t=browserReadableStreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=peekableIterator(t),{value:s,done:n}=await r.peek();if(n){yield*[];return}if(r.push(s),Number.isInteger(s))throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(s._readableState){yield*map(r,i=>toFileObject$1({content:i},e));return}if(isBytes(s)){yield toFileObject$1({content:r},e);return}if(isFileObject(s)||s[Symbol.iterator]||s[Symbol.asyncIterator]||isReadableStream(s)||isBlob(s)){yield*map(r,i=>toFileObject$1(i,e));return}}throw isFileObject(t)?errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(t,e){const{path:r,mode:s,mtime:n,content:i}=t,o={path:r||"",mode:parseMode(s),mtime:parseMtime(n)};return i?o.content=await e(i):r||(o.content=await e(t)),o}function normaliseInput$2(t){return normaliseCandidateMultiple(t,normaliseContent$1)}function modeToString(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function multipartRequest(t,e,r={}){const s=[],n=new FormData;let i=0,o=0;for await(const{content:a,path:l,mode:c,mtime:u}of normaliseInput$2(t)){let d="";const f=a?"file":"dir";i>0&&(d=`-${i}`);let m=f+d;const g=[];if(c!=null&&g.push(`mode=${modeToString(c)}`),u!=null){const{secs:y,nsecs:b}=u;g.push(`mtime=${y}`),b!=null&&g.push(`mtime-nsecs=${b}`)}if(g.length&&(m=`${m}?${g.join("&")}`),a){n.set(m,a,l!=null?encodeURIComponent(l):void 0);const y=o+a.size;s.push({name:l,start:o,end:y}),o=y}else if(l!=null)n.set(m,new File([""],encodeURIComponent(l),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:o,parts:s,headers:r,body:n}}function filter$1(t){return t.filter(Boolean)}function abortSignal(...t){return anySignal_2(filter$1(t))}const createPut$3=configure(t=>{async function e(r,s={}){const n=new AbortController,i=abortSignal(n.signal,s.signal);let o;try{o=await(await t.post("block/put",{signal:i,searchParams:toUrlSearchParams(s),...await multipartRequest([r],n,s.headers)})).json()}catch(a){if(s.format==="dag-pb")return e(r,{...s,format:"protobuf"});if(s.format==="dag-cbor")return e(r,{...s,format:"cbor"});throw a}return CID.parse(o.Key)}return e}),createRm$6=configure(t=>{async function*e(r,s={}){Array.isArray(r)||(r=[r]);const n=await t.post("block/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.map(i=>i.toString()),"stream-channels":!0,...s}),headers:s.headers});for await(const i of n.ndjson())yield toCoreInterface$3(i)}return e});function toCoreInterface$3(t){const e={cid:CID.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}const createStat$3=configure(t=>{async function e(r,s={}){const i=await(await t.post("block/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers})).json();return{cid:CID.parse(i.Key),size:i.Size}}return e});function createBlock(t){return{get:createGet$5(t),put:createPut$3(t),rm:createRm$6(t),stat:createStat$3(t)}}const createAdd$4=configure(t=>{async function e(r,s={}){const n=await t.post("bootstrap/add",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>multiaddr(o))}}return e}),createClear=configure(t=>{async function e(r={}){const s=await t.post("bootstrap/rm",{signal:r.signal,searchParams:toUrlSearchParams({...r,all:!0}),headers:r.headers}),{Peers:n}=await s.json();return{Peers:n.map(i=>multiaddr(i))}}return e}),createList$2=configure(t=>{async function e(r={}){const s=await t.post("bootstrap/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:n}=await s.json();return{Peers:n.map(i=>multiaddr(i))}}return e}),createReset=configure(t=>{async function e(r={}){const s=await t.post("bootstrap/add",{signal:r.signal,searchParams:toUrlSearchParams({...r,default:!0}),headers:r.headers}),{Peers:n}=await s.json();return{Peers:n.map(i=>multiaddr(i))}}return e}),createRm$5=configure(t=>{async function e(r,s={}){const n=await t.post("bootstrap/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>multiaddr(o))}}return e});function createBootstrap(t){return{add:createAdd$4(t),clear:createClear(t),list:createList$2(t),reset:createReset(t),rm:createRm$5(t)}}const createApply=configure(t=>{async function e(r,s={}){const i=await(await t.post("config/profile/apply",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}return e});function objectToCamel(t){if(t==null)return t;const e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((s,n)=>(e.test(n)?s[n.toLowerCase()]=t[n]:e.test(n[0])?s[n[0].toLowerCase()+n.slice(1)]=t[n]:s[n]=t[n],s),r)}const createList$1=configure(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).map(i=>objectToCamel(i))}return e});function createProfiles(t){return{apply:createApply(t),list:createList$1(t)}}const createGet$4=configure(t=>async(r,s={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json()).Value}),createGetAll=configure(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:toUrlSearchParams({...r}),headers:r.headers})).json()),createReplace=configure(t=>async(r,s={})=>{const n=new AbortController,i=abortSignal(n.signal,s.signal);await(await t.post("config/replace",{signal:i,searchParams:toUrlSearchParams(s),...await multipartRequest([fromString$1(JSON.stringify(r))],n,s.headers)})).text()}),createSet=configure(t=>async(r,s,n={})=>{if(typeof r!="string")throw new Error("Invalid key type");const i={...n,...encodeParam(r,s)};await(await t.post("config",{signal:n.signal,searchParams:toUrlSearchParams(i),headers:n.headers})).text()}),encodeParam=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function createConfig(t){return{getAll:createGetAll(t),get:createGet$4(t),set:createSet(t),replace:createReplace(t),profiles:createProfiles(t)}}const createExport$1=configure(t=>{async function*e(r,s={}){yield*(await t.post("dag/export",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString()}),headers:s.headers})).iterator()}return e});async function*resolve(t,e,r,s,n){const i=async c=>{const u=await r.getCodec(c.code),d=await s(c,n);return u.decode(d)},o=e.split("/").filter(Boolean);let a=await i(t),l=t;for(;o.length;){const c=o.shift();if(!c)throw errCode(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,c))a=a[c],yield{value:a,remainderPath:o.join("/")};else throw errCode(new Error(`no link named "${c}" under ${l}`),"ERR_NO_LINK");const u=CID.asCID(a);u&&(l=u,a=await i(a))}yield{value:a,remainderPath:""}}async function first(t){for await(const e of t)return e}async function last(t){let e;for await(const r of t)e=r;return e}const createGet$3=(t,e)=>configure((s,n)=>{const i=createGet$5(n);return async(a,l={})=>{if(l.path){const m=l.localResolve?await first(resolve(a,l.path,t,i,l)):await last(resolve(a,l.path,t,i,l));if(!m)throw errCode(new Error("Not found"),"ERR_NOT_FOUND");return m}const c=await t.getCodec(a.code),u=await i(a,l);return{value:c.decode(u),remainderPath:""}}})(e),createImport$1=configure(t=>{async function*e(r,s={}){const n=new AbortController,i=abortSignal(n.signal,s.signal),{headers:o,body:a}=await multipartRequest(r,n,s.headers),l=await t.post("dag/import",{signal:i,headers:o,body:a,searchParams:toUrlSearchParams({"pin-roots":s.pinRoots})});for await(const{Root:c}of l.ndjson())if(c!==void 0){const{Cid:{"/":u},PinErrorMsg:d}=c;yield{root:{cid:CID.parse(u),pinErrorMsg:d}}}}return e}),createPut$2=(t,e)=>configure(s=>async(i,o={})=>{const a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let l;if(a.inputCodec){if(!(i instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");l=i}else l=(await t.getCodec(a.storeCodec)).encode(i),a.inputCodec=a.storeCodec;const c=new AbortController,u=abortSignal(c.signal,a.signal),f=await(await s.post("dag/put",{timeout:a.timeout,signal:u,searchParams:toUrlSearchParams(a),...await multipartRequest([l],c,a.headers)})).json();return CID.parse(f.Cid["/"])})(e),createResolve$2=configure(t=>async(r,s={})=>{const i=await(await t.post("dag/resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r}${s.path?`/${s.path}`.replace(/\/[/]+/g,"/"):""}`,...s}),headers:s.headers})).json();return{cid:CID.parse(i.Cid["/"]),remainderPath:i.RemPath}});function createDag(t,e){return{export:createExport$1(e),get:createGet$3(t,e),import:createImport$1(e),put:createPut$2(t,e),resolve:createResolve$2(e)}}const SendingQuery=0,PeerResponse=1,FinalPeer=2,QueryError=3,Provider=4,Value=5,AddingPeer=6,DialingPeer=7,mapEvent=t=>{var e;if(t.Type===SendingQuery)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===PeerResponse)return{from:peerIdFromString(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses||[]).map(({ID:r,Addrs:s})=>({id:peerIdFromString(r),multiaddrs:s.map(n=>multiaddr(n)),protocols:[]})),providers:(t.Responses||[]).map(({ID:r,Addrs:s})=>({id:peerIdFromString(r),multiaddrs:s.map(n=>multiaddr(n)),protocols:[]}))};if(t.Type===FinalPeer){let r={id:(e=t.ID)!=null?e:peerIdFromString(t.ID),multiaddrs:[],protocols:[]};return t.Responses&&t.Responses.length&&(r={id:peerIdFromString(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(s=>multiaddr(s)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:r}}if(t.Type===QueryError)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===Provider)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:r,Addrs:s})=>({id:peerIdFromString(r),multiaddrs:s.map(n=>multiaddr(n)),protocols:[]}))};if(t.Type===Value)return{name:"VALUE",type:t.Type,value:fromString$1(t.Extra,"base64pad")};if(t.Type===AddingPeer){const r=t.Responses.map(({ID:s})=>peerIdFromString(s));if(!r.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:r[0]}}if(t.Type===DialingPeer)return{name:"DIALING_PEER",type:t.Type,peer:peerIdFromString(t.ID)};throw new Error("Unknown DHT event type")},createFindPeer=configure(t=>{async function*e(r,s={}){const n=await t.post("dht/findpeer",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers});for await(const i of n.ndjson())yield mapEvent(i)}return e}),createFindProvs=configure(t=>{async function*e(r,s={}){const n=await t.post("dht/findprovs",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers});for await(const i of n.ndjson())yield mapEvent(i)}return e}),createGet$2=configure(t=>{async function*e(r,s={}){const n=await t.post("dht/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:r instanceof Uint8Array?toString$1(r):r.toString(),...s}),headers:s.headers});for await(const i of n.ndjson())yield mapEvent(i)}return e}),createProvide=configure(t=>{async function*e(r,s={recursive:!1}){const n=Array.isArray(r)?r:[r],i=await t.post("dht/provide",{signal:s.signal,searchParams:toUrlSearchParams({arg:n.map(o=>o.toString()),...s}),headers:s.headers});for await(const o of i.ndjson())yield mapEvent(o)}return e}),createPut$1=configure(t=>{async function*e(r,s,n={}){const i=new AbortController,o=abortSignal(i.signal,n.signal),a=await t.post("dht/put",{signal:o,searchParams:toUrlSearchParams({arg:r instanceof Uint8Array?toString$1(r):r.toString(),...n}),...await multipartRequest([s],i,n.headers)});for await(const l of a.ndjson())yield mapEvent(l)}return e}),createQuery=configure(t=>{async function*e(r,s={}){const n=await t.post("dht/query",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers});for await(const i of n.ndjson())yield mapEvent(i)}return e});function createDht(t){return{findPeer:createFindPeer(t),findProvs:createFindProvs(t),get:createGet$2(t),provide:createProvide(t),put:createPut$1(t),query:createQuery(t)}}const createCmds=configure(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e}),createNet=configure(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e}),createSys=configure(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return e});function createDiag(t){return{cmds:createCmds(t),net:createNet(t),sys:createSys(t)}}const createChmod=configure(t=>{async function e(r,s,n={}){await(await t.post("files/chmod",{signal:n.signal,searchParams:toUrlSearchParams({arg:r,mode:s,...n}),headers:n.headers})).text()}return e}),createCp=configure(t=>{async function e(r,s,n={}){const i=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:n.signal,searchParams:toUrlSearchParams({arg:i.concat(s).map(a=>CID.asCID(a)?`/ipfs/${a}`:a),...n}),headers:n.headers})).text()}return e}),createFlush=configure(t=>{async function e(r,s={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await t.post("files/flush",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json();return CID.parse(i.Cid)}return e});function objectToCamelWithMetadata(t){const e=objectToCamel(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}const createLs$6=configure(t=>{async function*e(r,s={}){if(!r)throw new Error("ipfs.files.ls requires a path");const n=await t.post("files/ls",{signal:s.signal,searchParams:toUrlSearchParams({arg:CID.asCID(r)?`/ipfs/${r}`:r,long:!0,...s,stream:!0}),headers:s.headers});for await(const i of n.ndjson())if("Entries"in i)for(const o of i.Entries||[])yield toCoreInterface$2(objectToCamelWithMetadata(o));else yield toCoreInterface$2(objectToCamelWithMetadata(i))}return e});function toCoreInterface$2(t){return t.hash&&(t.cid=CID.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}const createMkdir=configure(t=>{async function e(r,s={}){await(await t.post("files/mkdir",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).text()}return e}),createMv=configure(t=>{async function e(r,s,n={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:n.signal,searchParams:toUrlSearchParams({arg:r.concat(s),...n}),headers:n.headers})).text()}return e});var source=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)return;yield s}}finally{e.releaseLock()}}();throw new Error("unknown stream")};const createRead=configure(t=>{async function*e(r,s={}){const n=await t.post("files/read",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,count:s.length,...s}),headers:s.headers});yield*source(n.body)}return e}),createRm$4=configure(t=>{async function e(r,s={}){const n=await t.post("files/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),i=await n.text();if(i!==""){const o=new http.HTTPError(n);throw o.message=i,o}}return e}),createStat$2=configure(t=>{async function e(r,s={}){const i=await(await t.post("files/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json();return i.WithLocality=i.WithLocality||!1,toCoreInterface$1(objectToCamelWithMetadata(i))}return e});function toCoreInterface$1(t){return t.cid=CID.parse(t.hash),delete t.hash,t}const createTouch=configure(t=>{async function e(r,s={}){await(await t.post("files/touch",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).text()}return e}),createWrite=configure(t=>{async function e(r,s,n={}){const i=new AbortController,o=abortSignal(i.signal,n.signal);await(await t.post("files/write",{signal:o,searchParams:toUrlSearchParams({arg:r,streamChannels:!0,count:n.length,...n}),...await multipartRequest([{content:s,path:"arg",mode:modeToString$1(n.mode),mtime:parseMtime$1(n.mtime)}],i,n.headers)})).text()}return e});function createFiles(t){return{chmod:createChmod(t),cp:createCp(t),flush:createFlush(t),ls:createLs$6(t),mkdir:createMkdir(t),mv:createMv(t),read:createRead(t),rm:createRm$4(t),stat:createStat$2(t),touch:createTouch(t),write:createWrite(t)}}const createExport=configure(t=>async(r,s,n={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createGen=configure(t=>{async function e(r,s={type:"Ed25519"}){const i=await(await t.post("key/gen",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json();return objectToCamel(i)}return e}),createImport=configure(t=>{async function e(r,s,n,i={}){const a=await(await t.post("key/import",{signal:i.signal,searchParams:toUrlSearchParams({arg:r,pem:s,password:n,...i}),headers:i.headers})).json();return objectToCamel(a)}return e}),createInfo=configure(t=>async(r,s={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createList=configure(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(i=>objectToCamel(i))}return e}),createRename=configure(t=>{async function e(r,s,n={}){const i=await t.post("key/rename",{signal:n.signal,searchParams:toUrlSearchParams({arg:[r,s],...n}),headers:n.headers});return objectToCamel(await i.json())}return e}),createRm$3=configure(t=>{async function e(r,s={}){const i=await(await t.post("key/rm",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json();return objectToCamel(i.Keys[0])}return e});function createKey(t){return{export:createExport(t),gen:createGen(t),import:createImport(t),info:createInfo(t),list:createList(t),rename:createRename(t),rm:createRm$3(t)}}const createLevel=configure(t=>{async function e(r,s,n={}){const i=await t.post("log/level",{signal:n.signal,searchParams:toUrlSearchParams({arg:[r,s],...n}),headers:n.headers});return objectToCamel(await i.json())}return e}),createLs$5=configure(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings}return e}),createTail=configure(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return e});function createLog(t){return{level:createLevel(t),ls:createLs$5(t),tail:createTail(t)}}const createPublish$1=configure(t=>{async function e(r,s={}){const n=await t.post("name/publish",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r}`,...s}),headers:s.headers});return objectToCamel(await n.json())}return e}),createResolve$1=configure(t=>{async function*e(r,s={}){const n=await t.post("name/resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,stream:!0,...s}),headers:s.headers});for await(const i of n.ndjson())yield i.Path}return e}),createCancel=configure(t=>{async function e(r,s={}){const n=await t.post("name/pubsub/cancel",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers});return objectToCamel(await n.json())}return e}),createState=configure(t=>{async function e(r={}){const s=await t.post("name/pubsub/state",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await s.json())}return e}),createSubs=configure(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings||[]}return e});function createPubsub$1(t){return{cancel:createCancel(t),state:createState(t),subs:createSubs(t)}}function createName(t){return{publish:createPublish$1(t),resolve:createResolve$1(t),pubsub:createPubsub$1(t)}}const createData=configure(t=>{async function e(r,s={}){const i=await(await t.post("object/data",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r instanceof Uint8Array?CID.decode(r):r}`,...s}),headers:s.headers})).arrayBuffer();return new Uint8Array(i,0,i.byteLength)}return e}),createGet$1=configure(t=>{async function e(r,s={}){const i=await(await t.post("object/get",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r instanceof Uint8Array?CID.decode(r):r}`,dataEncoding:"base64",...s}),headers:s.headers})).json();return{Data:fromString$1(i.Data,"base64pad"),Links:(i.Links||[]).map(o=>({Name:o.Name,Hash:CID.parse(o.Hash),Tsize:o.Size}))}}return e}),createLinks=configure(t=>{async function e(r,s={}){return((await(await t.post("object/links",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r instanceof Uint8Array?CID.decode(r):r}`,...s}),headers:s.headers})).json()).Links||[]).map(o=>({Name:o.Name,Tsize:o.Size,Hash:CID.parse(o.Hash)}))}return e}),createNew=configure(t=>{async function e(r={}){const s=await t.post("object/new",{signal:r.signal,searchParams:toUrlSearchParams({arg:r.template,...r}),headers:r.headers}),{Hash:n}=await s.json();return CID.parse(n)}return e}),createPut=(t,e)=>configure(s=>{const n=createPut$2(t,e);async function i(o,a={}){return n(o,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return i})(e),createStat$1=configure(t=>{async function e(r,s={}){const i=await(await t.post("object/stat",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r}`,...s}),headers:s.headers})).json();return{...i,Hash:CID.parse(i.Hash)}}return e}),createAddLink=configure(t=>{async function e(r,s,n={}){const i=await t.post("object/patch/add-link",{signal:n.signal,searchParams:toUrlSearchParams({arg:[`${r}`,s.Name||s.name||"",(s.Hash||s.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:o}=await i.json();return CID.parse(o)}return e}),createAppendData=configure(t=>{async function e(r,s,n={}){const i=new AbortController,o=abortSignal(i.signal,n.signal),a=await t.post("object/patch/append-data",{signal:o,searchParams:toUrlSearchParams({arg:`${r}`,...n}),...await multipartRequest([s],i,n.headers)}),{Hash:l}=await a.json();return CID.parse(l)}return e}),createRmLink=configure(t=>{async function e(r,s,n={}){const i=await t.post("object/patch/rm-link",{signal:n.signal,searchParams:toUrlSearchParams({arg:[`${r}`,s.Name||s.name||null],...n}),headers:n.headers}),{Hash:o}=await i.json();return CID.parse(o)}return e}),createSetData=configure(t=>{async function e(r,s,n={}){const i=new AbortController,o=abortSignal(i.signal,n.signal),a=await t.post("object/patch/set-data",{signal:o,searchParams:toUrlSearchParams({arg:[`${r}`],...n}),...await multipartRequest([s],i,n.headers)}),{Hash:l}=await a.json();return CID.parse(l)}return e});function createPatch(t){return{addLink:createAddLink(t),appendData:createAppendData(t),rmLink:createRmLink(t),setData:createSetData(t)}}function createObject(t,e){return{data:createData(e),get:createGet$1(e),links:createLinks(e),new:createNew(e),put:createPut(t,e),stat:createStat$1(e),patch:createPatch(e)}}async function*normaliseInput$1(t){if(t==null)throw errCode(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");const e=CID.asCID(t);if(e){yield toPin$1({cid:e});return}if(t instanceof String||typeof t=="string"){yield toPin$1({path:t});return}if(t.cid!=null||t.path!=null)return yield toPin$1(t);if(Symbol.iterator in t){const r=t[Symbol.iterator](),s=r.next();if(s.done)return r;if(CID.asCID(s.value)||s.value instanceof String||typeof s.value=="string"){yield toPin$1({cid:s.value});for(const n of r)yield toPin$1({cid:n});return}if(s.value.cid!=null||s.value.path!=null){yield toPin$1(s.value);for(const n of r)yield toPin$1(n);return}throw errCode(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){const r=t[Symbol.asyncIterator](),s=await r.next();if(s.done)return r;if(CID.asCID(s.value)||s.value instanceof String||typeof s.value=="string"){yield toPin$1({cid:s.value});for await(const n of r)yield toPin$1({cid:n});return}if(s.value.cid!=null||s.value.path!=null){yield toPin$1(s.value);for await(const n of r)yield toPin$1(n);return}throw errCode(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw errCode(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function toPin$1(t){const e=t.cid||`${t.path}`;if(!e)throw errCode(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}const createAddAll$1=configure(t=>{async function*e(r,s={}){for await(const{path:n,recursive:i,metadata:o}of normaliseInput$1(r)){const a=await t.post("pin/add",{signal:s.signal,searchParams:toUrlSearchParams({...s,arg:n,recursive:i,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:s.headers});for await(const l of a.ndjson()){if(l.Pins){for(const c of l.Pins)yield CID.parse(c);continue}yield CID.parse(l)}}}return e});function createAdd$3(t){const e=createAddAll$1(t);return configure(()=>{async function r(s,n={}){return last(e([{path:s,...n}],n))}return r})(t)}function toPin(t,e,r){const s={type:t,cid:CID.parse(e)};return r&&(s.metadata=r),s}const createLs$4=configure(t=>{async function*e(r={}){let s=[];r.paths&&(s=Array.isArray(r.paths)?r.paths:[r.paths]);const n=await t.post("pin/ls",{signal:r.signal,searchParams:toUrlSearchParams({...r,arg:s.map(i=>`${i}`),stream:!0}),headers:r.headers});for await(const i of n.ndjson()){if(i.Keys){for(const o of Object.keys(i.Keys))yield toPin(i.Keys[o].Type,o,i.Keys[o].Metadata);return}yield toPin(i.Type,i.Cid,i.Metadata)}}return e}),createRmAll$1=configure(t=>{async function*e(r,s={}){for await(const{path:n,recursive:i}of normaliseInput$1(r)){const o=new URLSearchParams(s.searchParams);o.append("arg",`${n}`),i!=null&&o.set("recursive",String(i));const a=await t.post("pin/rm",{signal:s.signal,headers:s.headers,searchParams:toUrlSearchParams({...s,arg:`${n}`,recursive:i})});for await(const l of a.ndjson()){if(l.Pins){yield*l.Pins.map(c=>CID.parse(c));continue}yield CID.parse(l)}}}return e}),createRm$2=t=>{const e=createRmAll$1(t);return configure(()=>{async function r(s,n={}){return last(e([{path:s,...n}],n))}return r})(t)},decodePin=({Name:t,Status:e,Cid:r})=>({cid:CID.parse(r),name:t,status:e}),encodeService=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},encodeCID=t=>{if(CID.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},encodeQuery=({service:t,cid:e,name:r,status:s,all:n})=>{const i=toUrlSearchParams({service:encodeService(t),name:r,force:n?!0:void 0});if(e)for(const o of e)i.append("cid",encodeCID(o));if(s)for(const o of s)i.append("status",o);return i},encodeAddParams=({cid:t,service:e,background:r,name:s,origins:n})=>{const i=toUrlSearchParams({arg:encodeCID(t),service:encodeService(e),name:s,background:r?!0:void 0});if(n)for(const o of n)i.append("origin",o.toString());return i};function createAdd$2(t){async function e(r,{timeout:s,signal:n,headers:i,...o}){const a=await t.post("pin/remote/add",{timeout:s,signal:n,headers:i,searchParams:encodeAddParams({cid:r,...o})});return decodePin(await a.json())}return e}function createLs$3(t){async function*e({timeout:r,signal:s,headers:n,...i}){const o=await t.post("pin/remote/ls",{timeout:r,signal:s,headers:n,searchParams:encodeQuery(i)});for await(const a of o.ndjson())yield decodePin(a)}return e}function createRm$1(t){async function e({timeout:r,signal:s,headers:n,...i}){await t.post("pin/remote/rm",{timeout:r,signal:s,headers:n,searchParams:encodeQuery({...i,all:!1})})}return e}function createRmAll(t){async function e({timeout:r,signal:s,headers:n,...i}){await t.post("pin/remote/rm",{timeout:r,signal:s,headers:n,searchParams:encodeQuery({...i,all:!0})})}return e}function encodeEndpoint(t){const e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function decodeRemoteService(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:decodeStat(t.Stat)}}}function decodeStat(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:s,Failed:n}=t.PinCount;return{status:"valid",pinCount:{queued:s,pinning:e,pinned:r,failed:n}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function createAdd$1(t){async function e(r,s){const{endpoint:n,key:i,headers:o,timeout:a,signal:l}=s;await t.post("pin/remote/service/add",{timeout:a,signal:l,searchParams:toUrlSearchParams({arg:[r,encodeEndpoint(n),i]}),headers:o})}return e}function createLs$2(t){async function e(r={}){const{stat:s,headers:n,timeout:i,signal:o}=r,a=await t.post("pin/remote/service/ls",{timeout:i,signal:o,headers:n,searchParams:s===!0?toUrlSearchParams({stat:s}):void 0}),{RemoteServices:l}=await a.json();return l.map(decodeRemoteService)}return e}function createRm(t){async function e(r,s={}){await t.post("pin/remote/service/rm",{signal:s.signal,headers:s.headers,searchParams:toUrlSearchParams({arg:r})})}return e}function createService(t){const e=new Client(t);return{add:createAdd$1(e),ls:createLs$2(e),rm:createRm(e)}}function createRemote(t){const e=new Client(t);return{add:createAdd$2(e),ls:createLs$3(e),rm:createRm$1(e),rmAll:createRmAll(e),service:createService(t)}}function createPin(t){return{addAll:createAddAll$1(t),add:createAdd$3(t),ls:createLs$4(t),rmAll:createRmAll$1(t),rm:createRm$2(t),remote:createRemote(t)}}const rpcArrayToTextArray=t=>Array.isArray(t)?t.map(rpcToText):t,rpcToText=t=>toString$1(rpcToBytes(t)),rpcToBytes=t=>base64url.decode(t),rpcToBigInt=t=>BigInt(`0x${toString$1(base64url.decode(t),"base16")}`),textToUrlSafeRpc=t=>base64url.encode(fromString$1(t)),createLs$1=configure(t=>{async function e(r={}){const{Strings:s}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return rpcArrayToTextArray(s)||[]}return e}),createPeers$1=configure(t=>{async function e(r,s={}){const n=await t.post("pubsub/peers",{signal:s.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(r),...s}),headers:s.headers}),{Strings:i}=await n.json();return i||[]}return e}),createPublish=configure(t=>{async function e(r,s,n={}){const i=toUrlSearchParams({arg:textToUrlSafeRpc(r),...n}),o=new AbortController,a=abortSignal(o.signal,n.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:i,...await multipartRequest([s],o,n.headers)})).text()}return e}),log=logger("ipfs-http-client:pubsub:subscribe"),createSubscribe=(t,e)=>configure(r=>{async function s(n,i,o={}){o.signal=e.subscribe(n,i,o.signal);let a,l;const c=new Promise((d,f)=>{a=d,l=f}),u=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:o.signal,searchParams:toUrlSearchParams({arg:textToUrlSafeRpc(n),...o}),headers:o.headers}).catch(d=>{e.unsubscribe(n,i),l(d)}).then(d=>{clearTimeout(u),d&&(readMessages(d,{onMessage:f=>{if(!!i){if(typeof i=="function"){i(f);return}typeof i.handleEvent=="function"&&i.handleEvent(f)}},onEnd:()=>e.unsubscribe(n,i),onError:o.onError}),a())}),c}return s})(t);async function readMessages(t,{onMessage:e,onEnd:r,onError:s}){var n,i;s=s||log;try{for await(const o of t.ndjson())try{if(!o.from)continue;o.from!=null&&o.seqno!=null?e({type:"signed",from:peerIdFromString(o.from),data:rpcToBytes(o.data),sequenceNumber:rpcToBigInt(o.seqno),topic:rpcToText(o.topicIDs[0]),key:rpcToBytes((n=o.key)!=null?n:"u"),signature:rpcToBytes((i=o.signature)!=null?i:"u")}):e({type:"unsigned",data:rpcToBytes(o.data),topic:rpcToText(o.topicIDs[0])})}catch(a){a.message=`Failed to parse pubsub message: ${a.message}`,s(a,!1,o)}}catch(o){isAbortError(o)||s(o,!0)}finally{r()}}const isAbortError=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}},createUnsubscribe=(t,e)=>{async function r(s,n){e.unsubscribe(s,n)}return r};class SubscriptionTracker{constructor(){this._subs=new Map}subscribe(e,r,s){const n=this._subs.get(e)||[];if(n.find(o=>o.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);const i=new AbortController;return this._subs.set(e,[{handler:r,controller:i}].concat(n)),s&&s.addEventListener("abort",()=>this.unsubscribe(e,r)),i.signal}unsubscribe(e,r){const s=this._subs.get(e)||[];let n;r?(this._subs.set(e,s.filter(i=>i.handler!==r)),n=s.filter(i=>i.handler===r)):(this._subs.set(e,[]),n=s),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach(i=>i.controller.abort())}}function createPubsub(t){const e=new SubscriptionTracker;return{ls:createLs$1(t),peers:createPeers$1(t),publish:createPublish(t),subscribe:createSubscribe(t,e),unsubscribe:createUnsubscribe(t,e)}}const createLocal=configure(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:objectToCamel,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return e}),createRefs=configure((t,e)=>Object.assign(async function*(s,n={}){const i=Array.isArray(s)?s:[s];yield*(await t.post("refs",{signal:n.signal,searchParams:toUrlSearchParams({arg:i.map(a=>`${a instanceof Uint8Array?CID.decode(a):a}`),...n}),headers:n.headers,transform:objectToCamel})).ndjson()},{local:createLocal(e)})),createGc=configure(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:n=>({err:n.Error?new Error(n.Error):null,cid:(n.Key||{})["/"]?CID.parse(n.Key["/"]):null})})).ndjson()}return e}),createStat=configure(t=>{async function e(r={}){const n=await(await t.post("repo/stat",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return e}),createVersion$1=configure(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Version}return e});function createRepo(t){return{gc:createGc(t),stat:createStat(t),version:createVersion$1(t)}}const createBw=configure(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:n=>({totalIn:BigInt(n.TotalIn),totalOut:BigInt(n.TotalOut),rateIn:parseFloat(n.RateIn),rateOut:parseFloat(n.RateOut)})})).ndjson()}return e});function createStats(t){return{bitswap:createStat$4(t),repo:createStat(t),bw:createBw(t)}}const createAddrs=configure(t=>{async function e(r={}){const s=await t.post("swarm/addrs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Addrs:n}=await s.json();return Object.keys(n).map(i=>({id:peerIdFromString(i),addrs:(n[i]||[]).map(o=>multiaddr(o))}))}return e}),createConnect=configure(t=>{async function e(r,s={}){const n=await t.post("swarm/connect",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),{Strings:i}=await n.json();return i||[]}return e}),createDisconnect=configure(t=>{async function e(r,s={}){const n=await t.post("swarm/disconnect",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),{Strings:i}=await n.json();return i||[]}return e}),createLocalAddrs=configure(t=>{async function e(r={}){const s=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Strings:n}=await s.json();return(n||[]).map(i=>multiaddr(i))}return e}),createPeers=configure(t=>{async function e(r={}){const s=await t.post("swarm/peers",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:n}=await s.json();return(n||[]).map(i=>({addr:multiaddr(i.Addr),peer:peerIdFromString(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}return e});function createSwarm(t){return{addrs:createAddrs(t),connect:createConnect(t),disconnect:createDisconnect(t),localAddrs:createLocalAddrs(t),peers:createPeers(t)}}const createAddAll=configure(t=>{async function*e(r,s={}){const n=new AbortController,i=abortSignal(n.signal,s.signal),{headers:o,body:a,total:l,parts:c}=await multipartRequest(r,n,s.headers),[u,d]=typeof s.progress=="function"?createProgressHandler(l,c,s.progress):[void 0,void 0],f=await t.post("add",{searchParams:toUrlSearchParams({"stream-channels":!0,...s,progress:Boolean(u)}),onUploadProgress:d,signal:i,headers:o,body:a});for await(let m of f.ndjson())m=objectToCamel(m),m.hash!==void 0?yield toCoreInterface(m):u&&u(m.bytes||0,m.name)}return e}),createProgressHandler=(t,e,r)=>e?[void 0,createOnUploadProgress(t,e,r)]:[r,void 0],createOnUploadProgress=(t,e,r)=>{let s=0;const n=e.length;return({loaded:i,total:o})=>{const a=Math.floor(i/o*t);for(;s<n;){const{start:l,end:c,name:u}=e[s];if(a<c){r(a-l,u);break}else r(c-l,u),s+=1}}};function toCoreInterface({name:t,hash:e,size:r,mode:s,mtime:n,mtimeNsecs:i}){const o={path:t,cid:CID.parse(e),size:parseInt(r)};return s!=null&&(o.mode=parseInt(s,8)),n!=null&&(o.mtime={secs:n,nsecs:i||0}),o}function blobToIt(t){return typeof t.stream=="function"?browserReadableStreamToIt(t.stream()):browserReadableStreamToIt(new Response(t).body)}async function*toAsyncIterable(t){yield t}async function normaliseContent(t){if(isBytes(t))return toAsyncIterable(toBytes(t));if(typeof t=="string"||t instanceof String)return toAsyncIterable(toBytes(t.toString()));if(isBlob(t))return blobToIt(t);if(isReadableStream(t)&&(t=browserReadableStreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=peekableIterator(t),{value:r,done:s}=await e.peek();if(s)return toAsyncIterable(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return toAsyncIterable(Uint8Array.from(await all(e)));if(isBytes(r)||typeof r=="string"||r instanceof String)return map(e,toBytes)}throw errCode(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function toBytes(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):fromString$1(t.toString())}async function*normaliseCandidateSingle(t,e){if(t==null)throw errCode(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield toFileObject(t.toString(),e);return}if(isBytes(t)||isBlob(t)){yield toFileObject(t,e);return}if(isReadableStream(t)&&(t=browserReadableStreamToIt(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=peekableIterator(t),{value:s,done:n}=await r.peek();if(n){yield{content:[]};return}if(r.push(s),Number.isInteger(s)||isBytes(s)||typeof s=="string"||s instanceof String){yield toFileObject(r,e);return}throw errCode(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(t)){yield toFileObject(t,e);return}throw errCode(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(t,e){const{path:r,mode:s,mtime:n,content:i}=t,o={path:r||"",mode:parseMode(s),mtime:parseMtime(n)};return i?o.content=await e(i):r||(o.content=await e(t)),o}function normaliseInput(t){return normaliseCandidateSingle(t,normaliseContent)}function createAdd(t){const e=createAddAll(t);return configure(()=>{async function r(s,n={}){return await last(e(normaliseInput(s),n))}return r})(t)}const createCat=configure(t=>{async function*e(r,s={}){yield*(await t.post("cat",{signal:s.signal,searchParams:toUrlSearchParams({arg:r.toString(),...s}),headers:s.headers})).iterator()}return e}),createCommands=configure(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()),createDns=configure(t=>async(r,s={})=>(await(await t.post("dns",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers})).json()).Path),createGetEndpointConfig=configure(t=>()=>{const e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}}),createGet=configure(t=>{async function*e(r,s={}){const n={arg:`${r instanceof Uint8Array?CID.decode(r):r}`,...s};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel),yield*(await t.post("get",{signal:s.signal,searchParams:toUrlSearchParams(n),headers:s.headers})).iterator()}return e}),createId=configure(t=>{async function e(r={}){const n=await(await t.post("id",{signal:r.signal,searchParams:toUrlSearchParams({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),i={...objectToCamel(n)};return i.id=peerIdFromString(i.id),i.addresses&&(i.addresses=i.addresses.map(o=>multiaddr(o))),i}return e}),createIsOnline=t=>{const e=createId(t);async function r(s={}){const n=await e(s);return Boolean(n&&n.addresses&&n.addresses.length)}return r},createLs=configure((t,e)=>{async function*r(s,n={}){const i=`${s instanceof Uint8Array?CID.decode(s):s}`;async function o(l){let c=l.Hash;if(c.includes("/")){const d=c.startsWith("/ipfs/")?c:`/ipfs/${c}`;c=(await createStat$2(e)(d)).cid}else c=CID.parse(c);const u={name:l.Name,path:i+(l.Name?`/${l.Name}`:""),size:l.Size,cid:c,type:typeOf(l)};return l.Mode&&(u.mode=parseInt(l.Mode,8)),l.Mtime!==void 0&&l.Mtime!==null&&(u.mtime={secs:l.Mtime},l.MtimeNsecs!==void 0&&l.MtimeNsecs!==null&&(u.mtime.nsecs=l.MtimeNsecs)),u}const a=await t.post("ls",{signal:n.signal,searchParams:toUrlSearchParams({arg:i,...n}),headers:n.headers});for await(let l of a.ndjson()){if(l=l.Objects,!l)throw new Error("expected .Objects in results");if(l=l[0],!l)throw new Error("expected one array in results.Objects");const c=l.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(!c.length){yield o(l);return}yield*c.map(o)}}return r});function typeOf(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const createMount=configure(t=>{async function e(r={}){const s=await t.post("dns",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await s.json())}return e}),createPing=configure(t=>{async function*e(r,s={}){yield*(await t.post("ping",{signal:s.signal,searchParams:toUrlSearchParams({arg:`${r}`,...s}),headers:s.headers,transform:objectToCamel})).ndjson()}return e}),createResolve=configure(t=>{async function e(r,s={}){const n=await t.post("resolve",{signal:s.signal,searchParams:toUrlSearchParams({arg:r,...s}),headers:s.headers}),{Path:i}=await n.json();return i}return e}),createStart=configure(t=>async(r={})=>{throw errCode(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),createStop=configure(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).text()}return e}),createVersion=configure(t=>{async function e(r={}){const s=await t.post("version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return{...objectToCamel(await s.json()),"ipfs-http-client":"1.0.0"}}return e});function create(t={}){const e={name:identity$1.name,code:identity$1.code,encode:c=>c,decode:c=>c},r=Object.values(bases);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(c=>r.push(c));const s=new Multibases({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),n=Object.values(codecs);[dagPB,dagCBOR,dagJSON,dagJOSE,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(c=>n.push(c));const i=new Multicodecs({codecs:n,loadCodec:t.ipld&&t.ipld.loadCodec}),o=Object.values(hashes);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(c=>o.push(c));const a=new Multihashes({hashers:o,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:createAdd(t),addAll:createAddAll(t),bitswap:createBitswap(t),block:createBlock(t),bootstrap:createBootstrap(t),cat:createCat(t),commands:createCommands(t),config:createConfig(t),dag:createDag(i,t),dht:createDht(t),diag:createDiag(t),dns:createDns(t),files:createFiles(t),get:createGet(t),getEndpointConfig:createGetEndpointConfig(t),id:createId(t),isOnline:createIsOnline(t),key:createKey(t),log:createLog(t),ls:createLs(t),mount:createMount(t),name:createName(t),object:createObject(i,t),pin:createPin(t),ping:createPing(t),pubsub:createPubsub(t),refs:createRefs(t),repo:createRepo(t),resolve:createResolve(t),start:createStart(t),stats:createStats(t),stop:createStop(t),swarm:createSwarm(t),version:createVersion(t),bases:s,codecs:i,hashers:a}}const ipfs=create({url:"http://127.0.0.1:5001"}),AppIpfs={async test(){console.log("ipfs-http-client:",ipfs);const t=ipfs.config.getAll();console.log("ipfs-http-client-id:",t);const e=ipfs.add({path:"hello.txt",content:"Hello World 101"});console.log("ipfs-http:",e);const r=await all(ipfs.files.ls("/assets"));console.log("ipfs-http-ls:",r);const s=await ipfs.files.read("/assets/bed.png");console.log("ipfs-http-contents:",s)},async lsalldir(){const t=[];for await(const e of ipfs.files.ls("/"))t.push(e);return t}},spritelist=new Array;let PixiApp,wr=0,hr=0,xiaomihu,xiaosongshu,guizi;const PixiEngine={init(t,e){const r=assist.initpardata(t,e);wr=r[4],hr=r[5],console.log("\u5C4F\u5E55\u4F38\u7F29\u6BD4-x\uFF1A",wr,"y\uFF1A",hr),typeof PixiApp<"u"&&PixiApp.destroy(),PixiApp=new Application({width:t,height:e,antialias:!0,backgroundColor:2719929,backgroundAlpha:.2,resolution:1}),this.testapi()},testapi(){},getPixiApp(){return PixiApp},getCanvas(){return PixiApp.view},getwr(){return wr},loadobj(t,e){assist.backgroundinit();const r=new Spritesheet(Texture.from(huapenPath),huapenPathJS);r.parse();const s=new AnimatedSprite(r.animations["24afb299ff52c2481dfd0c991cb8d57a"]);s.animationSpeed=.05,s.loop=!0,s.gotoAndPlay(0);const n=new SpriteEntry(s,huapenPathGIF,"huapen",20,200,70,70),i=new Spritesheet(Texture.from(shuPath),shuPathJS);i.parse();const o=new AnimatedSprite(i.animations.f31b4a9dae7041e171ce5a56dda5d8a);o.animationSpeed=.05,o.loop=!0,o.gotoAndPlay(0);const a=new SpriteEntry(o,shuPathGIF,"shu",50,200,70,70),l=new Spritesheet(Texture.from(guoPath),guoPathJS);l.parse();const c=new AnimatedSprite(l.animations["2424c7ec7ae01964a42dd618c0ce5aa"]);c.animationSpeed=.05,c.loop=!0,c.gotoAndPlay(0);const u=new SpriteEntry(c,guoPathGIF,"guo",100,200,70,70),d=new Spritesheet(Texture.from(shizhongPath),shizhongPathJS);d.parse();const f=new AnimatedSprite(d.animations["568c24782fd06ec7702575a324caccf"]);f.animationSpeed=.005,f.loop=!0,f.gotoAndPlay(0);const m=new SpriteEntry(f,shizhongPathGIF,"shizhong",100,100,50,50),g=new Spritesheet(Texture.from(xiaocaoPath),xiaocaoPathJS);g.parse();const y=new AnimatedSprite(g.animations["3e72d2305d5b8bb138068391c68452b"]);y.animationSpeed=.05,y.loop=!0,y.gotoAndPlay(0);const b=new SpriteEntry(y,xiaocaoPathGIF,"xiaocao",250,400,100,50),x=new Spritesheet(Texture.from(caocongPath),caocongPathJS);x.parse();const _=new AnimatedSprite(x.animations["5e3b4c18753c3b6f9125bc6ca3d5f79c"]);_.animationSpeed=.05,_.loop=!0,_.gotoAndPlay(0);const w=new SpriteEntry(_,caocongPathGIF,"caocong",450,100,100,100),v=new Spritesheet(Texture.from(heyePath),heyePathJS);v.parse();const S=new AnimatedSprite(v.animations["3d6cb1337a4516bbd5d425f2f7a05b"]);S.animationSpeed=.05,S.loop=!0,S.gotoAndPlay(0);const M=new SpriteEntry(S,heyePathGIF,"heye",350,400,100,100),C=new Spritesheet(Texture.from(huaPath),huaPathJS);C.parse();const A=new AnimatedSprite(C.animations["2a4437fb90f7169cb29a9ad86cfee13f"]);A.animationSpeed=.05,A.loop=!0,A.gotoAndPlay(0);const X=new SpriteEntry(A,huaPathGIF,"hua",250,300,100,100),F=new Spritesheet(Texture.from(yinghuashuPath),yinghuashuPathJS);F.parse();const O=new AnimatedSprite(F.animations["0fce7ce5942b91467435bcbbeeae7cbe"]);O.animationSpeed=.01,O.loop=!0,O.gotoAndPlay(0);const U=new SpriteEntry(O,yinghuashuPathGIF,"yinghuashu",150,600,300,200),k=new Spritesheet(Texture.from(luohuaPath),luohuaPathJS);k.parse();const B=new AnimatedSprite(k.animations["0fb2d1232966ba7925141896913d3a"]);B.animationSpeed=.05,B.loop=!0,B.gotoAndPlay(0);const ie=new SpriteEntry(B,luohuaPathGIF,"luohua",150,600,90,90),te=new Spritesheet(Texture.from(shengdanshuPath),shengdanshuPathJS);te.parse();const N=new AnimatedSprite(te.animations["5b7e1c57461cad9bcb5007d070c101a"]);N.animationSpeed=.01,N.loop=!0,N.gotoAndPlay(0);const Q=new SpriteEntry(N,shengdanshuPathGIF,"shengdanshu",350,600,120,180),ce=new Spritesheet(Texture.from(wendujiPath),wendujiPathJS);ce.parse();const L=new AnimatedSprite(ce.animations["0ee4442ef715642a383c7e1055887d7d"]);L.animationSpeed=.01,L.loop=!0,L.gotoAndPlay(0);const Z=new SpriteEntry(L,wendujiPathgif,"wenduji",150,600,90,90),ne=new Spritesheet(Texture.from(fireplacePath),fireplacePathJS);ne.parse();const ue=new AnimatedSprite(ne.animations.fireplace_wps\u56FE\u7247);ue.animationSpeed=.2,ue.loop=!0,ue.gotoAndPlay(0);const de=new SpriteEntry(ue,biluPath,"fireplace",150,500,138,138);console.log("Spritesheet ready to use!");const I=new Sprite(Texture.from(shafaPath)),z=new SpriteEntry(I,shafaPath,"shafa",300,700,200,100),j=new Sprite(Texture.from(shujiaPath)),q=new SpriteEntry(j,shujiaPath,"shujia",100,700,100,50),oe=new Sprite(Texture.from(topguiPath)),le=new SpriteEntry(oe,topguiPath,"topgui",130,300,120,60),J=new Sprite(Texture.from(chuguiPath)),E=new SpriteEntry(J,chuguiPath,"chugui",450,700,100,100),T=new Sprite(Texture.from(yiguiPath)),P=new SpriteEntry(T,yiguiPath,"yigui",100,300,80,120),R=new Sprite(Texture.from(axiPath)),D=new SpriteEntry(R,axiPath,"axi",100,300,80,50),W=new Sprite(Texture.from(xiaoguiziPath)),K=new SpriteEntry(W,xiaoguiziPath,"xiaoguizi",150,420,100,100),H=new Sprite(Texture.from(bedPath)),Y=new SpriteEntry(H,bedPath,"bed",150,420,160,160),G=new Sprite(Texture.from(qiaokeliPath)),re=new SpriteEntry(G,qiaokeliPath,"qiaokeli",150,370,50,50),ee=new Sprite(Texture.from(doudouPath)),se=new SpriteEntry(ee,doudouPath,"doudou",150,250,50,50),ae=new Sprite(Texture.from(rabbitPath)),he=new SpriteEntry(ae,rabbitPath,"rabbit",150,120,50,50),pe=new Sprite(Texture.from(bingxiangPath)),fe=new SpriteEntry(pe,bingxiangPath,"bingxiang",550,700,100,200);guizi=new Sprite(Texture.from(guiziPath));const ge=new SpriteEntry(guizi,guiziPath,"guizi",180,700,138,138),be=new Sprite(Texture.from(matongPath)),xe=new SpriteEntry(be,matongPath,"matong",300,100,50,50),_e=new Sprite(Texture.from(chuanghuPath)),Ee=new SpriteEntry(_e,chuanghuPath,"chuanghu",300,100,60,60),ve=new Sprite(Texture.from(maojingPath)),ye=new SpriteEntry(ve,maojingPath,"maojing",200,100,50,50),we=new Sprite(Texture.from(xishoupenPath)),Te=new SpriteEntry(we,xishoupenPath,"xishoupen",300,100,70,70);guizi.name="guizi",guizi.width=138*wr,guizi.height=138*wr,xiaomihu=new Sprite(Texture.from(xiaomihuPath));const Ae=new SpriteEntry(xiaomihu,xiaomihuPath,"xiaomihu",75,250,69,69);xiaomihu.name="xiaomihu",xiaomihu.width=69*wr,xiaomihu.height=69*wr,xiaosongshu=new Sprite(Texture.from(xiaosongshuPath));const Pe=new SpriteEntry(xiaosongshu,xiaosongshuPath,"xiaosongshu",75,330,69,69);this.loadsp(Z),this.loadsp(de),this.loadsp(ge),this.loadsp(Ae),this.loadsp(Pe),this.loadsp(ie),this.loadsp(U),this.loadsp(X),this.loadsp(M),this.loadsp(b),this.loadsp(w),this.loadsp(m),this.loadsp(u),this.loadsp(n),this.loadsp(a),this.loadsp(z),this.loadsp(E),this.loadsp(fe),this.loadsp(q),this.loadsp(le),this.loadsp(K),this.loadsp(P),this.loadsp(D),this.loadsp(xe),this.loadsp(ye),this.loadsp(Te),this.loadsp(Ee),this.loadsp(Q),this.loadsp(Y),this.loadsp(re),this.loadsp(se),this.loadsp(he)},loadsp(t){assist.toloadsp(t),spritelist.push(t),t.load()},loadeventlisten(){window.addEventListener("mousewheel",t=>{console.log("mousewheel");const e=t.wheelDelta>0?.1:-.1;PixiApp.stage.scale.x+e>=.1&&(PixiApp.stage.scale.x+=e,PixiApp.stage.scale.y+=e)})},tickinit(){PixiApp.ticker.add(t=>{assist.sprebackregister(PixiApp.stage.getChildByName("xiaomihu")),assist.sprebackregister(PixiApp.stage.getChildByName("xiaosongshu")),assist.sprebackregister(PixiApp.stage.getChildByName("guizi")),assist.sprebackregister(PixiApp.stage.getChildByName("fireplace")),assist.sprebackregister(PixiApp.stage.getChildByName("wenduji")),assist.sprebackregister(PixiApp.stage.getChildByName("luohua")),assist.sprebackregister(PixiApp.stage.getChildByName("yinghuashu")),assist.sprebackregister(PixiApp.stage.getChildByName("hua")),assist.sprebackregister(PixiApp.stage.getChildByName("heye")),assist.sprebackregister(PixiApp.stage.getChildByName("xiaocao")),assist.sprebackregister(PixiApp.stage.getChildByName("caocong")),assist.sprebackregister(PixiApp.stage.getChildByName("shizhong")),assist.sprebackregister(PixiApp.stage.getChildByName("guo")),assist.sprebackregister(PixiApp.stage.getChildByName("huapen")),assist.sprebackregister(PixiApp.stage.getChildByName("shu")),assist.sprebackregister(PixiApp.stage.getChildByName("chugui")),assist.sprebackregister(PixiApp.stage.getChildByName("shafa")),assist.sprebackregister(PixiApp.stage.getChildByName("bingxiang")),assist.sprebackregister(PixiApp.stage.getChildByName("shujia")),assist.sprebackregister(PixiApp.stage.getChildByName("topgui")),assist.sprebackregister(PixiApp.stage.getChildByName("yigui")),assist.sprebackregister(PixiApp.stage.getChildByName("xiaoguizi")),assist.sprebackregister(PixiApp.stage.getChildByName("axi")),assist.sprebackregister(PixiApp.stage.getChildByName("maojing")),assist.sprebackregister(PixiApp.stage.getChildByName("matong")),assist.sprebackregister(PixiApp.stage.getChildByName("xishoupen")),assist.sprebackregister(PixiApp.stage.getChildByName("chuanghu")),assist.sprebackregister(PixiApp.stage.getChildByName("shengdanshu")),assist.sprebackregister(PixiApp.stage.getChildByName("bed")),assist.sprebackregister(PixiApp.stage.getChildByName("qiaokeli")),assist.sprebackregister(PixiApp.stage.getChildByName("rabbit")),assist.sprebackregister(PixiApp.stage.getChildByName("doudou"))})},getloadsprite(){return spritelist}},musicopenPath="/assets/musicopen.2e1d2e98.png",musicclosePath="/assets/musicclose.582dbf2a.png",furSet="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAByCAMAAACLFKgDAAABiVBMVEVALycAAABENClEMipSQDdTQThKOTBLOTFFMytFMyxHNC1FNCxINSw3LCxCLydHNC5CLydEMilHNi1GMyxDMilHNS1INyzdy7nRuqSOcmTax7TbyLXgzrzTwK/RvKXSvaj35tRbSUDfzbzUwKvWwa3MtZ7PuaPZxrPVwazYxbLXw6+Ib1/YxLDTvqrs2snfzbp/YVTp49Lcybd/YlTTv67SvqzOuKDey7jLs5zcyreCZFbs2sjfzrzNtZ/PuKKFbFzJsZnUwa+ReWiFaVqEZljIsJeMcGLKs5rWxLKHalzr5dTdy7jYxbO/qpn05NLGrZOLb2DGrpWRdmiPdWajinqgh3iJbV67pJSxmoqljX6Zf3Hr2cfn1cOUemvJtaSWfG3k3Mvm4M+IdmuNcmPv3sze1cXMvKy0oZOdg3Th2cjOuqjw383Gt6js59XQvKqtloaqkYJYRTzb0sHCsKCynY66qprHsqHi0cHWzLvEq5FdS0LNwbHQxLTNuKamkoSgjoHTyLju6tl9X1LhU1JcAAAAF3RSTlP2ABTf/vr48ejPkoREBfIx4rlenLRlLj4nQxkAAAjnSURBVHjaxNE7i4NAFIbhWc39fmPZajdmoyyBWFjIhOBgE6ZZZrDWSsQUphECIWny1/d4Yi5sP/j+gfPwHfKGab3ubESqaqDPuj3tJkFQ/72jN+u5UVl5val3hv07SJu0G5f4mDqLivo9HONLoz3RbiCt06rFhygR88oSSXSIa62OVoD6k1Z+PQmR2WEYbp/ZSts+g6t2JsTpmrcmfQAN27VrJLJo5VFKTdPzXNdlzLI+VGZZFmNwyPNME86yVZSJ6FprD9+INm3EJ5FsaCBlEOx2O9/3OUWbyijE4RQcDIrLdJOIU9yYaqSnX1KROf5ZBmDhCPFciMFMimKwDuQhjIMqkGffyUR60Xuk24wjEfGzhG04v/9M7cvwZ4+PcQ47yTMHRtzsknF9nyRLiR5KkYOaT8WhCUmUokguk2RfH5NRngrbLf6F8wCn1HwprTQBCUcqvubaIs1HZGA485DKhwfWKTVrhZUmWOkhkjScO8aAEGMBoKD0MOSg5ltpaEISK0UBgBYGeQWhBzmo+VEYmpCEov+grbl79axvmqXC/milg50GgTAIwI+xLeiRGom0Ziu4rCmBtLSQvRA1UEgaD956wVOf3/Xfrvw0HHfnCb7MjDIFWJR7bxjEmPzPv0dpfGtRJi36+xFjI9AmlwUhj9I8WYsyIZGsKN9gUAqDDR7QPFoLmAYRjJZiUJRCQcgDmgdLARMSQUVpNAZFiRxMe2Q7SuNYiDLJlrRIjpZEN6DDtSDscSwGi64VHTAoYRGAAu0BjmstQNKiAEARS8agRBfk++DRnFiIV0MhQsSapES+rytKxqAFQwXJvbSHCuIUWWgoL1nhEEGpFsnVUEVsMQnCHkqFGzafXx9zM3nv2iZ0pYgi0SRoOfOGxWAw4FBRNF2942szeV7zXd01BYkVCUYbNvNmyxEILaYKojHJ+orzsvqeG8q+5Lz6yUgcU1WR3mwShBeDgkjR13x7Ol7CezMJL8fTltc9dAQVwWbTIHUhvJigzZ6X7dklqzszWRH33Jb8l/36bWkchuMA/jJKXfMK9iCudciFQsh+ITSwQmm7/jlYuzHuOOQ44aYiKL52w3Rm0CisBjrQ7+Mv2Wdpmz+i9JXo9Znpl+hD0G6Cpi2BGoXYsRccohpIO1Ug/wjQmQKpD6wsyPIqdOwmvFqSohw5O9DZMaDLqOayGuGDf+d18zp/umMKPmyMKsnrCP84HsR+kuQOvw3kR8iUyFcV3WGGCtMdFXyXkJb1AGGUBpsp3g8zjxepaa1bxPODTr6cdbPMVUeD/m2C7KIP6MI9d5G3/61K8OC8m4CLao73nWxMTRlnlRZ5SI37WRD2Y0FAmJY6ICJ+eSJ+nNGxOTSL/UuroGjBIW9Y9/VocuCLCO86+fj95BG2CQpZGogGm9a6RgQpC3edlr7roS0LLYH0IMxzuvHYvhWi2QegGbIPQkYQ+gZ9g74MiEoAekIgCpxwkCcDUh5IgJ8OSHL5tE0JaNDAKzUQ935VA6caNOxeBiT7v76RnOq9bNjdXqoZWt8WXOrdftjzkCSbx8nfhMh+5yH7J0bl/D152BCwfmLseaZOeLKd3LtEpvpMbQfU69bBptcgbye/ZoHbRPrWYQfU517mOWUB1Xr1h4hGdyyB+mWb8Hq1uuZF6SvO8KDnZs6tV2kgisJG3708GNKDGjUmqC9jqcTMVh9Ka2UKJA3lWlMpIaUFaWm4GBMuOfrLnWJ1OFFEIRm63ggEVjvt3pvMt4pGfckaiguiRLlUGHoj25I5DZYadO8zQ9yvISZU8kFb6q4FzRZ+gxDKnOUuY0KVSGkuxJ5HoDsbhXIlc4Y6xITQveycKG0nmFqgGprQjT5XEO9KvbteIxlXm1AfBuLABkl6AYoQFRDvXsbusLrgr0NBsl1d7A0aXcumnyKNEHHt9my51r4iqZ2RBf1LkWroDt3lRAOlU0I85yF2fnwVFBCqHdUY96ghPQh0cbjQwGhhxG1iZH7kOnVjKc3JhBDP0cUfChyPgPUScZypE+WrBpgz2jgaLUPdUEOJ9KkFcRvhZojVH5V4Dp07rKoAjSEz1FsQtV7iaohV6GBqSjYztJX+xZRqBa6GWA/76ppSsSVAZ9fQsAHGjOM1xF4W3a9u7YVJDfm7hpy5Qrw8OoOhmvt16EOzbkDXDcRf6i2ayiSHuC9Z8QUdO+iPgwJqvGRMYzqzVXgbQrIF2krX3Y2hKPZA3NVSA1rTORdGVOmoZO4EojubzFc9cVerPvglxLt14KoG/VlP13uOI16R/qUPlox4N1dU6ihQmzk6lXhVl8wQp/GDNVfNm4qJH6aVlhjSvvEc0FCGjh9A/PFQTM7Rbqmm7RXJRVUo8BxhURgZAEZn7PYST6xUf6ZvX1Q7ZuH4/bIjhnxUanWJpBqWt5w6zJDTVsg8i+ixzf37R+8oZo75G4RwOKkRAKLZ3pSV6rHxo9/n12Ee4+P3XI8QQhejth0zEaRx+XPV9FVfqsXXAMavyvi/NoFzp+9KI5QtVCPLALXxRf85ETWhK28PsIz/fZucgQSZ8KR9e4RwTm6ZoG5cfetnXIRm+wLFfsr4IEjwO2rByIby8WRDtipA3EoC3RnboPqFV+VY+A+oxWEYJWE/uu3P4csj9QxdzJugLabupSeAan3MZLZ29sEoh3CdshydQsf0hahyrxQRaJpmn1A/n3EZx9qL6xwCmk7kh158M2aVbFgnEFd0o75O3OwHmg4jX6cSVn5rnQsj2zS7napM7/VYB5CvA1AcLl/ILwtHK5Qr2XyJfsHL5/TgmPZAcYewwdMxPZzffgEV/is2+GCLDaYZrEwferoD5z7lCec+3YVz9+HLT/nhy0+v4MtpBrxTh8CnLSSQuhhFqoImNx9VHr5OUxTnRtrCSnGc61Oa4lypC7wlkcB3544EvksigT9Dk9kzhybfZ5PQJIuVPuEQK2W6Git9+4TFSrfB2815g7cftsHbTRy8TWM0mTq6G4e3vQF+fCbhgReHt+9e/xVvv5WuePuPBwDcuX3z2pl08/adXw8A+A6/LLEPA0nWVQAAAABJRU5ErkJggg==",furSave="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAByCAMAAACLFKgDAAABjFBMVEVALycAAABENClEMSpEMipSQDdTQThKOTBLOTFFMyxGMyxFNCxHNi1INSxCLydEMikvLy9INC5HNS5GNS1DMilJJCTdy7nWwq7QuqSIb1/PuKLezbzMtZ9bSUDdyrfSvaj35tTRvKXUwKvYxbLax7TVwa3YxLDfzruOcmTZxrPTvqrs2snbybbTwK/byLWHbl1/YVTezLqwmIjRvavOt6Cvl4exmYnZxrTp49LLs5vs2siFbFyReWjMtJ3Sv62EZ1nq5dTIsJe1no3VwrDJsZmMcWKBY1Wtloazm4uCZFbKsprFrJPUwa+2oI+0nIy4opHLt6a8p5aLb2H05NLGsaDGrpXhz7y6pJPg2MfNuafHuanItKKkjX7Ou6mZgHKJcGDYzr7Er52OdWWGaVvs59a/qpjBrJucg3OQdWaVfG2ji3yXfm6TemqiiXqLcmKIdmvv3syfh3fw383n1sXMvK1YRj3q2Melj3/h0sHl3c2wno/n1MHYwqyok4KzopSgj4LNwLHWy7p+YFN8XlAWyauVAAAAFnRSTlP2ABTm3/76+PHPmIRgRPK5BTCPM7QH06d/BAAADDtJREFUeNrE0ctqwkAUxvFpEu+Xaiu0aMamhW4al4FyArMIZOUsh9n4Egm5ISr66j2ZgzQvMPhfns33g8OeTM5ssvLYo5p7q8nMIYkBLZZjb9iv+cOq+0NvvFzcQc50NODZqdptHtTv4ZTxwWjqEMh5cXvZocxV8LBUXh6ynvvitKDF1K1vR6WKsGniTqHVuktNHBZKHW+1O10gaDnq3UpVnC8RgBC+70dRtMberbbGcAjnhACxvpwLVd56o9cn5owH2VHlW9BSap0kSZrugWgWE8gA2KcpDup2Gba5OmaDscNmHq9UsU3xSBbhCz/C1laLMBwSpEJSui1Uxb0ZmwyzUp0BOQlx6Gf2X0YfI1KCJDirMhtO2HP/mucXKcljOKT5tBqZDIlEUl7y/Np/Zl5dqTCSuvUI4pDmw2pkIpJoRVpGoapql835LohBdjx3zY/F7qaOSEIc7PicMb4JGtDkaTnoMZovqxkTiloSiTQ0wYYzA4qFTgGMhzhG820xYzIkEgGkWsQdULL/9yCHNG/W+qOlDlZchaEwAL+FDEPJJo7gjATMrREXCrUFQ0m1BUFEXLjQ93+Ee5KjjR0qzL0z80PhCDX9+h8RTUCyovNhDdodEv3yuXt+U2NNd5F+JSWH3QMICrIe5Hi/EjwXSVYEFT2CTikuDD0zh/5MfMh9fhsGRelMQhEuLT2tQfuTKch6UOP/SLwsU57v6tF9G7mozdmGhCKs6LRfg84pLsx6UON+P9mUy2r44/mM+dnIiyLvdWVWhEtLzw+gZC7Ier6BYW7M2HLRN2AoeHnrMnWFOSr4QN21aK4oWYNek70BvcPzrD3IYf+VwFVtrygLAj33VRRFXH9kWUoz84kyF0ggMk/2uwHtk9cH0FKQ9eDp/xwSXyspL1Pvwd3+9QIEHTAVhZkjMcTBIrIVfQKl64IoRc+XDYHLArJ4ujwqdCFN3bdTaT06ZpItg4CI0nVF6XOQ9cw/8IX4fddlfkAc4jh0kNgDkKQUekaKkDK/CH15UXCuFT0Dfbzs7MbMwtCzbXAcOx+nUsh8vB7hruMk4bdNZom+lOXlNnT9McsjwcXoExTppdmd7V4+PoFwY563FES2w1xGFpK6mf8tymrq6kpw9GBJQMmrsb5mNIY7QrfhgssOTl4q8jzc2SYIN4YF6SKehqh6Gno/cMIwJFkj+CwQUnM4RNdS6loMJSD6m44TsknwKFcOwYrszjZBdmPbnjBoKwCUTadiFrcVGObgjmwtcaz+8lq3LWoDQQCA/0UgCPslpRtKTNwEs4LFiCGJC140QapW26o5306vcFC4Kly5tn+8k80Zz9IUkpObL8YNJI8zs+s0bBVjsCShjKGgA0oQiJKa5QFl5efNuBVvYK9qtoLloM0RZ92yhG6hFCpEF7e7VXWspiDhk181l/A9JwhaSMkEodHAb/Hw/dZV61nwtBgSVXmJhJL0ELIKi+ZXUirqQFfPnkD8LMoBQlkgVZJoEhIEPQs16ZakskHI6rJjuaFOn0SEdqt6QGMQKgQq4X/Fh/8ETgJeju0V0w7Tx4nmyr0UtDCr/ggVA8FvlOxyoeggABlyZTe9bn73rKitHrPWh03YNQqBBKUR3G/XcoEINx0slHqO+3l43ax9DK0bCR8b0IdDYVAuAEJvg8+i5VaKxG+tcQ66PYKEMj+rA1vIC0Idz2EsCuWCGcoAEelKN0G0pEI+kGJ7omvtzLFRtIcyQDQwQVRtGfkypL4ZOKw+GakCLhZCFkidxSC93VNQHpDyacusSQMToXBk9BDqtTlolOtgVKWBxnYjeMjFQYLh85KVc5VM6dxYkU4L54dgTMhfoHgt6Wq+zaiQC/Ruw8I+QsU4WKC2TQl+DqI4XoNbhA7iIXas5soQMuYVxyAFQXbfW628Ph09AzXGfM1ORyKUEyRX5AYuBEL9OydizJK92Ql0dz+3GIucO0g7jERxxV4N1NtYbuQ4kRuuNHYEbUXG16xNLx6J2n31tUCE6hFbHx4fDyGzLOsJxCImmrC2ZpGp2i3P7ymvVDI+c4Qf983mMHDYCcTEw7DZ3MPVSlK6l84QxqVsUFn+tR5e1+Dtyzk7lqwCHri4Hq5/yR1hYerdhnI5ELI7Ujaos6vIP5u1Wq257793E5AYHYZ86SdMSDbhI9GIosuAiLK82z18Ilkg6caybqaJ6ONuy0FrPfFM43sS4SORP7MvAiJkvK3Xv9xLWSJlIbtHUe2bF3fOtx+px5UXiPCRCLZ+4xIgXL7VNK0+h+dmbbOuk4r23/fwMdynHqdLCaF8JIJh/636YhCh7a+aKGrayuCgTNEERGmceY4jke75xoszRITZe00TQfTVV3OInnlOI1G1fQGQsYo9GqRo0yNCjhxNJ4knHYn4H9pLS1aSvC+A4aYvDxLOFl2dROee00h0gR4iSvCHOLNrTRyIwvC/yCJCblI6LYxJT6TOhRLBoY0XseoSkOBHMK0aqxVy5dVe9J/vmRljMFZ2Y8rui4gZAj6ZOWfOmzmRhYq2AitaaJAzQXBOdM6jLBECNXxWDghgsLEESWcUWyKuHXISXoyz8znKeHoMQBIpS4QvsPWSaU/4RERP5Z0be/Fj16OQEeiBm7jT0zl6RaKMhxBaNzWUtET24+iWlgICs7cTE7MZEBhvLdQ6gGw157PQCj/qZ0Rvb+n8aOYiqZHDKRFO0ZyVAgLwt00RQEMKwBoiikLXgLRgjCRiOHHIKdH+83PyKnnwgZ6eFBBaIhtfhMxSS0acxLJkclVF+s/ERTw/sHqNqGlVZO7xU6L23d1hfoiHpf4AxDuPGEKlahnc26GM5GlVRswwEleJJ+i06X6HPJb47NxsN6iy3l374aF9hzyi6DylQMD6dkkg0BexhWotVa4Df7dEXPcpgD5OFIz4au66GZE40otbHwsGyik9HIEWMutpCaBgJgEax3c1vyUjfErYYmNJmPVKzmHUZ5A9h+F5hg5aDoj6YqOeXj9DcPtLZXyNpCM3rorreq8llytMxtNE3NRsDc2MiEh7mQPC4vGCB7b9q2sZ0BGGjNycCV4BiLxq7ORQEqmV2k+rJFjJ39slzdW5PJCwREg0ql8HBDBeq5qajCkh94FBSO0xlkMqlptRwyOA983kwHquw0UgECeevPdoC0fkFQXKTFkFhXEyZLy7dh2VVyhZaXHYIIDS/I0k2ow1uABkMlYLxouuOu6f3xYFykwZSgSIu4+au2QWKkTFtPZ1QlhQ14m+XEui1QDgKyBP84f9zkv30Atxez/uiwJlpkz9eRhaUpVU8u+rer27XfmU0J5ylEnwJRCnuFbHhpXtdrziQMqUpVIo8isbC1fL4QrXEFcu+KjIGyqqrJ0DocEXDRrsduIEuSNeGEiZsstSlHFkCcV7XMsD5N4hF4BsuzOvO4NFx7Z9o2gMKVNW+RNROnHH0LKyspYHEm+Jpq5T5syHTvEsk6bsb5XFVlbW8kAuHuTroKPoPWdFgaqGMGVXCTenDiN5ILNjjxy8ShtmRYFIrdWsXClV1nJpT4dzrh2Bbv4pkCxrFHIbIzO1/waERBtOckCglQSK283r1Y5qeSCtJBCfxa3rFc/4dwHFz+pYWOe1MuKpg1H9vPhaIOps0oNzUk7aUeD/fF7zDKhYr+PQWtC1bxOhjdf2JN0qC7fJjb5svnwn0G/m7V6FQRiMwvBdCC5ZVGwgxkqgHQo6hFYCnYIQCnZy8e/+5yIEIoUzlKTgewVnEYfvyXtVpWHuI/tlUELteaqKAlXlRT+oRbg9gFogjMKp0dsB70ryEJH01d/U3bCI2ABGwVyH2xNnJwr/RHdZh0fZJpGbA7gOBk28brU9AvunB6V0+4zcGgiaMPni0ixxo84hUk28GEmYC5MvjOI4FWaexpN/4zQbkZL9Go5RHGaDnFFZixDVkhLG96WYDWJYuU0i/tm/xFcAVnrQU48oBfQU4NwM4NyAOZyb7XEu4ssZ4MsBc6Ia8GUAvP8TBN5HJvCHeyTw2WDbRjGoNprwyZoDQ2gQbcVhKY0aXJuVQNu5igbTdq5Bt+ENuiXQcaC3BDpCtwTCNk3q0XfTpAzGpkk92KZJRuGB31ZqaQLfVjo4Nt6WgTfe1oI23g7Grcmwzdt1JWLSAwTESuqQNm8Dgejg2N4uCnIL4gAAfmY+hgECfMz88AMAAE9voRRQpVFIAAAAAElFTkSuQmCC",furnbgpath="/assets/furnbg.7331c313.png",_sfc_main$3=defineComponent({__name:"FurniturnContein",props:{sp:null},setup(t){var s;const e=t;function r(n){console.log(n),n.changedTouches[0].pageX,console.log("\u89E6\u6478\u4E8B\u4EF6 \u70B9\u51FB\u4F4D\u7F6E\uFF1A","pagex:",n.changedTouches[0].pageX,"pagey",n.changedTouches[0].pageY),console.log("click"),console.log(e.sp),e.sp.setspedit(!0)}return onMounted(()=>{console.log("onMounted",e.sp)}),new URL((s=e.sp)==null?void 0:s.url,import.meta.url),(n,i)=>{var o;return openBlock(),createElementBlock("div",{class:"bg",style:normalizeStyle({backgroundImage:"url("+unref(furnbgpath)+")"})},[createBaseVNode("div",{onTouchstart:r,class:"box",style:normalizeStyle({backgroundImage:"url("+((o=e.sp)==null?void 0:o.url)+")"})},null,36)],4)}}}),FurniturnContein_vue_vue_type_style_index_0_scoped_5db462a5_lang="",FurniturnContein=_export_sfc(_sfc_main$3,[["__scopeId","data-v-5db462a5"]]);function isObject$3(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function extend$3(t={},e={}){Object.keys(e).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:isObject$3(e[r])&&isObject$3(t[r])&&Object.keys(e[r]).length>0&&extend$3(t[r],e[r])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const t=typeof document<"u"?document:{};return extend$3(t,ssrDocument),t}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function t(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function getWindow(){const t=typeof window<"u"?window:{};return extend$3(t,ssrWindow),t}function makeReactive(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(r){e.__proto__=r}})}class Dom7 extends Array{constructor(e){typeof e=="number"?super(e):(super(...e||[]),makeReactive(this))}}function arrayFlat(t=[]){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...arrayFlat(r)):e.push(r)}),e}function arrayFilter(t,e){return Array.prototype.filter.call(t,e)}function arrayUnique(t){const e=[];for(let r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function qsa(t,e){if(typeof t!="string")return[t];const r=[],s=e.querySelectorAll(t);for(let n=0;n<s.length;n+=1)r.push(s[n]);return r}function $(t,e){const r=getWindow(),s=getDocument();let n=[];if(!e&&t instanceof Dom7)return t;if(!t)return new Dom7(n);if(typeof t=="string"){const i=t.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){let o="div";i.indexOf("<li")===0&&(o="ul"),i.indexOf("<tr")===0&&(o="tbody"),(i.indexOf("<td")===0||i.indexOf("<th")===0)&&(o="tr"),i.indexOf("<tbody")===0&&(o="table"),i.indexOf("<option")===0&&(o="select");const a=s.createElement(o);a.innerHTML=i;for(let l=0;l<a.childNodes.length;l+=1)n.push(a.childNodes[l])}else n=qsa(t.trim(),e||s)}else if(t.nodeType||t===r||t===s)n.push(t);else if(Array.isArray(t)){if(t instanceof Dom7)return t;n=t}return new Dom7(arrayUnique(n))}$.fn=Dom7.prototype;function addClass(...t){const e=arrayFlat(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...e)}),this}function removeClass(...t){const e=arrayFlat(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...e)}),this}function toggleClass(...t){const e=arrayFlat(t.map(r=>r.split(" ")));this.forEach(r=>{e.forEach(s=>{r.classList.toggle(s)})})}function hasClass(...t){const e=arrayFlat(t.map(r=>r.split(" ")));return arrayFilter(this,r=>e.filter(s=>r.classList.contains(s)).length>0).length>0}function attr(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(const s in t)this[r][s]=t[s],this[r].setAttribute(s,t[s]);return this}function removeAttr(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function transform(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function transition$1(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function on(...t){let[e,r,s,n]=t;typeof t[1]=="function"&&([e,s,n]=t,r=void 0),n||(n=!1);function i(c){const u=c.target;if(!u)return;const d=c.target.dom7EventData||[];if(d.indexOf(c)<0&&d.unshift(c),$(u).is(r))s.apply(u,d);else{const f=$(u).parents();for(let m=0;m<f.length;m+=1)$(f[m]).is(r)&&s.apply(f[m],d)}}function o(c){const u=c&&c.target?c.target.dom7EventData||[]:[];u.indexOf(c)<0&&u.unshift(c),s.apply(this,u)}const a=e.split(" ");let l;for(let c=0;c<this.length;c+=1){const u=this[c];if(r)for(l=0;l<a.length;l+=1){const d=a[l];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[d]||(u.dom7LiveListeners[d]=[]),u.dom7LiveListeners[d].push({listener:s,proxyListener:i}),u.addEventListener(d,i,n)}else for(l=0;l<a.length;l+=1){const d=a[l];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[d]||(u.dom7Listeners[d]=[]),u.dom7Listeners[d].push({listener:s,proxyListener:o}),u.addEventListener(d,o,n)}}return this}function off(...t){let[e,r,s,n]=t;typeof t[1]=="function"&&([e,s,n]=t,r=void 0),n||(n=!1);const i=e.split(" ");for(let o=0;o<i.length;o+=1){const a=i[o];for(let l=0;l<this.length;l+=1){const c=this[l];let u;if(!r&&c.dom7Listeners?u=c.dom7Listeners[a]:r&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[a]),u&&u.length)for(let d=u.length-1;d>=0;d-=1){const f=u[d];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(c.removeEventListener(a,f.proxyListener,n),u.splice(d,1)):s||(c.removeEventListener(a,f.proxyListener,n),u.splice(d,1))}}}return this}function trigger(...t){const e=getWindow(),r=t[0].split(" "),s=t[1];for(let n=0;n<r.length;n+=1){const i=r[n];for(let o=0;o<this.length;o+=1){const a=this[o];if(e.CustomEvent){const l=new e.CustomEvent(i,{detail:s,bubbles:!0,cancelable:!0});a.dom7EventData=t.filter((c,u)=>u>0),a.dispatchEvent(l),a.dom7EventData=[],delete a.dom7EventData}}}return this}function transitionEnd$1(t){const e=this;function r(s){s.target===this&&(t.call(this,s),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function outerWidth(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function outerHeight(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function offset(){if(this.length>0){const t=getWindow(),e=getDocument(),r=this[0],s=r.getBoundingClientRect(),n=e.body,i=r.clientTop||n.clientTop||0,o=r.clientLeft||n.clientLeft||0,a=r===t?t.scrollY:r.scrollTop,l=r===t?t.scrollX:r.scrollLeft;return{top:s.top+a-i,left:s.left+l-o}}return null}function styles(){const t=getWindow();return this[0]?t.getComputedStyle(this[0],null):{}}function css(t,e){const r=getWindow();let s;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(s=0;s<this.length;s+=1)for(const n in t)this[s].style[n]=t[n];return this}if(arguments.length===2&&typeof t=="string"){for(s=0;s<this.length;s+=1)this[s].style[t]=e;return this}return this}function each(t){return t?(this.forEach((e,r)=>{t.apply(e,[e,r])}),this):this}function filter(t){const e=arrayFilter(this,t);return $(e)}function html(t){if(typeof t>"u")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function text(t){if(typeof t>"u")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function is(t){const e=getWindow(),r=getDocument(),s=this[0];let n,i;if(!s||typeof t>"u")return!1;if(typeof t=="string"){if(s.matches)return s.matches(t);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(t);if(s.msMatchesSelector)return s.msMatchesSelector(t);for(n=$(t),i=0;i<n.length;i+=1)if(n[i]===s)return!0;return!1}if(t===r)return s===r;if(t===e)return s===e;if(t.nodeType||t instanceof Dom7){for(n=t.nodeType?[t]:t,i=0;i<n.length;i+=1)if(n[i]===s)return!0;return!1}return!1}function index$6(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function eq(t){if(typeof t>"u")return this;const e=this.length;if(t>e-1)return $([]);if(t<0){const r=e+t;return r<0?$([]):$([this[r]])}return $([this[t]])}function append(...t){let e;const r=getDocument();for(let s=0;s<t.length;s+=1){e=t[s];for(let n=0;n<this.length;n+=1)if(typeof e=="string"){const i=r.createElement("div");for(i.innerHTML=e;i.firstChild;)this[n].appendChild(i.firstChild)}else if(e instanceof Dom7)for(let i=0;i<e.length;i+=1)this[n].appendChild(e[i]);else this[n].appendChild(e)}return this}function prepend(t){const e=getDocument();let r,s;for(r=0;r<this.length;r+=1)if(typeof t=="string"){const n=e.createElement("div");for(n.innerHTML=t,s=n.childNodes.length-1;s>=0;s-=1)this[r].insertBefore(n.childNodes[s],this[r].childNodes[0])}else if(t instanceof Dom7)for(s=0;s<t.length;s+=1)this[r].insertBefore(t[s],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function next(t){return this.length>0?t?this[0].nextElementSibling&&$(this[0].nextElementSibling).is(t)?$([this[0].nextElementSibling]):$([]):this[0].nextElementSibling?$([this[0].nextElementSibling]):$([]):$([])}function nextAll(t){const e=[];let r=this[0];if(!r)return $([]);for(;r.nextElementSibling;){const s=r.nextElementSibling;t?$(s).is(t)&&e.push(s):e.push(s),r=s}return $(e)}function prev(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&$(e.previousElementSibling).is(t)?$([e.previousElementSibling]):$([]):e.previousElementSibling?$([e.previousElementSibling]):$([])}return $([])}function prevAll(t){const e=[];let r=this[0];if(!r)return $([]);for(;r.previousElementSibling;){const s=r.previousElementSibling;t?$(s).is(t)&&e.push(s):e.push(s),r=s}return $(e)}function parent(t){const e=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?$(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return $(e)}function parents(t){const e=[];for(let r=0;r<this.length;r+=1){let s=this[r].parentNode;for(;s;)t?$(s).is(t)&&e.push(s):e.push(s),s=s.parentNode}return $(e)}function closest(t){let e=this;return typeof t>"u"?$([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function find(t){const e=[];for(let r=0;r<this.length;r+=1){const s=this[r].querySelectorAll(t);for(let n=0;n<s.length;n+=1)e.push(s[n])}return $(e)}function children(t){const e=[];for(let r=0;r<this.length;r+=1){const s=this[r].children;for(let n=0;n<s.length;n+=1)(!t||$(s[n]).is(t))&&e.push(s[n])}return $(e)}function remove(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const Methods={addClass,removeClass,hasClass,toggleClass,attr,removeAttr,transform,transition:transition$1,on,off,trigger,transitionEnd:transitionEnd$1,outerWidth,outerHeight,styles,offset,css,each,html,text,is,index:index$6,eq,append,prepend,next,nextAll,prev,prevAll,parent,parents,closest,find,children,filter,remove};Object.keys(Methods).forEach(t=>{Object.defineProperty($.fn,t,{value:Methods[t],writable:!0})});function deleteProps(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function nextTick(t,e=0){return setTimeout(t,e)}function now(){return Date.now()}function getComputedStyle$1(t){const e=getWindow();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function getTranslate(t,e="x"){const r=getWindow();let s,n,i;const o=getComputedStyle$1(t);return r.WebKitCSSMatrix?(n=o.transform||o.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(a=>a.replace(",",".")).join(", ")),i=new r.WebKitCSSMatrix(n==="none"?"":n)):(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=i.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?n=i.m41:s.length===16?n=parseFloat(s[12]):n=parseFloat(s[4])),e==="y"&&(r.WebKitCSSMatrix?n=i.m42:s.length===16?n=parseFloat(s[13]):n=parseFloat(s[5])),n||0}function isObject$2(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function isNode(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function extend$2(...t){const e=Object(t[0]),r=["__proto__","constructor","prototype"];for(let s=1;s<t.length;s+=1){const n=t[s];if(n!=null&&!isNode(n)){const i=Object.keys(Object(n)).filter(o=>r.indexOf(o)<0);for(let o=0,a=i.length;o<a;o+=1){const l=i[o],c=Object.getOwnPropertyDescriptor(n,l);c!==void 0&&c.enumerable&&(isObject$2(e[l])&&isObject$2(n[l])?n[l].__swiper__?e[l]=n[l]:extend$2(e[l],n[l]):!isObject$2(e[l])&&isObject$2(n[l])?(e[l]={},n[l].__swiper__?e[l]=n[l]:extend$2(e[l],n[l])):e[l]=n[l])}}}return e}function setCSSProperty(t,e,r){t.style.setProperty(e,r)}function animateCSSModeScroll({swiper:t,targetPosition:e,side:r}){const s=getWindow(),n=-t.translate;let i=null,o;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(t.cssModeFrameID);const l=e>n?"next":"prev",c=(d,f)=>l==="next"&&d>=f||l==="prev"&&d<=f,u=()=>{o=new Date().getTime(),i===null&&(i=o);const d=Math.max(Math.min((o-i)/a,1),0),f=.5-Math.cos(d*Math.PI)/2;let m=n+f*(e-n);if(c(m,e)&&(m=e),t.wrapperEl.scrollTo({[r]:m}),c(m,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:m})}),s.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=s.requestAnimationFrame(u)};u()}let support;function calcSupport(){const t=getWindow(),e=getDocument();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let s=!1;try{const n=Object.defineProperty({},"passive",{get(){s=!0}});t.addEventListener("testPassiveListener",null,n)}catch{}return s}(),gestures:function(){return"ongesturestart"in t}()}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:t}={}){const e=getSupport(),r=getWindow(),s=r.navigator.platform,n=t||r.navigator.userAgent,i={ios:!1,android:!1},o=r.screen.width,a=r.screen.height,l=n.match(/(Android);?[\s\/]+([\d.]+)?/);let c=n.match(/(iPad).*OS\s([\d_]+)/);const u=n.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=s==="Win32";let m=s==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&m&&e.touch&&g.indexOf(`${o}x${a}`)>=0&&(c=n.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),m=!1),l&&!f&&(i.os="android",i.android=!0),(c||d||u)&&(i.os="ios",i.ios=!0),i}function getDevice(t={}){return deviceCached||(deviceCached=calcDevice(t)),deviceCached}let browser;function calcBrowser(){const t=getWindow();function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize({swiper:t,on:e,emit:r}){const s=getWindow();let n=null,i=null;const o=()=>{!t||t.destroyed||!t.initialized||(r("beforeResize"),r("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(n=new ResizeObserver(u=>{i=s.requestAnimationFrame(()=>{const{width:d,height:f}=t;let m=d,g=f;u.forEach(({contentBoxSize:y,contentRect:b,target:x})=>{x&&x!==t.el||(m=b?b.width:(y[0]||y).inlineSize,g=b?b.height:(y[0]||y).blockSize)}),(m!==d||g!==f)&&o()})}),n.observe(t.el))},l=()=>{i&&s.cancelAnimationFrame(i),n&&n.unobserve&&t.el&&(n.unobserve(t.el),n=null)},c=()=>{!t||t.destroyed||!t.initialized||r("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof s.ResizeObserver<"u"){a();return}s.addEventListener("resize",o),s.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),s.removeEventListener("resize",o),s.removeEventListener("orientationchange",c)})}function Observer({swiper:t,extendParams:e,on:r,emit:s}){const n=[],i=getWindow(),o=(c,u={})=>{const d=i.MutationObserver||i.WebkitMutationObserver,f=new d(m=>{if(m.length===1){s("observerUpdate",m[0]);return}const g=function(){s("observerUpdate",m[0])};i.requestAnimationFrame?i.requestAnimationFrame(g):i.setTimeout(g,0)});f.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),n.push(f)},a=()=>{if(!!t.params.observer){if(t.params.observeParents){const c=t.$el.parents();for(let u=0;u<c.length;u+=1)o(c[u])}o(t.$el[0],{childList:t.params.observeSlideChildren}),o(t.$wrapperEl[0],{attributes:!1})}},l=()=>{n.forEach(c=>{c.disconnect()}),n.splice(0,n.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",a),r("destroy",l)}const eventsEmitter={on(t,e,r){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const n=r?"unshift":"push";return t.split(" ").forEach(i=>{s.eventsListeners[i]||(s.eventsListeners[i]=[]),s.eventsListeners[i][n](e)}),s},once(t,e,r){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function n(...i){s.off(t,n),n.__emitterProxy&&delete n.__emitterProxy,e.apply(s,i)}return n.__emitterProxy=e,s.on(t,n,r)},onAny(t,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const s=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[s](t),r},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||t.split(" ").forEach(s=>{typeof e>"u"?r.eventsListeners[s]=[]:r.eventsListeners[s]&&r.eventsListeners[s].forEach((n,i)=>{(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&r.eventsListeners[s].splice(i,1)})}),r},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let r,s,n;return typeof t[0]=="string"||Array.isArray(t[0])?(r=t[0],s=t.slice(1,t.length),n=e):(r=t[0].events,s=t[0].data,n=t[0].context||e),s.unshift(n),(Array.isArray(r)?r:r.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(n,[o,...s])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(n,s)})}),e}};function updateSize(){const t=this;let e,r;const s=t.$el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=s[0].clientWidth,typeof t.params.height<"u"&&t.params.height!==null?r=t.params.height:r=s[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(s.css("padding-left")||0,10)-parseInt(s.css("padding-right")||0,10),r=r-parseInt(s.css("padding-top")||0,10)-parseInt(s.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function updateSlides(){const t=this;function e(F){return t.isHorizontal()?F:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[F]}function r(F,O){return parseFloat(F.getPropertyValue(e(O))||0)}const s=t.params,{$wrapperEl:n,size:i,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&s.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=n.children(`.${t.params.slideClass}`),d=l?t.virtual.slides.length:u.length;let f=[];const m=[],g=[];let y=s.slidesOffsetBefore;typeof y=="function"&&(y=s.slidesOffsetBefore.call(t));let b=s.slidesOffsetAfter;typeof b=="function"&&(b=s.slidesOffsetAfter.call(t));const x=t.snapGrid.length,_=t.slidesGrid.length;let w=s.spaceBetween,v=-y,S=0,M=0;if(typeof i>"u")return;typeof w=="string"&&w.indexOf("%")>=0&&(w=parseFloat(w.replace("%",""))/100*i),t.virtualSize=-w,o?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),s.centeredSlides&&s.cssMode&&(setCSSProperty(t.wrapperEl,"--swiper-centered-offset-before",""),setCSSProperty(t.wrapperEl,"--swiper-centered-offset-after",""));const C=s.grid&&s.grid.rows>1&&t.grid;C&&t.grid.initSlides(d);let A;const X=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(F=>typeof s.breakpoints[F].slidesPerView<"u").length>0;for(let F=0;F<d;F+=1){A=0;const O=u.eq(F);if(C&&t.grid.updateSlide(F,O,d,e),O.css("display")!=="none"){if(s.slidesPerView==="auto"){X&&(u[F].style[e("width")]="");const U=getComputedStyle(O[0]),k=O[0].style.transform,B=O[0].style.webkitTransform;if(k&&(O[0].style.transform="none"),B&&(O[0].style.webkitTransform="none"),s.roundLengths)A=t.isHorizontal()?O.outerWidth(!0):O.outerHeight(!0);else{const ie=r(U,"width"),te=r(U,"padding-left"),N=r(U,"padding-right"),Q=r(U,"margin-left"),ce=r(U,"margin-right"),L=U.getPropertyValue("box-sizing");if(L&&L==="border-box")A=ie+Q+ce;else{const{clientWidth:Z,offsetWidth:ne}=O[0];A=ie+te+N+Q+ce+(ne-Z)}}k&&(O[0].style.transform=k),B&&(O[0].style.webkitTransform=B),s.roundLengths&&(A=Math.floor(A))}else A=(i-(s.slidesPerView-1)*w)/s.slidesPerView,s.roundLengths&&(A=Math.floor(A)),u[F]&&(u[F].style[e("width")]=`${A}px`);u[F]&&(u[F].swiperSlideSize=A),g.push(A),s.centeredSlides?(v=v+A/2+S/2+w,S===0&&F!==0&&(v=v-i/2-w),F===0&&(v=v-i/2-w),Math.abs(v)<1/1e3&&(v=0),s.roundLengths&&(v=Math.floor(v)),M%s.slidesPerGroup===0&&f.push(v),m.push(v)):(s.roundLengths&&(v=Math.floor(v)),(M-Math.min(t.params.slidesPerGroupSkip,M))%t.params.slidesPerGroup===0&&f.push(v),m.push(v),v=v+A+w),t.virtualSize+=A+w,S=A,M+=1}}if(t.virtualSize=Math.max(t.virtualSize,i)+b,o&&a&&(s.effect==="slide"||s.effect==="coverflow")&&n.css({width:`${t.virtualSize+s.spaceBetween}px`}),s.setWrapperSize&&n.css({[e("width")]:`${t.virtualSize+s.spaceBetween}px`}),C&&t.grid.updateWrapperSize(A,f,e),!s.centeredSlides){const F=[];for(let O=0;O<f.length;O+=1){let U=f[O];s.roundLengths&&(U=Math.floor(U)),f[O]<=t.virtualSize-i&&F.push(U)}f=F,Math.floor(t.virtualSize-i)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-i)}if(f.length===0&&(f=[0]),s.spaceBetween!==0){const F=t.isHorizontal()&&o?"marginLeft":e("marginRight");u.filter((O,U)=>s.cssMode?U!==u.length-1:!0).css({[F]:`${w}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let F=0;g.forEach(U=>{F+=U+(s.spaceBetween?s.spaceBetween:0)}),F-=s.spaceBetween;const O=F-i;f=f.map(U=>U<0?-y:U>O?O+b:U)}if(s.centerInsufficientSlides){let F=0;if(g.forEach(O=>{F+=O+(s.spaceBetween?s.spaceBetween:0)}),F-=s.spaceBetween,F<i){const O=(i-F)/2;f.forEach((U,k)=>{f[k]=U-O}),m.forEach((U,k)=>{m[k]=U+O})}}if(Object.assign(t,{slides:u,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){setCSSProperty(t.wrapperEl,"--swiper-centered-offset-before",`${-f[0]}px`),setCSSProperty(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-g[g.length-1]/2}px`);const F=-t.snapGrid[0],O=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(U=>U+F),t.slidesGrid=t.slidesGrid.map(U=>U+O)}if(d!==c&&t.emit("slidesLengthChange"),f.length!==x&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==_&&t.emit("slidesGridLengthChange"),s.watchSlidesProgress&&t.updateSlidesOffset(),!l&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const F=`${s.containerModifierClass}backface-hidden`,O=t.$el.hasClass(F);d<=s.maxBackfaceHiddenSlides?O||t.$el.addClass(F):O&&t.$el.removeClass(F)}}function updateAutoHeight(t){const e=this,r=[],s=e.virtual&&e.params.virtual.enabled;let n=0,i;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>s?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides.eq(a)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||$([])).each(a=>{r.push(a)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const a=e.activeIndex+i;if(a>e.slides.length&&!s)break;r.push(o(a))}else r.push(o(e.activeIndex));for(i=0;i<r.length;i+=1)if(typeof r[i]<"u"){const a=r[i].offsetHeight;n=a>n?a:n}(n||n===0)&&e.$wrapperEl.css("height",`${n}px`)}function updateSlidesOffset(){const t=this,e=t.slides;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function updateSlidesProgress(t=this&&this.translate||0){const e=this,r=e.params,{slides:s,rtlTranslate:n,snapGrid:i}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;n&&(o=t),s.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<s.length;a+=1){const l=s[a];let c=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(c-=s[0].swiperSlideOffset);const u=(o+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),d=(o-i[0]+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),f=-(o-c),m=f+e.slidesSizesGrid[a];(f>=0&&f<e.size-1||m>1&&m<=e.size||f<=0&&m>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),s.eq(a).addClass(r.slideVisibleClass)),l.progress=n?-u:u,l.originalProgress=n?-d:d}e.visibleSlides=$(e.visibleSlides)}function updateProgress(t){const e=this;if(typeof t>"u"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const r=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:n,isBeginning:i,isEnd:o}=e;const a=i,l=o;s===0?(n=0,i=!0,o=!0):(n=(t-e.minTranslate())/s,i=n<=0,o=n>=1),Object.assign(e,{progress:n,isBeginning:i,isEnd:o}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),i&&!a&&e.emit("reachBeginning toEdge"),o&&!l&&e.emit("reachEnd toEdge"),(a&&!i||l&&!o)&&e.emit("fromEdge"),e.emit("progress",n)}function updateSlidesClasses(){const t=this,{slides:e,params:r,$wrapperEl:s,activeIndex:n,realIndex:i}=t,o=t.virtual&&r.virtual.enabled;e.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let a;o?a=t.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${n}"]`):a=e.eq(n),a.addClass(r.slideActiveClass),r.loop&&(a.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${i}"]`).addClass(r.slideDuplicateActiveClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${i}"]`).addClass(r.slideDuplicateActiveClass));let l=a.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=e.eq(0),l.addClass(r.slideNextClass));let c=a.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&c.length===0&&(c=e.eq(-1),c.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function updateActiveIndex(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:s,snapGrid:n,params:i,activeIndex:o,realIndex:a,snapIndex:l}=e;let c=t,u;if(typeof c>"u"){for(let f=0;f<s.length;f+=1)typeof s[f+1]<"u"?r>=s[f]&&r<s[f+1]-(s[f+1]-s[f])/2?c=f:r>=s[f]&&r<s[f+1]&&(c=f+1):r>=s[f]&&(c=f);i.normalizeSlideIndex&&(c<0||typeof c>"u")&&(c=0)}if(n.indexOf(r)>=0)u=n.indexOf(r);else{const f=Math.min(i.slidesPerGroupSkip,c);u=f+Math.floor((c-f)/i.slidesPerGroup)}if(u>=n.length&&(u=n.length-1),c===o){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}const d=parseInt(e.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(e,{snapIndex:u,realIndex:d,previousIndex:o,activeIndex:c}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function updateClickedSlide(t){const e=this,r=e.params,s=$(t).closest(`.${r.slideClass}`)[0];let n=!1,i;if(s){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===s){n=!0,i=o;break}}if(s&&n)e.clickedSlide=s,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt($(s).attr("data-swiper-slide-index"),10):e.clickedIndex=i;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(t=this.isHorizontal()?"x":"y"){const e=this,{params:r,rtlTranslate:s,translate:n,$wrapperEl:i}=e;if(r.virtualTranslate)return s?-n:n;if(r.cssMode)return n;let o=getTranslate(i[0],t);return s&&(o=-o),o||0}function setTranslate(t,e){const r=this,{rtlTranslate:s,params:n,$wrapperEl:i,wrapperEl:o,progress:a}=r;let l=0,c=0;const u=0;r.isHorizontal()?l=s?-t:t:c=t,n.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.cssMode?o[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-c:n.virtualTranslate||i.transform(`translate3d(${l}px, ${c}px, ${u}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:c;let d;const f=r.maxTranslate()-r.minTranslate();f===0?d=0:d=(t-r.minTranslate())/f,d!==a&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(t=0,e=this.params.speed,r=!0,s=!0,n){const i=this,{params:o,wrapperEl:a}=i;if(i.animating&&o.preventInteractionOnTransition)return!1;const l=i.minTranslate(),c=i.maxTranslate();let u;if(s&&t>l?u=l:s&&t<c?u=c:u=t,i.updateProgress(u),o.cssMode){const d=i.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!i.support.smoothScroll)return animateCSSModeScroll({swiper:i,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(u),r&&(i.emit("beforeTransitionStart",e,n),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(u),r&&(i.emit("beforeTransitionStart",e,n),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(f){!i||i.destroyed||f.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,r&&i.emit("transitionEnd"))}),i.$wrapperEl[0].addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd))),!0}const translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(t,e){const r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function transitionEmit({swiper:t,runCallbacks:e,direction:r,step:s}){const{activeIndex:n,previousIndex:i}=t;let o=r;if(o||(n>i?o="next":n<i?o="prev":o="reset"),t.emit(`transition${s}`),e&&n!==i){if(o==="reset"){t.emit(`slideResetTransition${s}`);return}t.emit(`slideChangeTransition${s}`),o==="next"?t.emit(`slideNextTransition${s}`):t.emit(`slidePrevTransition${s}`)}}function transitionStart(t=!0,e){const r=this,{params:s}=r;s.cssMode||(s.autoHeight&&r.updateAutoHeight(),transitionEmit({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function transitionEnd(t=!0,e){const r=this,{params:s}=r;r.animating=!1,!s.cssMode&&(r.setTransition(0),transitionEmit({swiper:r,runCallbacks:t,direction:e,step:"End"}))}const transition={setTransition,transitionStart,transitionEnd};function slideTo(t=0,e=this.params.speed,r=!0,s,n){if(typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const w=parseInt(t,10);if(!isFinite(w))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=w}const i=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:f,wrapperEl:m,enabled:g}=i;if(i.animating&&a.preventInteractionOnTransition||!g&&!s&&!n)return!1;const y=Math.min(i.params.slidesPerGroupSkip,o);let b=y+Math.floor((o-y)/i.params.slidesPerGroup);b>=l.length&&(b=l.length-1);const x=-l[b];if(a.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const v=-Math.floor(x*100),S=Math.floor(c[w]*100),M=Math.floor(c[w+1]*100);typeof c[w+1]<"u"?v>=S&&v<M-(M-S)/2?o=w:v>=S&&v<M&&(o=w+1):v>=S&&(o=w)}if(i.initialized&&o!==d&&(!i.allowSlideNext&&x<i.translate&&x<i.minTranslate()||!i.allowSlidePrev&&x>i.translate&&x>i.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&r&&i.emit("beforeSlideChangeStart"),i.updateProgress(x);let _;if(o>d?_="next":o<d?_="prev":_="reset",f&&-x===i.translate||!f&&x===i.translate)return i.updateActiveIndex(o),a.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),a.effect!=="slide"&&i.setTranslate(x),_!=="reset"&&(i.transitionStart(r,_),i.transitionEnd(r,_)),!1;if(a.cssMode){const w=i.isHorizontal(),v=f?x:-x;if(e===0){const S=i.virtual&&i.params.virtual.enabled;S&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),m[w?"scrollLeft":"scrollTop"]=v,S&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._swiperImmediateVirtual=!1})}else{if(!i.support.smoothScroll)return animateCSSModeScroll({swiper:i,targetPosition:v,side:w?"left":"top"}),!0;m.scrollTo({[w?"left":"top"]:v,behavior:"smooth"})}return!0}return i.setTransition(e),i.setTranslate(x),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,s),i.transitionStart(r,_),e===0?i.transitionEnd(r,_):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(v){!i||i.destroyed||v.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(r,_))}),i.$wrapperEl[0].addEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(t=0,e=this.params.speed,r=!0,s){if(typeof t=="string"){const o=parseInt(t,10);if(!isFinite(o))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=o}const n=this;let i=t;return n.params.loop&&(i+=n.loopedSlides),n.slideTo(i,e,r,s)}function slideNext(t=this.params.speed,e=!0,r){const s=this,{animating:n,enabled:i,params:o}=s;if(!i)return s;let a=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(a=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<o.slidesPerGroupSkip?1:a;if(o.loop){if(n&&o.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}return o.rewind&&s.isEnd?s.slideTo(0,t,e,r):s.slideTo(s.activeIndex+l,t,e,r)}function slidePrev(t=this.params.speed,e=!0,r){const s=this,{params:n,animating:i,snapGrid:o,slidesGrid:a,rtlTranslate:l,enabled:c}=s;if(!c)return s;if(n.loop){if(i&&n.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}const u=l?s.translate:-s.translate;function d(b){return b<0?-Math.floor(Math.abs(b)):Math.floor(b)}const f=d(u),m=o.map(b=>d(b));let g=o[m.indexOf(f)-1];if(typeof g>"u"&&n.cssMode){let b;o.forEach((x,_)=>{f>=x&&(b=_)}),typeof b<"u"&&(g=o[b>0?b-1:b])}let y=0;if(typeof g<"u"&&(y=a.indexOf(g),y<0&&(y=s.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(y=y-s.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),n.rewind&&s.isBeginning){const b=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(b,t,e,r)}return s.slideTo(y,t,e,r)}function slideReset(t=this.params.speed,e=!0,r){const s=this;return s.slideTo(s.activeIndex,t,e,r)}function slideToClosest(t=this.params.speed,e=!0,r,s=.5){const n=this;let i=n.activeIndex;const o=Math.min(n.params.slidesPerGroupSkip,i),a=o+Math.floor((i-o)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[a]){const c=n.snapGrid[a],u=n.snapGrid[a+1];l-c>(u-c)*s&&(i+=n.params.slidesPerGroup)}else{const c=n.snapGrid[a-1],u=n.snapGrid[a];l-c<=(u-c)*s&&(i-=n.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,n.slidesGrid.length-1),n.slideTo(i,t,e,r)}function slideToClickedSlide(){const t=this,{params:e,$wrapperEl:r}=t,s=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let n=t.clickedIndex,i;if(e.loop){if(t.animating)return;i=parseInt($(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?n<t.loopedSlides-s/2||n>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),n=r.children(`.${e.slideClass}[data-swiper-slide-index="${i}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{t.slideTo(n)})):t.slideTo(n):n>t.slides.length-s?(t.loopFix(),n=r.children(`.${e.slideClass}[data-swiper-slide-index="${i}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),nextTick(()=>{t.slideTo(n)})):t.slideTo(n)}else t.slideTo(n)}const slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(){const t=this,e=getDocument(),{params:r,$wrapperEl:s}=t,n=s.children().length>0?$(s.children()[0].parentNode):s;n.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let i=n.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-i.length%r.slidesPerGroup;if(l!==r.slidesPerGroup){for(let c=0;c<l;c+=1){const u=$(e.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);n.append(u)}i=n.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=i.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>i.length&&t.params.loopedSlidesLimit&&(t.loopedSlides=i.length);const o=[],a=[];i.each((l,c)=>{$(l).attr("data-swiper-slide-index",c)});for(let l=0;l<t.loopedSlides;l+=1){const c=l-Math.floor(l/i.length)*i.length;a.push(i.eq(c)[0]),o.unshift(i.eq(i.length-c-1)[0])}for(let l=0;l<a.length;l+=1)n.append($(a[l].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let l=o.length-1;l>=0;l-=1)n.prepend($(o[l].cloneNode(!0)).addClass(r.slideDuplicateClass))}function loopFix(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:r,loopedSlides:s,allowSlidePrev:n,allowSlideNext:i,snapGrid:o,rtlTranslate:a}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const u=-o[e]-t.getTranslate();e<s?(l=r.length-s*3+e,l+=s,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((a?-t.translate:t.translate)-u)):e>=r.length-s&&(l=-r.length+e+s,l+=s,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((a?-t.translate:t.translate)-u)),t.allowSlidePrev=n,t.allowSlideNext=i,t.emit("loopFix")}function loopDestroy(){const t=this,{$wrapperEl:e,params:r,slides:s}=t;e.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),s.removeAttr("data-swiper-slide-index")}const loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;r.style.cursor="move",r.style.cursor=t?"grabbing":"grab"}function unsetGrabCursor(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}const grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(t,e=this){function r(s){if(!s||s===getDocument()||s===getWindow())return null;s.assignedSlot&&(s=s.assignedSlot);const n=s.closest(t);return!n&&!s.getRootNode?null:n||r(s.getRootNode().host)}return r(e)}function onTouchStart(t){const e=this,r=getDocument(),s=getWindow(),n=e.touchEventsData,{params:i,touches:o,enabled:a}=e;if(!a||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=$(l.target);if(i.touchEventsTarget==="wrapper"&&!c.closest(e.wrapperEl).length||(n.isTouchEvent=l.type==="touchstart",!n.isTouchEvent&&"which"in l&&l.which===3)||!n.isTouchEvent&&"button"in l&&l.button>0||n.isTouched&&n.isMoved)return;const u=!!i.noSwipingClass&&i.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=$(d[0]));const f=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,m=!!(l.target&&l.target.shadowRoot);if(i.noSwiping&&(m?closestElement(f,c[0]):c.closest(f)[0])){e.allowClick=!0;return}if(i.swipeHandler&&!c.closest(i.swipeHandler)[0])return;o.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,o.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;const g=o.currentX,y=o.currentY,b=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,x=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(b&&(g<=x||g>=s.innerWidth-x))if(b==="prevent")t.preventDefault();else return;if(Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=g,o.startY=y,n.touchStartTime=now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(n.allowThresholdMove=!1),l.type!=="touchstart"){let _=!0;c.is(n.focusableElements)&&(_=!1,c[0].nodeName==="SELECT"&&(n.isTouched=!1)),r.activeElement&&$(r.activeElement).is(n.focusableElements)&&r.activeElement!==c[0]&&r.activeElement.blur();const w=_&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||w)&&!c[0].isContentEditable&&l.preventDefault()}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function onTouchMove(t){const e=getDocument(),r=this,s=r.touchEventsData,{params:n,touches:i,rtlTranslate:o,enabled:a}=r;if(!a)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!s.isTouched){s.startMoving&&s.isScrolling&&r.emit("touchMoveOpposite",l);return}if(s.isTouchEvent&&l.type!=="touchmove")return;const c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u=l.type==="touchmove"?c.pageX:l.pageX,d=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){i.startX=u,i.startY=d;return}if(!r.allowTouchMove){$(l.target).is(s.focusableElements)||(r.allowClick=!1),s.isTouched&&(Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d}),s.touchStartTime=now());return}if(s.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop){if(r.isVertical()){if(d<i.startY&&r.translate<=r.maxTranslate()||d>i.startY&&r.translate>=r.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(u<i.startX&&r.translate<=r.maxTranslate()||u>i.startX&&r.translate>=r.minTranslate())return}if(s.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&$(l.target).is(s.focusableElements)){s.isMoved=!0,r.allowClick=!1;return}if(s.allowTouchCallbacks&&r.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;i.currentX=u,i.currentY=d;const f=i.currentX-i.startX,m=i.currentY-i.startY;if(r.params.threshold&&Math.sqrt(f**2+m**2)<r.params.threshold)return;if(typeof s.isScrolling>"u"){let x;r.isHorizontal()&&i.currentY===i.startY||r.isVertical()&&i.currentX===i.startX?s.isScrolling=!1:f*f+m*m>=25&&(x=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,s.isScrolling=r.isHorizontal()?x>n.touchAngle:90-x>n.touchAngle)}if(s.isScrolling&&r.emit("touchMoveOpposite",l),typeof s.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(s.startMoving=!0),s.isScrolling){s.isTouched=!1;return}if(!s.startMoving)return;r.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),s.isMoved||(n.loop&&!n.cssMode&&r.loopFix(),s.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),s.allowMomentumBounce=!1,n.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),s.isMoved=!0;let g=r.isHorizontal()?f:m;i.diff=g,g*=n.touchRatio,o&&(g=-g),r.swipeDirection=g>0?"prev":"next",s.currentTranslate=g+s.startTranslate;let y=!0,b=n.resistanceRatio;if(n.touchReleaseOnEdges&&(b=0),g>0&&s.currentTranslate>r.minTranslate()?(y=!1,n.resistance&&(s.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+s.startTranslate+g)**b)):g<0&&s.currentTranslate<r.maxTranslate()&&(y=!1,n.resistance&&(s.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-s.startTranslate-g)**b)),y&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(s.currentTranslate=s.startTranslate),n.threshold>0)if(Math.abs(g)>n.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,s.currentTranslate=s.startTranslate,i.diff=r.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{s.currentTranslate=s.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&r.freeMode||n.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&n.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(s.currentTranslate),r.setTranslate(s.currentTranslate))}function onTouchEnd(t){const e=this,r=e.touchEventsData,{params:s,touches:n,rtlTranslate:i,slidesGrid:o,enabled:a}=e;if(!a)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",l),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&s.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}s.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=now(),u=c-r.touchStartTime;if(e.allowClick){const _=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(_&&_[0]||l.target),e.emit("tap click",l),u<300&&c-r.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(r.lastClickTime=now(),nextTick(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||n.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let d;if(s.followFinger?d=i?e.translate:-e.translate:d=-r.currentTranslate,s.cssMode)return;if(e.params.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}let f=0,m=e.slidesSizesGrid[0];for(let _=0;_<o.length;_+=_<s.slidesPerGroupSkip?1:s.slidesPerGroup){const w=_<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof o[_+w]<"u"?d>=o[_]&&d<o[_+w]&&(f=_,m=o[_+w]-o[_]):d>=o[_]&&(f=_,m=o[o.length-1]-o[o.length-2])}let g=null,y=null;s.rewind&&(e.isBeginning?y=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const b=(d-o[f])/m,x=f<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(u>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(b>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?g:f+x):e.slideTo(f)),e.swipeDirection==="prev"&&(b>1-s.longSwipesRatio?e.slideTo(f+x):y!==null&&b<0&&Math.abs(b)>s.longSwipesRatio?e.slideTo(y):e.slideTo(f))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(f+x):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:f+x),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:f))}}function onResize(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:n,snapGrid:i}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=n,t.allowSlideNext=s,t.params.watchOverflow&&i!==t.snapGrid&&t.checkOverflow()}function onClick(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function onScroll(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:s}=t;if(!s)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let n;const i=t.maxTranslate()-t.minTranslate();i===0?n=0:n=(t.translate-t.minTranslate())/i,n!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let dummyEventAttached=!1;function dummyEventListener(){}const events=(t,e)=>{const r=getDocument(),{params:s,touchEvents:n,el:i,wrapperEl:o,device:a,support:l}=t,c=!!s.nested,u=e==="on"?"addEventListener":"removeEventListener",d=e;if(!l.touch)i[u](n.start,t.onTouchStart,!1),r[u](n.move,t.onTouchMove,c),r[u](n.end,t.onTouchEnd,!1);else{const f=n.start==="touchstart"&&l.passiveListener&&s.passiveListeners?{passive:!0,capture:!1}:!1;i[u](n.start,t.onTouchStart,f),i[u](n.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),i[u](n.end,t.onTouchEnd,f),n.cancel&&i[u](n.cancel,t.onTouchEnd,f)}(s.preventClicks||s.preventClicksPropagation)&&i[u]("click",t.onClick,!0),s.cssMode&&o[u]("scroll",t.onScroll),s.updateOnWindowResize?t[d](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):t[d]("observerUpdate",onResize,!0)};function attachEvents(){const t=this,e=getDocument(),{params:r,support:s}=t;t.onTouchStart=onTouchStart.bind(t),t.onTouchMove=onTouchMove.bind(t),t.onTouchEnd=onTouchEnd.bind(t),r.cssMode&&(t.onScroll=onScroll.bind(t)),t.onClick=onClick.bind(t),s.touch&&!dummyEventAttached&&(e.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(t,"on")}function detachEvents(){events(this,"off")}const events$1={attachEvents,detachEvents},isGridEnabled=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function setBreakpoint(){const t=this,{activeIndex:e,initialized:r,loopedSlides:s=0,params:n,$el:i}=t,o=n.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const c=(a in o?o[a]:void 0)||t.originalParams,u=isGridEnabled(t,n),d=isGridEnabled(t,c),f=n.enabled;u&&!d?(i.removeClass(`${n.containerModifierClass}grid ${n.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(i.addClass(`${n.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&n.grid.fill==="column")&&i.addClass(`${n.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(b=>{const x=n[b]&&n[b].enabled,_=c[b]&&c[b].enabled;x&&!_&&t[b].disable(),!x&&_&&t[b].enable()});const m=c.direction&&c.direction!==n.direction,g=n.loop&&(c.slidesPerView!==n.slidesPerView||m);m&&r&&t.changeDirection(),extend$2(t.params,c);const y=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),f&&!y?t.disable():!f&&y&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",c),g&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-s+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}function getBreakpoint(t,e="window",r){if(!t||e==="container"&&!r)return;let s=!1;const n=getWindow(),i=e==="window"?n.innerHeight:r.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:i*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(s=l):c<=r.clientWidth&&(s=l)}return s||"max"}const breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(t,e){const r=[];return t.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(n=>{s[n]&&r.push(e+n)}):typeof s=="string"&&r.push(e+s)}),r}function addClasses(){const t=this,{classNames:e,params:r,rtl:s,$el:n,device:i,support:o}=t,a=prepareClasses(["initialized",r.direction,{"pointer-events":!o.touch},{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:s},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);e.push(...a),n.addClass([...e].join(" ")),t.emitContainerClasses()}function removeClasses(){const t=this,{$el:e,classNames:r}=t;e.removeClass(r.join(" ")),t.emitContainerClasses()}const classes={addClasses,removeClasses};function loadImage(t,e,r,s,n,i){const o=getWindow();let a;function l(){i&&i()}!$(t).parent("picture")[0]&&(!t.complete||!n)&&e?(a=new o.Image,a.onload=l,a.onerror=l,s&&(a.sizes=s),r&&(a.srcset=r),e&&(a.src=e)):l()}function preloadImages(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t>"u"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let r=0;r<t.imagesToLoad.length;r+=1){const s=t.imagesToLoad[r];t.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,e)}}const images={loadImage,preloadImages};function checkOverflow(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:s}=r;if(s){const n=t.slides.length-1,i=t.slidesGrid[n]+t.slidesSizesGrid[n]+s*2;t.isLocked=t.size>i}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(t,e){return function(s={}){const n=Object.keys(s)[0],i=s[n];if(typeof i!="object"||i===null){extend$2(e,s);return}if(["navigation","pagination","scrollbar"].indexOf(n)>=0&&t[n]===!0&&(t[n]={auto:!0}),!(n in t&&"enabled"in i)){extend$2(e,s);return}t[n]===!0&&(t[n]={enabled:!0}),typeof t[n]=="object"&&!("enabled"in t[n])&&(t[n].enabled=!0),t[n]||(t[n]={enabled:!1}),extend$2(e,s)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes,images},extendedDefaults={};class Swiper$1{constructor(...e){let r,s;if(e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?s=e[0]:[r,s]=e,s||(s={}),s=extend$2({},s),r&&!s.el&&(s.el=r),s.el&&$(s.el).length>1){const a=[];return $(s.el).each(l=>{const c=extend$2({},s,{el:l});a.push(new Swiper$1(c))}),a}const n=this;n.__swiper__=!0,n.support=getSupport(),n.device=getDevice({userAgent:s.userAgent}),n.browser=getBrowser(),n.eventsListeners={},n.eventsAnyListeners=[],n.modules=[...n.__modules__],s.modules&&Array.isArray(s.modules)&&n.modules.push(...s.modules);const i={};n.modules.forEach(a=>{a({swiper:n,extendParams:moduleExtendParams(s,i),on:n.on.bind(n),once:n.once.bind(n),off:n.off.bind(n),emit:n.emit.bind(n)})});const o=extend$2({},defaults,i);return n.params=extend$2({},o,extendedDefaults,s),n.originalParams=extend$2({},n.params),n.passedParams=extend$2({},s),n.params&&n.params.on&&Object.keys(n.params.on).forEach(a=>{n.on(a,n.params.on[a])}),n.params&&n.params.onAny&&n.onAny(n.params.onAny),n.$=$,Object.assign(n,{enabled:n.params.enabled,el:r,classNames:[],slides:$(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return n.params.direction==="horizontal"},isVertical(){return n.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev,touchEvents:function(){const l=["touchstart","touchmove","touchend","touchcancel"],c=["pointerdown","pointermove","pointerup"];return n.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},n.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},n.support.touch||!n.params.simulateTouch?n.touchEventsTouch:n.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:n.params.focusableElements,lastClickTime:now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:n.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),n.emit("_swiper"),n.params.init&&n.init(),n}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const s=this;e=Math.min(Math.max(e,0),1);const n=s.minTranslate(),o=(s.maxTranslate()-n)*e+n;s.translateTo(o,typeof r>"u"?0:r),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return r.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.each(s=>{const n=e.getSlideClasses(s);r.push({slideEl:s,classNames:n}),e.emit("_slideClass",s,n)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e="current",r=!1){const s=this,{params:n,slides:i,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=s;let u=1;if(n.centeredSlides){let d=i[c].swiperSlideSize,f;for(let m=c+1;m<i.length;m+=1)i[m]&&!f&&(d+=i[m].swiperSlideSize,u+=1,d>l&&(f=!0));for(let m=c-1;m>=0;m-=1)i[m]&&!f&&(d+=i[m].swiperSlideSize,u+=1,d>l&&(f=!0))}else if(e==="current")for(let d=c+1;d<i.length;d+=1)(r?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:s}=e;s.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function n(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let i;e.params.freeMode&&e.params.freeMode.enabled?(n(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?i=e.slideTo(e.slides.length-1,0,!1,!0):i=e.slideTo(e.activeIndex,0,!1,!0),i||n()),s.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r=!0){const s=this,n=s.params.direction;return e||(e=n==="horizontal"?"vertical":"horizontal"),e===n||e!=="horizontal"&&e!=="vertical"||(s.$el.removeClass(`${s.params.containerModifierClass}${n}`).addClass(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.each(i=>{e==="vertical"?i.style.width="":i.style.height=""}),s.emit("changeDirection"),r&&s.update()),s}changeLanguageDirection(e){const r=this;r.rtl&&e==="rtl"||!r.rtl&&e==="ltr"||(r.rtl=e==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.$el.addClass(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.$el.removeClass(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(e){const r=this;if(r.mounted)return!0;const s=$(e||r.params.el);if(e=s[0],!e)return!1;e.swiper=r;const n=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const a=$(e.shadowRoot.querySelector(n()));return a.children=l=>s.children(l),a}return s.children?s.children(n()):$(s).children(n())})();if(o.length===0&&r.params.createElements){const l=getDocument().createElement("div");o=$(l),l.className=r.params.wrapperClass,s.append(l),s.children(`.${r.params.slideClass}`).each(c=>{o.append(c)})}return Object.assign(r,{$el:s,el:e,$wrapperEl:o,wrapperEl:o[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl"),wrongRTL:o.css("display")==="-webkit-box"}),!0}init(e){const r=this;return r.initialized||r.mount(e)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(e=!0,r=!0){const s=this,{params:n,$el:i,$wrapperEl:o,slides:a}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),n.loop&&s.loopDestroy(),r&&(s.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(l=>{s.off(l)}),e!==!1&&(s.$el[0].swiper=null,deleteProps(s)),s.destroyed=!0),null}static extendDefaults(e){extend$2(extendedDefaults,e)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(e){Swiper$1.prototype.__modules__||(Swiper$1.prototype.__modules__=[]);const r=Swiper$1.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>Swiper$1.installModule(r)),Swiper$1):(Swiper$1.installModule(e),Swiper$1)}}Object.keys(prototypes).forEach(t=>{Object.keys(prototypes[t]).forEach(e=>{Swiper$1.prototype[e]=prototypes[t][e]})});Swiper$1.use([Resize,Observer]);function isObject$1(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function extend$1(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>r.indexOf(s)<0).forEach(s=>{typeof t[s]>"u"?t[s]=e[s]:isObject$1(e[s])&&isObject$1(t[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?t[s]=e[s]:extend$1(t[s],e[s]):t[s]=e[s]})}function needsNavigation(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function needsPagination(t={}){return t.pagination&&typeof t.pagination.el>"u"}function needsScrollbar(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function uniqueClasses(t=""){const e=t.split(" ").map(s=>s.trim()).filter(s=>!!s),r=[];return e.forEach(s=>{r.indexOf(s)<0&&r.push(s)}),r.join(" ")}const paramsList=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function getParams(t={},e=!0){const r={on:{}},s={},n={};extend$1(r,Swiper$1.defaults),extend$1(r,Swiper$1.extendedDefaults),r._emitClasses=!0,r.init=!1;const i={},o=paramsList.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?isObject$1(t[l])?(r[l]={},n[l]={},extend$1(r[l],t[l]),extend$1(n[l],t[l])):(r[l]=t[l],n[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?s[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:r.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:i[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{r[l]===!0&&(r[l]={}),r[l]===!1&&delete r[l]}),{params:r,passedParams:n,rest:i,events:s}}function mountSwiper({el:t,nextEl:e,prevEl:r,paginationEl:s,scrollbarEl:n,swiper:i},o){needsNavigation(o)&&e&&r&&(i.params.navigation.nextEl=e,i.originalParams.navigation.nextEl=e,i.params.navigation.prevEl=r,i.originalParams.navigation.prevEl=r),needsPagination(o)&&s&&(i.params.pagination.el=s,i.originalParams.pagination.el=s),needsScrollbar(o)&&n&&(i.params.scrollbar.el=n,i.originalParams.scrollbar.el=n),i.init(t)}const calcLoopedSlides=(t,e)=>{let r=e.slidesPerView;if(e.breakpoints){const n=Swiper$1.prototype.getBreakpoint(e.breakpoints),i=n in e.breakpoints?e.breakpoints[n]:void 0;i&&i.slidesPerView&&(r=i.slidesPerView)}let s=Math.ceil(parseFloat(e.loopedSlides||r,10));return s+=e.loopAdditionalSlides,s>t.length&&e.loopedSlidesLimit&&(s=t.length),s};function renderLoop(t,e,r){const s=e.map((l,c)=>(l.props||(l.props={}),l.props.swiperRef=t,l.props["data-swiper-slide-index"]=c,l));function n(l,c,u){return l.props||(l.props={}),h(l.type,{...l.props,key:`${l.key}-duplicate-${c}-${u}`,class:`${l.props.className||""} ${r.slideDuplicateClass} ${l.props.class||""}`},l.children)}if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-s.length%r.slidesPerGroup;if(l!==r.slidesPerGroup)for(let c=0;c<l;c+=1){const u=h("div",{class:`${r.slideClass} ${r.slideBlankClass}`});s.push(u)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length);const i=calcLoopedSlides(s,r),o=[],a=[];for(let l=0;l<i;l+=1){const c=l-Math.floor(l/s.length)*s.length;a.push(n(s[c],l,"append")),o.unshift(n(s[s.length-c-1],l,"prepend"))}return t.value&&(t.value.loopedSlides=i),[...o,...s,...a]}function getChangedParams(t,e,r,s,n){const i=[];if(!e)return i;const o=l=>{i.indexOf(l)<0&&i.push(l)};if(r&&s){const l=s.map(n),c=r.map(n);l.join("")!==c.join("")&&o("children"),s.length!==r.length&&o("children")}return paramsList.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(isObject$1(t[l])&&isObject$1(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}))}else t[l]!==e[l]&&o(l)}),i}function getChildren(t,e,r){t===void 0&&(t={});const s=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},i=(o,a)=>{!Array.isArray(o)||o.forEach(l=>{const c=typeof l.type=="symbol";a==="default"&&(a="container-end"),c&&l.children?i(l.children,"default"):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?s.push(l):n[a]&&n[a].push(l)})};return Object.keys(t).forEach(o=>{if(typeof t[o]!="function")return;const a=t[o]();i(a,o)}),r.value=e.value,e.value=s,{slides:s,slots:n}}function updateSwiper({swiper:t,slides:e,passedParams:r,changedParams:s,nextEl:n,prevEl:i,scrollbarEl:o,paginationEl:a}){const l=s.filter(S=>S!=="children"&&S!=="direction"),{params:c,pagination:u,navigation:d,scrollbar:f,virtual:m,thumbs:g}=t;let y,b,x,_,w;s.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(y=!0),s.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(b=!0),s.includes("pagination")&&r.pagination&&(r.pagination.el||a)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(x=!0),s.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&f&&!f.el&&(_=!0),s.includes("navigation")&&r.navigation&&(r.navigation.prevEl||i)&&(r.navigation.nextEl||n)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(w=!0);const v=S=>{!t[S]||(t[S].destroy(),S==="navigation"?(c[S].prevEl=void 0,c[S].nextEl=void 0,t[S].prevEl=void 0,t[S].nextEl=void 0):(c[S].el=void 0,t[S].el=void 0))};l.forEach(S=>{if(isObject$1(c[S])&&isObject$1(r[S]))extend$1(c[S],r[S]);else{const M=r[S];(M===!0||M===!1)&&(S==="navigation"||S==="pagination"||S==="scrollbar")?M===!1&&v(S):c[S]=r[S]}}),l.includes("controller")&&!b&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),s.includes("children")&&e&&m&&c.virtual.enabled?(m.slides=e,m.update(!0)):s.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),y&&g.init()&&g.update(!0),b&&(t.controller.control=c.controller.control),x&&(a&&(c.pagination.el=a),u.init(),u.render(),u.update()),_&&(o&&(c.scrollbar.el=o),f.init(),f.updateSize(),f.setTranslate()),w&&(n&&(c.navigation.nextEl=n),i&&(c.navigation.prevEl=i),d.init(),d.update()),s.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),s.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),s.includes("direction")&&t.changeDirection(r.direction,!1),t.update()}function renderVirtual(t,e,r){if(!r)return null;const s=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return e.filter((n,i)=>i>=r.from&&i<=r.to).map(n=>(n.props||(n.props={}),n.props.style||(n.props.style={}),n.props.swiperRef=t,n.props.style=s,h(n.type,{...n.props},n.children)))}const updateOnVirtualData=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())},Swiper={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:r,emit:s}=e;const{tag:n,wrapperTag:i}=t,o=ref("swiper"),a=ref(null),l=ref(!1),c=ref(!1),u=ref(null),d=ref(null),f=ref(null),m={value:[]},g={value:[]},y=ref(null),b=ref(null),x=ref(null),_=ref(null),{params:w,passedParams:v}=getParams(t,!1);getChildren(r,m,g),f.value=v,g.value=m.value;const S=()=>{getChildren(r,m,g),l.value=!0};if(w.onAny=function(C){for(var A=arguments.length,X=new Array(A>1?A-1:0),F=1;F<A;F++)X[F-1]=arguments[F];s(C,...X)},Object.assign(w.on,{_beforeBreakpoint:S,_containerClasses(C,A){o.value=A}}),d.value=new Swiper$1(w),d.value.loopCreate=()=>{},d.value.loopDestroy=()=>{},w.loop&&(d.value.loopedSlides=calcLoopedSlides(m.value,w)),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=m.value;const C={cache:!1,slides:m.value,renderExternal:A=>{a.value=A},renderExternalUpdate:!1};extend$1(d.value.params.virtual,C),extend$1(d.value.originalParams.virtual,C)}onUpdated(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:C}=getParams(t,!1),A=getChangedParams(C,f.value,m.value,g.value,X=>X.props&&X.props.key);f.value=C,(A.length||l.value)&&d.value&&!d.value.destroyed&&updateSwiper({swiper:d.value,slides:m.value,passedParams:C,changedParams:A,nextEl:y.value,prevEl:b.value,scrollbarEl:_.value,paginationEl:x.value}),l.value=!1}),provide("swiper",d),watch(a,()=>{nextTick$1(()=>{updateOnVirtualData(d.value)})}),onMounted(()=>{!u.value||(mountSwiper({el:u.value,nextEl:y.value,prevEl:b.value,paginationEl:x.value,scrollbarEl:_.value,swiper:d.value},w),s("swiper",d.value))}),onBeforeUnmount(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function M(C){return w.virtual?renderVirtual(d,C,a.value):!w.loop||d.value&&d.value.destroyed?(C.forEach(A=>{A.props||(A.props={}),A.props.swiperRef=d}),C):renderLoop(d,C,w)}return()=>{const{slides:C,slots:A}=getChildren(r,m,g);return h(n,{ref:u,class:uniqueClasses(o.value)},[A["container-start"],h(i,{class:"swiper-wrapper"},[A["wrapper-start"],M(C),A["wrapper-end"]]),needsNavigation(t)&&[h("div",{ref:b,class:"swiper-button-prev"}),h("div",{ref:y,class:"swiper-button-next"})],needsScrollbar(t)&&h("div",{ref:_,class:"swiper-scrollbar"}),needsPagination(t)&&h("div",{ref:x,class:"swiper-pagination"}),A["container-end"]])}}},SwiperSlide={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:r}=e,s=!1;const{swiperRef:n}=t,i=ref(null),o=ref("swiper-slide");function a(c,u,d){u===i.value&&(o.value=d)}onMounted(()=>{!n||!n.value||(n.value.on("_slideClass",a),s=!0)}),onBeforeUpdate(()=>{s||!n||!n.value||(n.value.on("_slideClass",a),s=!0)}),onUpdated(()=>{!i.value||!n||!n.value||n.value.destroyed&&o.value!=="swiper-slide"&&(o.value="swiper-slide")}),onBeforeUnmount(()=>{!n||!n.value||n.value.off("_slideClass",a)});const l=computed(()=>({isActive:o.value.indexOf("swiper-slide-active")>=0||o.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:o.value.indexOf("swiper-slide-visible")>=0,isDuplicate:o.value.indexOf("swiper-slide-duplicate")>=0,isPrev:o.value.indexOf("swiper-slide-prev")>=0||o.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:o.value.indexOf("swiper-slide-next")>=0||o.value.indexOf("swiper-slide-duplicate-next")>=0}));return provide("swiperSlide",l),()=>h(t.tag,{class:uniqueClasses(`${o.value}`),ref:i,"data-swiper-slide-index":t.virtualIndex},t.zoom?h("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},r.default&&r.default(l.value)):r.default&&r.default(l.value))}},swiperBundle="",_sfc_main$2=defineComponent({__name:"BagBox",props:{msg:null,splist:null},setup(t){ref(0);const e=ref(1),r=ref(1);return onMounted(()=>{e.value=window.screen.width,r.value=window.screen.height,console.log(e.value),console.log("onBagMounted")}),(s,n)=>(openBlock(),createElementBlock("div",{style:normalizeStyle("width:70px;height:"+r.value+"px"),class:"wrapper"},[createVNode(unref(Swiper),{spaceBetween:2,slidesPerView:r.value/60,freeMode:!0,loop:!1,direction:"vertical",class:"content"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.splist,i=>(openBlock(),createBlock$1(unref(SwiperSlide),{key:i.name},{default:withCtx(()=>[createVNode(FurniturnContein,{sp:i},null,8,["sp"])]),_:2},1024))),128))]),_:1},8,["slidesPerView"])],4))}}),BagBox_vue_vue_type_style_index_0_scoped_5d0ca3f1_lang="",BagBox=_export_sfc(_sfc_main$2,[["__scopeId","data-v-5d0ca3f1"]]),_hoisted_1={class:"root"},_sfc_main$1=defineComponent({__name:"Home_Page",setup(t){const e=ref(null);let r;const s=ref(!0),n=ref(!0),i=ref(musicopenPath),o=ref(furSet),a=()=>{s.value=!s.value,i.value=s.value?musicopenPath:musicclosePath,console.log(s.value),s.value==!1?console.log("music close"):console.log("music open")},l=()=>{if(console.log(n.value),n.value=!n.value,o.value=n.value?furSet:furSave,n.value)for(let c=0;c<r.length;c++)r[c].setspedit(!1),console.log("\u5173\u95ED\u7CBE\u7075\u7F16\u8F91\u72B6\u6001\uFF1A",r[c]),r[c].sprite.interactive=!1,Pixihttp.updatasprite(r[c])};return onMounted(async()=>{var f;let c=window.screen.width,u=window.screen.height;c>u?console.log("\u6A2A\u5C4F"):console.log("\u7AD6\u5C4F"),await PixiEngine.init(window.screen.width,window.screen.height);const d=PixiEngine.getCanvas();(f=e.value)==null||f.appendChild(d),PixiEngine.loadobj(window.screen.width,window.screen.height),PixiEngine.tickinit(),PixiEngine.loadeventlisten(),r=PixiEngine.getloadsprite(),console.log("load sprite",r)}),(c,u)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:"main-canvas",ref_key:"canvas",ref:e},null,512),createBaseVNode("div",{class:normalizeClass(["setfurniture",{openfurn:n.value,closefurn:!n.value}]),style:normalizeStyle({backgroundImage:"url("+o.value+")"}),onClick:l},null,6),createBaseVNode("div",{ref:"music",style:normalizeStyle({backgroundImage:"url("+i.value+")"}),class:"setmusicbuttom",onClick:a},null,4),n.value?createCommentVNode("",!0):(openBlock(),createBlock$1(BagBox,{key:0,msg:"asd",splist:unref(r)},null,8,["splist"]))]))}}),Home_Page_vue_vue_type_style_index_0_scoped_de9b206d_lang="",Home=_export_sfc(_sfc_main$1,[["__scopeId","data-v-de9b206d"]]),isDef=t=>t!=null,isFunction=t=>typeof t=="function",isObject=t=>t!==null&&typeof t=="object",isNumeric=t=>typeof t=="number"||/^\d+(\.\d+)?$/.test(t),extend=Object.assign,inBrowser=typeof window<"u";function get(t,e){const r=e.split(".");let s=t;return r.forEach(n=>{var i;s=isObject(s)&&(i=s[n])!=null?i:""}),s}const numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeNumericProp=t=>({type:numericProp,default:t}),makeStringProp=t=>({type:String,default:t});function useParent(t){const e=inject(t,null);if(e){const r=getCurrentInstance(),{link:s,unlink:n,internalChildren:i}=e;s(r),onUnmounted(()=>n(r));const o=computed(()=>i.indexOf(r));return{parent:e,index:o}}return{parent:null,index:ref(-1)}}function flattenVNodes(t){const e=[],r=s=>{Array.isArray(s)&&s.forEach(n=>{var i;isVNode(n)&&(e.push(n),(i=n.component)!=null&&i.subTree&&(e.push(n.component.subTree),r(n.component.subTree.children)),n.children&&r(n.children))})};return r(t),e}function sortChildren(t,e,r){const s=flattenVNodes(t.subTree.children);r.sort((i,o)=>s.indexOf(i.vnode)-s.indexOf(o.vnode));const n=r.map(i=>i.proxy);e.sort((i,o)=>{const a=n.indexOf(i),l=n.indexOf(o);return a-l})}function useChildren(t){const e=reactive([]),r=reactive([]),s=getCurrentInstance();return{children:e,linkChildren:i=>{provide(t,Object.assign({link:l=>{l.proxy&&(r.push(l),e.push(l.proxy),sortChildren(s,e,r))},unlink:l=>{const c=r.indexOf(l);e.splice(c,1),r.splice(c,1)},children:e,internalChildren:r},i))}}}function addUnit(t){if(isDef(t))return isNumeric(t)?`${t}px`:String(t)}const camelizeRE=/-(\w)/g,camelize=t=>t.replace(camelizeRE,(e,r)=>r.toUpperCase()),kebabCase=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),{hasOwnProperty}=Object.prototype;function assignKey(t,e,r){const s=e[r];!isDef(s)||(!hasOwnProperty.call(t,r)||!isObject(s)?t[r]=s:t[r]=deepAssign(Object(t[r]),s))}function deepAssign(t,e){return Object.keys(e).forEach(r=>{assignKey(t,e,r)}),t}var stdin_default$7={name:"\u59D3\u540D",tel:"\u7535\u8BDD",save:"\u4FDD\u5B58",confirm:"\u786E\u8BA4",cancel:"\u53D6\u6D88",delete:"\u5220\u9664",loading:"\u52A0\u8F7D\u4E2D...",noCoupon:"\u6682\u65E0\u4F18\u60E0\u5238",nameEmpty:"\u8BF7\u586B\u5199\u59D3\u540D",addContact:"\u6DFB\u52A0\u8054\u7CFB\u4EBA",telInvalid:"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u7535\u8BDD",vanCalendar:{end:"\u7ED3\u675F",start:"\u5F00\u59CB",title:"\u65E5\u671F\u9009\u62E9",weekdays:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],monthTitle:(t,e)=>`${t}\u5E74${e}\u6708`,rangePrompt:t=>`\u6700\u591A\u9009\u62E9 ${t} \u5929`},vanCascader:{select:"\u8BF7\u9009\u62E9"},vanPagination:{prev:"\u4E0A\u4E00\u9875",next:"\u4E0B\u4E00\u9875"},vanPullRefresh:{pulling:"\u4E0B\u62C9\u5373\u53EF\u5237\u65B0...",loosing:"\u91CA\u653E\u5373\u53EF\u5237\u65B0..."},vanSubmitBar:{label:"\u5408\u8BA1:"},vanCoupon:{unlimited:"\u65E0\u95E8\u69DB",discount:t=>`${t}\u6298`,condition:t=>`\u6EE1${t}\u5143\u53EF\u7528`},vanCouponCell:{title:"\u4F18\u60E0\u5238",count:t=>`${t}\u5F20\u53EF\u7528`},vanCouponList:{exchange:"\u5151\u6362",close:"\u4E0D\u4F7F\u7528",enable:"\u53EF\u7528",disabled:"\u4E0D\u53EF\u7528",placeholder:"\u8F93\u5165\u4F18\u60E0\u7801"},vanAddressEdit:{area:"\u5730\u533A",areaEmpty:"\u8BF7\u9009\u62E9\u5730\u533A",addressEmpty:"\u8BF7\u586B\u5199\u8BE6\u7EC6\u5730\u5740",addressDetail:"\u8BE6\u7EC6\u5730\u5740",defaultAddress:"\u8BBE\u4E3A\u9ED8\u8BA4\u6536\u8D27\u5730\u5740"},vanAddressList:{add:"\u65B0\u589E\u5730\u5740"}};const lang=ref("zh-CN"),messages=reactive({"zh-CN":stdin_default$7}),Locale={messages(){return messages[lang.value]},use(t,e){lang.value=t,this.add({[t]:e})},add(t={}){deepAssign(messages,t)}};var stdin_default$6=Locale;function createTranslate(t){const e=camelize(t)+".";return(r,...s)=>{const n=stdin_default$6.messages(),i=get(n,e+r)||get(n,r);return isFunction(i)?i(...s):i}}function genBem(t,e){return e?typeof e=="string"?` ${t}--${e}`:Array.isArray(e)?e.reduce((r,s)=>r+genBem(t,s),""):Object.keys(e).reduce((r,s)=>r+(e[s]?genBem(t,s):""),""):""}function createBEM(t){return(e,r)=>(e&&typeof e!="string"&&(r=e,e=""),e=e?`${t}__${e}`:t,`${e}${genBem(e,r)}`)}function createNamespace(t){const e=`van-${t}`;return[e,createBEM(e),createTranslate(e)]}const BORDER="van-hairline",BORDER_TOP=`${BORDER}--top`;function withInstall(t){return t.install=e=>{const{name:r}=t;r&&(e.component(r,t),e.component(camelize(`-${r}`),t))},t}const routeProps={to:[String,Object],url:String,replace:Boolean};function route({to:t,url:e,replace:r,$router:s}){t&&s?s[r?"replace":"push"](t):e&&(r?location.replace(e):location.href=e)}function useRoute(){const t=getCurrentInstance().proxy;return()=>route(t)}const[name$6,bem$6]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$5=defineComponent({name:name$6,props:badgeProps,setup(t,{slots:e}){const r=()=>{if(e.content)return!0;const{content:o,showZero:a}=t;return isDef(o)&&o!==""&&(a||o!==0&&o!=="0")},s=()=>{const{dot:o,max:a,content:l}=t;if(!o&&r())return e.content?e.content():isDef(a)&&isNumeric(l)&&+l>a?`${a}+`:l},n=computed(()=>{const o={background:t.color};if(t.offset){const[a,l]=t.offset;e.default?(o.top=addUnit(l),typeof a=="number"?o.right=addUnit(-a):o.right=a.startsWith("-")?a.replace("-",""):`-${a}`):(o.marginTop=addUnit(l),o.marginLeft=addUnit(a))}return o}),i=()=>{if(r()||t.dot)return createVNode("div",{class:bem$6([t.position,{dot:t.dot,fixed:!!e.default}]),style:n.value},[s()])};return()=>{if(e.default){const{tag:o}=t;return createVNode(o,{class:bem$6("wrapper")},{default:()=>[e.default(),i()]})}return i()}}});const Badge=withInstall(stdin_default$5),setGlobalZIndex=t=>{},[name$5,bem$5]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$5),configProviderProps={tag:makeStringProp("div"),theme:makeStringProp("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function mapThemeVarsToCSSVars(t){const e={};return Object.keys(t).forEach(r=>{e[`--van-${kebabCase(r)}`]=t[r]}),e}defineComponent({name:name$5,props:configProviderProps,setup(t,{slots:e}){const r=computed(()=>mapThemeVarsToCSSVars(extend({},t.themeVars,t.theme==="dark"?t.themeVarsDark:t.themeVarsLight)));if(inBrowser){const s=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},n=(i=t.theme)=>{document.documentElement.classList.remove(`van-theme-${i}`)};watch(()=>t.theme,(i,o)=>{o&&n(o),s()},{immediate:!0}),onActivated(s),onDeactivated(n),onBeforeUnmount(n)}return provide(CONFIG_PROVIDER_KEY,t),watchEffect(()=>{t.zIndex!==void 0&&setGlobalZIndex(t.zIndex)}),()=>createVNode(t.tag,{class:bem$5(),style:r.value},{default:()=>{var s;return[(s=e.default)==null?void 0:s.call(e)]}})}});const[name$4,bem$4]=createNamespace("icon"),isImage=t=>t==null?void 0:t.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$4=defineComponent({name:name$4,props:iconProps,setup(t,{slots:e}){const r=inject(CONFIG_PROVIDER_KEY,null),s=computed(()=>t.classPrefix||(r==null?void 0:r.iconPrefix)||bem$4());return()=>{const{tag:n,dot:i,name:o,size:a,badge:l,color:c}=t,u=isImage(o);return createVNode(Badge,mergeProps({dot:i,tag:n,class:[s.value,u?"":`${s.value}-${o}`],style:{color:c,fontSize:addUnit(a)},content:l},t.badgeProps),{default:()=>{var d;return[(d=e.default)==null?void 0:d.call(e),u&&createVNode("img",{class:bem$4("image"),src:o},null)]}})}}});const Icon=withInstall(stdin_default$4),[name$3,bem$3]=createNamespace("row"),ROW_KEY=Symbol(name$3),rowProps={tag:makeStringProp("div"),wrap:truthProp,align:String,gutter:makeNumericProp(0),justify:String};var stdin_default$3=defineComponent({name:name$3,props:rowProps,setup(t,{slots:e}){const{children:r,linkChildren:s}=useChildren(ROW_KEY),n=computed(()=>{const o=[[]];let a=0;return r.forEach((l,c)=>{a+=Number(l.span),a>24?(o.push([c]),a-=24):o[o.length-1].push(c)}),o}),i=computed(()=>{const o=Number(t.gutter),a=[];return o&&n.value.forEach(l=>{const c=o*(l.length-1)/l.length;l.forEach((u,d)=>{if(d===0)a.push({right:c});else{const f=o-a[u-1].right,m=c-f;a.push({left:f,right:m})}})}),a});return s({spaces:i}),()=>{const{tag:o,wrap:a,align:l,justify:c}=t;return createVNode(o,{class:bem$3({[`align-${l}`]:l,[`justify-${c}`]:c,nowrap:!a})},{default:()=>{var u;return[(u=e.default)==null?void 0:u.call(e)]}})}}});const[name$2,bem$2]=createNamespace("col"),colProps={tag:makeStringProp("div"),span:makeNumericProp(0),offset:numericProp};var stdin_default$2=defineComponent({name:name$2,props:colProps,setup(t,{slots:e}){const{parent:r,index:s}=useParent(ROW_KEY),n=computed(()=>{if(!r)return;const{spaces:i}=r;if(i&&i.value&&i.value[s.value]){const{left:o,right:a}=i.value[s.value];return{paddingLeft:o?`${o}px`:null,paddingRight:a?`${a}px`:null}}});return()=>{const{tag:i,span:o,offset:a}=t;return createVNode(i,{style:n.value,class:bem$2({[o]:o,[`offset-${a}`]:a})},{default:()=>{var l;return[(l=e.default)==null?void 0:l.call(e)]}})}}});const Col=withInstall(stdin_default$2),[name$1,bem$1]=createNamespace("grid"),gridProps={square:Boolean,center:truthProp,border:truthProp,gutter:numericProp,reverse:Boolean,iconSize:numericProp,direction:String,clickable:Boolean,columnNum:makeNumericProp(4)},GRID_KEY=Symbol(name$1);var stdin_default$1=defineComponent({name:name$1,props:gridProps,setup(t,{slots:e}){const{linkChildren:r}=useChildren(GRID_KEY);return r({props:t}),()=>{var s;return createVNode("div",{style:{paddingLeft:addUnit(t.gutter)},class:[bem$1(),{[BORDER_TOP]:t.border&&!t.gutter}]},[(s=e.default)==null?void 0:s.call(e)])}}});const Grid=withInstall(stdin_default$1),[name,bem]=createNamespace("grid-item"),gridItemProps=extend({},routeProps,{dot:Boolean,text:String,icon:String,badge:numericProp,iconColor:String,iconPrefix:String,badgeProps:Object});var stdin_default=defineComponent({name,props:gridItemProps,setup(t,{slots:e}){const{parent:r,index:s}=useParent(GRID_KEY),n=useRoute();if(!r)return;const i=computed(()=>{const{square:u,gutter:d,columnNum:f}=r.props,m=`${100/+f}%`,g={flexBasis:m};if(u)g.paddingTop=m;else if(d){const y=addUnit(d);g.paddingRight=y,s.value>=f&&(g.marginTop=y)}return g}),o=computed(()=>{const{square:u,gutter:d}=r.props;if(u&&d){const f=addUnit(d);return{right:f,bottom:f,height:"auto"}}}),a=()=>{if(e.icon)return createVNode(Badge,mergeProps({dot:t.dot,content:t.badge},t.badgeProps),{default:e.icon});if(t.icon)return createVNode(Icon,{dot:t.dot,name:t.icon,size:r.props.iconSize,badge:t.badge,class:bem("icon"),color:t.iconColor,badgeProps:t.badgeProps,classPrefix:t.iconPrefix},null)},l=()=>{if(e.text)return e.text();if(t.text)return createVNode("span",{class:bem("text")},[t.text])},c=()=>e.default?e.default():[a(),l()];return()=>{const{center:u,border:d,square:f,gutter:m,reverse:g,direction:y,clickable:b}=r.props,x=[bem("content",[y,{center:u,square:f,reverse:g,clickable:b,surround:d&&m}]),{[BORDER]:d}];return createVNode("div",{class:[bem({square:f})],style:i.value},[createVNode("div",{role:b?"button":void 0,class:x,style:o.value,tabindex:b?0:void 0,onClick:n},[c()])])}}});const GridItem=withInstall(stdin_default),Row=withInstall(stdin_default$3),base="",index$5="",index$4="",index$3="",index$2="",index$1="",index="",_sfc_main=defineComponent({__name:"File_System",setup(t){const e=(s,n)=>{console.log(s,n)};let r=reactive([]);return onMounted(()=>{console.log("onMounted"),console.log("ipfs-lsalldir:","ipfs"),r.length=0,AppIpfs.lsalldir().then(s=>{r.push(...s),console.log("ipfs-lsalldir:",r)})}),(s,n)=>{const i=Col,o=Row,a=GridItem,l=Grid;return openBlock(),createElementBlock(Fragment,null,[createVNode(o,{class:"topbox"},{default:withCtx(()=>[createVNode(i,{span:"8",class:"box"}),createVNode(i,{span:"8",class:"box"},{default:withCtx(()=>[createTextVNode("File Systems")]),_:1}),createVNode(i,{span:"8",class:"box"})]),_:1}),createVNode(o,null,{default:withCtx(()=>[createVNode(l,{"column-num":3},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),(c,u)=>(openBlock(),createBlock$1(a,{key:u,icon:"card",text:c.name,clickable:"true",onClick:d=>e(d,c)},null,8,["text","onClick"]))),128))]),_:1})]),_:1})],64)}}}),File_System_vue_vue_type_style_index_0_scoped_b77a9d5a_lang="",FS=_export_sfc(_sfc_main,[["__scopeId","data-v-b77a9d5a"]]),router=createRouter({history:createWebHistory("/"),routes:[{path:"/",name:"Home",component:Home},{path:"/filesystem",name:"FS",component:FS}]}),app=createApp(App);app.use(router);app.use(Icon);app.mount("#app");
